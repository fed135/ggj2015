define("Arstider/Background",["Arstider/DisplayObject"],function(f){return new f});
define("Arstider/Bitmap",["Arstider/Request","Arstider/Browser","Arstider/Buffer","Arstider/Preloader"],function(f,d,c,b){function a(a){a=a||{};this.attempt=0;this.url=Arstider.checkIn(a.data,a.url||"");this.data=new Image;this.error=a.error||null;this.callback=a.callback||null;this.width=Arstider.checkIn(a.width,0);this.height=Arstider.checkIn(a.height,0);this.id=this.url+Arstider.timestamp()+Math.random();this.load()}window.URL=void 0!=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL||
{};a.prototype.load=function(){""!=this.url&&(this.attempt++,void 0!=Arstider.blobCache[this.url]?this._fetchUrl(Arstider.blobCache[this.url].url):-1!=this.url.indexOf("data:image")?this._fetchUrl(this.url):"ie"==d.name&&9==d.version?this.compatibilityLoad(this.url):(this.req=new f({url:this.url,caller:this,callback:this._parse,cache:!1,track:!0,error:this.error}),this.req.send()))};a.prototype.compatibilityLoad=function(a){var g=this;b.progress(a,0);this.data.onload=function(){g.data.onload=null;
g.width=g.data.width;g.height=g.data.height;b.progress(a,100);g.callback&&g.callback(g)};this.data.onerror=function(a){g.error&&g.error(Arstider.error(URIError,{code:500,module:"Arstider/Bitmap",message:"Error while parsing saved blob information for "+g.url}));a&&a.preventDefault&&a.preventDefault();return!1};this.data.src=a};a.prototype._parse=function(a){var g=this;if(void 0==Arstider.blobCache[this.url]){var b;if(a.indexOf&&-1!=a.indexOf("data:"))b=a;else{try{b=window.URL.createObjectURL(a)}catch(c){b=
null}if(!window.URL.createObjectURL||!b){var d=new window.FileReader;d.readAsDataURL(a);d.onloadend=function(){Arstider.blobCache[g.url]={url:d.result,size:a.size};g._fetchUrl.call(g,Arstider.blobCache[g.url].url)};return}}Arstider.blobCache[this.url]={url:b,size:a.size||8*a.length}}this._fetchUrl(Arstider.blobCache[this.url].url)};a.prototype._fetchUrl=function(a,g){var b=this,c="safari"==d.name&&7>d.platformVersion;if(c&&(this.compatPrivilege=!0,Arstider.bufferPool[Arstider.tempBufferLabel+this.url]&&
null!=Arstider.bufferPool[Arstider.tempBufferLabel+this.url].data)){g?g(Arstider.bufferPool[Arstider.tempBufferLabel+this.url]):b.callback&&b.callback(Arstider.bufferPool[Arstider.tempBufferLabel+this.url]);return}"sharp"===Arstider.defaultRenderStyle?"firefox"==d.name?this.data.style.imageRendering="-moz-crisp-edges":"opera"==d.name?this.data.style.imageRendering="-o-crisp-edges":"safari"==d.name?this.data.style.imageRendering="-webkit-optimize-contrast":"ie"==d.name?this.data.style.msInterpolationMode=
"nearest-neighbor":this.data.style.imageRendering="crisp-edges":"auto"===Arstider.defaultRenderStyle?(this.data.style.imageRendering="auto",this.data.style.msInterpolationMode="auto"):Arstider.log("Arstider.setRenderStyle: Cannot apply mode '"+Arstider.defaultRenderStyle+"'",1);this.data.onload=function(){var a;b.data.onload=null;a=b;c?Arstider.bufferPool[Arstider.tempBufferLabel+b.url]&&null!=Arstider.bufferPool[Arstider.tempBufferLabel+b.url].data?a=Arstider.bufferPool[Arstider.tempBufferLabel+
b.url]:(a=Arstider.saveToBuffer(Arstider.tempBufferLabel+b.url,b.data),a.compatPrivilege=!0):(b.width=b.data.width,b.height=b.data.height);g?g(a):b.callback&&b.callback(a)};this.data.onerror=function(a){delete Arstider.blobCache[b.url];b.error&&b.error(Arstider.error(URIError,{code:500,module:"Arstider/Bitmap",message:"Error while parsing saved blob information for "+b.url}));a&&a.preventDefault&&a.preventDefault();return!1};this.data.src=a};a.prototype.kill=function(){this.data&&this.data.kill&&
this.data.kill();this.data=null;if(this.url&&this.url in Arstider.blobCache){try{Arstider.blobCache[this.url].url&&window.URL.revokeObjectURL(Arstider.blobCache[this.url].url)}catch(a){Arstider.log("Arstider.Bitmap.kill: could not revoke blob url '"+this.url+"'",2)}delete Arstider.blobCache[this.url]}};return a});
define("Arstider/BitmapAnimation",["Arstider/DisplayObject","Arstider/sprites/SpritesheetManager","Arstider/Signal"],function(f,d,c){function b(a){a=a||Arstider.emptyObject;var g=this;this.speed=Arstider.checkIn(a.speed,1);this.loop=Arstider.checkIn(a.loop,!0);this.animCompleteSignal=new c;this.frameChangeSignal=new c;this.onReadySignal=new c;this.isPlaying=!0;this.bitmaps={};Arstider.Super(this,f,a);a.spritesheet&&d.get(a.spritesheet,a,function(h){g._setSpritesheet(h);if(a.onComplete)a.onComplete()})}
Arstider.Inherit(b,f);var a,h,g;b.prototype._setSpritesheet=function(a){this.spritesheet=a;var g=this.nextAnim||a.defaultAnim,h=this.nextAnimParams||null;g&&this.gotoAnim(g,h);a.imageUrl&&this._setImage(a.imageUrl)};b.prototype.killBuffer=function(){this.data&&this.data.kill&&this.data.kill();this.data=null;if(this.animCompleteSignal&&(this.removeChildren(),this.stop(),this.spritesheet=this.bitmaps=null,this.animCompleteSignal.removeAll(),this.frameChangeSignal.removeAll(),this.onReadySignal.removeAll(),
this.onReadySignal=this.frameChangeSignal=this.animCompleteSignal=null,this.onunload))this.onunload()};b.prototype.stop=function(){this.isPlaying=!1;return this};b.prototype.hasAnim=function(a){return this.spritesheet?this.spritesheet.getAnim(a)?!0:!1:!1};b.prototype.pause=function(){this.isPlaying=!1;return this};b.prototype.resume=function(){this.isPlaying=!0;return this};b.prototype.update=function(a){this.animation&&(this.isPlaying&&(h=a/1E3*this.animation.fps*this.speed,this.gotoFrame(this.animPosition+
h),this.animPosition-1+h>this.frames.length&&this._onAnimComplete()),this.isReady||(this.isReady=!0,this.onReadySignal.dispatch()))};b.prototype.gotoAndPlay=function(a,g){0<a?(this.playlist=null,this.gotoFrame(a)):"string"==typeof a?(this.playlist=null,this.gotoAnim(a,g)):0<a.length&&(this.playlist=a,this._next(g));this.isPlaying=!0;return this};b.prototype.gotoAndStop=function(a,g){this.gotoAndPlay(a,g);this.isPlaying=!1;return this};b.prototype.gotoAnim=function(a,g){this.isPlaying||(this.isPlaying=
!0);var h=this.timedAnim&&!(g&&!g.force);if(!this.spritesheet||h){if(h&&a==this.timedAnim)return;this.nextAnim=a;this.nextAnimParams=g;return this}this.animName=a;var h=this.spritesheet.getAnim(a),b=1;1<g&&(b=g);if(h){this.animation=h;h.fps||(h.fps=this.spritesheet.fps);clearTimeout(this.nextTimeout);this.timedAnim=null;h.image&&this._setImage(h.image);this.loopCurrentAnim=this.loop;if(h.loop||!1===h.loop)this.loopCurrentAnim=h.loop;this.frames=h.frames;g&&(g.reverse&&(this.spritesheet.reversedFrames||
(this.spritesheet.reversedFrames={}),this.spritesheet.reversedFrames[a]?this.frames=this.spritesheet.reversedFrames[a]:this.spritesheet.reversedFrames[a]=this.frames=this.frames.slice().reverse()),0<g.time&&(this.timedAnim=a,this.nextTimeout=setTimeout(this._onTimedAnimComplete.bind(this),g.time),g.next||(g.next=this.defaultAnim)),g.next&&("string"==typeof g.next?(this.nextAnim=g.next,this.nextAnimParms=null):(this.nextAnim=g.next.name,delete g.next.name,this.nextAnimParams=g.next)),!0===g.loop||
!1===g.loop)&&(this.loopCurrentAnim=g.loop);this.currentFrame=this.animPosition=0;return this.gotoFrame(b)}console.error("BitmapAnimation: anim '"+a+"' not found.");return this};b.prototype.gotoFrame=function(g,h){g||(g=1);if(g!=this.animPosition||h)return this.animPosition=g,this.currentFrame=Arstider.floor(g),1>this.currentFrame&&(this.currentFrame=1),this.currentFrame>this.frames.length&&(this.currentFrame=this.frames.length),a=this.frames[this.currentFrame-1],a.image&&a.image!=this.currentImageUrl?
this._setImage(a.image):this._setFrame(a,h),this};b.prototype._onTimedAnimComplete=function(){this.nextTimeout=this.timedAnim=null;this._onAnimComplete()};b.prototype._onAnimComplete=function(){var a=this.animation.name;this.playlist?this._next():this.nextAnim&&!this.timedAnim?(this.gotoAnim(this.nextAnim,this.nextAnimParams),this.nextAnimParams=this.nextAnim=null):!this.loopCurrentAnim||1>=this.frames.length?(this.currentFrame=this.frames.length,this.stop()):this.currentFrame=this.animPosition=1;
this.animCompleteSignal&&this.animCompleteSignal.dispatch(a,this)};b.prototype._next=function(a){if(this.playlist&&!(0>=this.playlist.length)){var g=this.playlist.shift();this.gotoAnim(g,a);0>=this.playlist.length&&(this.playlist=null)}};b.prototype._setFrame=function(a,h){if(this.frame!=a||h)this.frame=a,g=a.rect,this.currentBitmap&&(this.currentBitmap.alpha=1,this.currentBitmap.width=this.currentBitmap.dataWidth=g[2],this.currentBitmap.height=this.currentBitmap.dataHeight=g[3],this.currentBitmap.largeData=
!0,this.currentBitmap.xOffset=g[0],this.currentBitmap.yOffset=g[1],a.origin&&(this.currentBitmap.x=a.origin[0],this.currentBitmap.y=a.origin[1]),a.sourceSize&&(this.dataWidth=a.sourceSize[0],this.dataHeight=a.sourceSize[1]),this.frameChangeSignal.dispatch(this.frame,this))};b.prototype._setImage=function(a){this.currentImageUrl!=a&&(this.currentImageUrl=a,this.currentBitmap&&(this.currentBitmap.alpha=0,this.currentBitmap=null),this.currentBitmap=this.bitmaps[a],this.currentBitmap||(this.currentBitmap=
new f({bitmap:a}),this.addChild(this.currentBitmap),this.bitmaps[a]=this.currentBitmap),this.gotoFrame(this.currentFrame,!0))};return b});
define("Arstider/BitmapSprite",["Arstider/DisplayObject","Arstider/sprites/SpritesheetManager"],function(f,d){function c(a){a=a||Arstider.emptyObject;var h=this;this.bitmaps={};Arstider.Super(this,f,a);a.spritesheet&&d.get(a.spritesheet,{imagesAtlas:!0},function(g){h._setSpritesheet(g);a.frame&&h.gotoFrame(a.frame);if(a.onComplete)a.onComplete()})}Arstider.Inherit(c,f);var b;c.prototype._setSpritesheet=function(a){this.spritesheet=a;a.imageUrl&&this._setImage(a.imageUrl)};c.prototype.killBuffer=function(){};
c.prototype.gotoFrame=function(a){a=this.spritesheet.getFrameByName(a);a.image&&this._setImage(a.image);this._setFrame(a);return this};c.prototype._setFrame=function(a){this.frame!=a&&(this.frame=a,b=a.rect,this.currentBitmap&&(this.currentBitmap.alpha=1,this.currentBitmap.loadSection(this.currentImageUrl,b[0],b[1],b[2],b[3]),this.width=b[2],this.height=b[3],a.origin&&(this.currentBitmap.x=a.origin[0],this.currentBitmap.y=a.origin[1])))};c.prototype._setImage=function(a){this.currentImageUrl!=a&&
(this.currentImageUrl=a,this.currentBitmap&&(this.currentBitmap.alpha=0,this.currentBitmap=null),this.currentBitmap=this.bitmaps[a],this.currentBitmap||(this.currentBitmap=new f,this.addChild(this.currentBitmap),this.currentBitmap.setIndex(0),this.bitmaps[a]=this.currentBitmap))};return c});
define("Arstider/Browser",[],function(){function f(){var b=c.indexOf("os ");return(-1<c.indexOf("iphone")||-1<c.indexOf("ipad"))&&-1<b?window.Number(c.substr(b+3,3).replace("_",".")):0}function d(){this.platform=navigator.platform;this.platformVersion=0;this.name=navigator.appName;this.version=parseFloat(navigator.appVersion);this.isMobile=!1;this.isSupported=!0;if(-1!=c.indexOf("iphone"))this.isMobile=!0,this.platform="iphone",this.platformVersion=f();else if(-1!=c.indexOf("ipod"))this.isMobile=
!0,this.platform="ipod",this.platformVersion=f();else if(-1!=c.indexOf("ipad"))this.isMobile=!0,this.platform="ipad",this.platformVersion=f();else if(-1!=c.indexOf("android"))this.isMobile=!0,this.platform="android",/android (\d+\.\d+)/.test(c)&&(this.platformVersion=parseFloat(RegExp.$1));else if(-1!=c.indexOf("win"))this.platform="windows",this.platformVersion=0;else if(-1!=c.indexOf("mac")){if(this.platform="mac",/os x (\d+\_\d+)/.test(c)){var b=RegExp.$1,b=b.replace("_",".");this.platformVersion=
parseFloat(b)}}else-1!=c.indexOf("iemobile")&&(this.isMobile=!0,this.platform="windows");if(-1!=c.indexOf("mobile")||-1!=c.indexOf("arm")||-1!=c.indexOf("touch"))this.isMobile=!0;-1!=c.indexOf("firefox")?(this.name="firefox",/firefox[\/\s](\d+\.\d+)/.test(c)&&(this.version=parseFloat(RegExp.$1))):-1!=c.indexOf("msie")?(this.name="ie",this.version=parseFloat(-1!=c.indexOf("msie")?parseInt(c.split("msie")[1]):!1)):-1!=c.indexOf("trident")&&-1==c.indexOf("msie")?(this.name="ie",this.version=parseFloat(c.substring(c.indexOf("rv:")+
3,c.indexOf(")")))):-1!=c.indexOf("chrome")?(this.name="chrome",/chrome[\/\s](\d+\.\d+)/.test(c)&&(this.version=parseFloat(RegExp.$1))):-1!=c.indexOf("crios")?(this.name="chrome",/crios[\/\s](\d+\.\d+)/.test(c)&&(this.version=parseFloat(RegExp.$1))):-1!=c.indexOf("applewebkit")?(this.name="safari",-1==c.indexOf("version")?this.version=6:/version[\/\s](\d+\.\d+)/.test(c)&&(this.version=parseFloat(RegExp.$1))):this.name="unknown";this.isSupported=this.checkSupport()}var c=navigator.userAgent.toLowerCase();
d.prototype.checkSupport=function(b){b=b||[{name:"ie",minVersion:8},{name:"firefox",minVersion:3.5},{name:"safari",minVersion:5},{name:"chrome"},{name:"unknown"}];for(var a=0;a<b.length;a++)if(b[a].name==this.name){if(void 0==b[a].minVersion||parseFloat(this.version)>=b[a].minVersion)return!0;Arstider.log("Arstider.Browser: browser version not supported",1);return!1}Arstider.log("Arstider.Browser: browser not supported",1);return!1};return new d});
define("Arstider/Buffer",["Arstider/Browser","Arstider/core/Pixel"],function(f,d){function c(b){b=b||{};this.data=window.document.createElement("canvas");Arstider.RTL&&(this.data.dir="rtl");this.preferedContext=b.webgl?c.WEBGL:c.CANVAS2D;this.renderStyle=Arstider.checkIn(b.renderStyle,Arstider.defaultRenderStyle);this.contextType=null;this.name=b.name||"buffer"+c._anonymousBuffers++;this.data.id=b.id||this.name;this.width=this.data.width=Arstider.checkIn(b.width,0);this.height=this.data.height=Arstider.checkIn(b.height,
0);this.data.buffer=this;this.vertexShader=b.vertexShader||null;this.fragmentShader=b.fragmentShader||null;this.compatPrivilege=!1;this.getContext();void 0!=Arstider.bufferPool[this.name]&&(Arstider.log("Arstider.Buffer: buffer "+this.name+" already exists, it will be ovewritten",1),Arstider.bufferPool[this.name].kill());Arstider.bufferPool[this.name]=this}c._anonymousBuffers=0;c.WEBGL="webgl";c.CANVAS2D="2d";c.SHARP="sharp";c.SMOOTH="auto";c.prototype.getContext=function(){if(this.context&&this.preferedContext==
this.contextType)return this.context;this.preferedContext==c.WEBGL&&(this.contextType=c.WEBGL,this.context=this.data.getContext(c.WEBGL)||this.data.getContext("experimental-webgl")||null,null==this.context&&(this.preferedContext=c.CANVAS2D));if(this.preferedContext==c.CANVAS2D||null==this.context)this.contextType=c.CANVAS2D,this.context=this.data.getContext(c.CANVAS2D);this.context.__init=!1;this.updateRenderStyle();Arstider.RTL&&(this.context.direction="rtl");return this.context};c.prototype.kill=
function(b){this.compatPrivilege&&!0!==b||(delete Arstider.bufferPool[this.name],this.height=this.width=0,this.data=null)};c.prototype.getMemory=function(){return this.data?this.height*this.width:0};c.prototype.setSize=function(b,a){if(this.data)return b&&(this.width=this.data.width=Math.abs(b)),a&&(this.height=this.data.height=Math.abs(a)),this.updateRenderStyle(),this};c.prototype.updateRenderStyle=function(b){if(this.data){if(b){if(b!=c.SMOOTH&&b!=c.SHARP){Arstider.log("Arstider.setRenderStyle: Cannot apply mode '"+
b+"'",1);return}this.renderStyle=this.context.renderStyle=b}this.renderStyle===c.SHARP?"firefox"==f.name?this.data.style.imageRendering="-moz-crisp-edges":"opera"==f.name?this.data.style.imageRendering="-o-crisp-edges":"safari"==f.name?this.data.style.imageRendering="-webkit-optimize-contrast":"ie"==f.name?this.data.style.msInterpolationMode="nearest-neighbor":this.data.style.imageRendering="crisp-edges":this.renderStyle===c.SMOOTH&&(this.data.style.imageRendering=c.SMOOTH,this.data.style.msInterpolationMode=
c.SMOOTH);this.context.imageSmoothingEnabled=this.context.msImageSmoothingEnabled=this.context.mozImageSmoothingEnabled=this.context.webkitImageSmoothingEnabled=this.context.oImageSmoothingEnabled=this.renderStyle==c.SMOOTH;return this}};c.prototype.getURL=function(b,a){if(this.data)return this.data.toDataURL(b||"image/png",Arstider.checkIn(a,10))};c.prototype.setShaders=function(b,a){this.vertexShader=b;this.fragmentShader=a;this.context&&this.context.__program&&(this.context.__program=null)};c.prototype.getPixelAt=
function(b,a){if(this.data){if(0>b||b>=this.width||0>a||a>=this.height)return null;var h=this.context.getImageData(b,a,1,1).data;return new d(b,a,this.data,h[0],h[1],h[2],h[3]/255)}};c.prototype.getAlphaAt=function(b,a){return!this.data||0>b||b>=this.width||0>a||a>=this.height?null:this.context.getImageData(b,a,1,1).data[3]/255};c.prototype.setPixelAt=function(b,a,h){if(this.data){if(0>b||b>=this.width||0>a||a>=this.height)return null;var g=this.context.createImageData(1,1),c=g.data;c[0]=h.r;c[1]=
h.g;c[2]=h.b;c[3]=255*h.a;this.context.putImageData(g,b,a);return this}};Arstider.saveToBuffer=function(b,a,h,g){b=new c({name:b,width:Arstider.firstOf([h,a.width],1),height:Arstider.firstOf([g,a.height],1)});b.context.drawImage(a,0,0,b.width,b.height);return b};return c});
define("Arstider/Dictionary",["Arstider/Request"],function(f){function d(){this._isLoading=!1;this._pendingStrings=[];this.strList=null}d.prototype.translate=function(c,b,a){if(null===this.strList&&!this._isLoading)return Arstider.log("Arstider.Dictionary.translate: no string file",2),c;if(this._isLoading)return this._pendingStrings.push([c,b,a]),c;var h=c,g;if(void 0!=this.strList[c]){if(h=this.strList[c],void 0!=b)for(g in b)h=h.split(g).join(b[g])}else Arstider.log("Arstider.Dictionary.translate: string not found",
2);a&&a(h);return h};d.prototype.load=function(c,b){function a(a){this.strList=a;this._isLoading=!1;if(0<this._pendingStrings.length){for(a=0;a<this._pendingStrings.length;a++)this.translate(this._pendingStrings[a][0],this._pendingStrings[a][1],this._pendingStrings[a][2]);this._pendingStrings.length=0}b&&b()}this._isLoading=!0;var h=this;c instanceof String||"string"==typeof c?(new f({url:c,caller:this,cache:!1,track:!0,type:"json",callback:function(g){a.call(h,g)}})).send():a.call(h,c)};return new d});
(function(){function f(d,c){for(var b=0;b<d.length;b++)if(d[b].name==c)return b;return-1}define("Arstider/DisplayObject",["Arstider/Entity","Arstider/Bitmap","Arstider/Renderer","Arstider/Buffer"],function(d,c,b,a){function h(a){Arstider.Super(this,d,a);a=a||Arstider.emptyObject;this.children=[];this._requestedAsset=null;void 0!==a.bitmap?this.loadBitmap(a.bitmap):void 0!==a.data&&this.loadBitmap(a.data)}Arstider.Inherit(h,d);h.prototype.addChild=function(a){if(a)return null!=a.parent&&1<Arstider.verbose&&
console.error("Arstider.DisplayObject.addChild: object already has a parent"),a.parent=this,this.children[this.children.length]=a,a.cancelBubble&&a.cancelBubble()._update(),this;Arstider.log("Arstider.DisplayObject.addChild: no object given")};h.prototype.removeChildByName=function(a){var h=f(this.children,a);-1!=h?(this.children[h].removeChildren&&0!=this.children[h].children.length&&this.children[h].removeChildren(!0),this.children[h].killBuffer&&this.children[h].killBuffer(),this.children[h].parent=
null,this.children.splice(h,1)):1<Arstider.verbose&&console.warn("Arstider.DisplayObject.removeChildByName: could not find children "+a);return this};h.prototype.removeChild=function(a,h){var b=this.children.indexOf(a);-1!=b?(this.children[b].removeChildren&&0!=this.children[b].children.length&&this.children[b].removeChildren(!0),this.children[b].killBuffer&&this.children[b].killBuffer(),this.children[b].parent=null,this.children.splice(b,1)):1<Arstider.verbose&&console.warn("Arstider.DisplayObject.removeChild: could not find child");
return this};h.prototype.getChild=function(a){var h=f(this.children,a);if(-1!=h)return this.children[h];1<Arstider.verbose&&console.warn("Arstider.DisplayObject.getChild: could not find child ",a);return null};h.prototype.getChildren=function(){0===this.children.length&&2<Arstider.verbose&&console.warn("Arstider.DisplayObject.getChildren: object has no children");return this.children};h.prototype.removeChildren=function(){0===this.children.length&&2<Arstider.verbose&&console.warn("Arstider.DisplayObject.removeChildren: object has no children");
for(var a=0;a<this.children.length;a++)this.children[a]&&(this.children[a].children&&this.children[a].removeChildren&&0!=this.children[a].children.length&&this.children[a].removeChildren(!0),this.children[a].killBuffer&&this.children[a].killBuffer(),this.children[a].parent=null,delete this.children[a]);this.children.length=0;return this};h.prototype.detachChild=function(a){var h=this.children.indexOf(a);-1!=h?(this.children[h].parent=null,this.children.splice(h,1)):(h=f(this.children,a),-1!=h?(this.children[h].parent=
null,this.children.splice(h,1)):1<Arstider.verbose&&console.warn("Arstider.DisplayObject.detachChild: could not find child ",a));return this};h.prototype.loadBitmap=function(a,h){var b=this;if(null==this._requestedAsset||this._requestedAsset!==a)this._requestedAsset=a,"string"===typeof a||a instanceof String?new c({url:a,callback:function(a){a&&(b.data=a,0==b.dataWidth&&(b.dataWidth=a.width),0==b.dataHeight&&(b.dataHeight=a.height),0==b.width&&(b.width=a.width),0==b.height&&(b.height=a.height));if(h)h(a);
else if(b.onload)b.onload()}}):this.data=a};h.prototype.loadOptional=function(a,h){var b=new Image;b.onload=this.loadBitmap.bind(this,a,h);b.src=a};h.prototype.flatten=function(g){this.data||(this.data=new a({width:this.width,height:this.height,name:Arstider.tempBufferLabel+this.name+"_flattened"}));this.data.context||(this.data=Arstider.saveToBuffer(Arstider.tempBufferLabel+this.name+"_flattened",this.data,this.width,this.height));var h=this;savedX=this.x;savedY=this.y;this.y=this.x=0;b.draw(this.data.context,
this,null,null,!1,function(){h.removeChildren.call(h);h.x=savedX;h.y=savedY;g&&g.call(h)})};h.prototype.loadSection=function(a,h,b,c,d,f){this.width=this.dataWidth=c;this.height=this.dataHeight=d;this.loadBitmap(a,f);this.largeData=!0;this.xOffset=h;this.yOffset=b};return h})})();
(function(){var f=null,d=[1/2.75,2/2.75,2.5/2.75],c=[1.5/2.75,2.25/2.75,2.625/2.75],b=[0.75,0.9375,0.984375];define("Arstider/Easings",[],function(){return null!=f?f:f=new function(){this.LINEAR=function(a){return a};this.QUAD_IN=function(a){return a*a};this.QUAD_OUT=function(a){return a*(2-a)};this.QUAD_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)};this.CUBIC_IN=function(a){return a*a*a};this.CUBIC_OUT=function(a){return--a*a*a+1};this.CUBIC_IN_OUT=function(a){return 1>(a*=2)?0.5*
a*a*a:0.5*((a-=2)*a*a+2)};this.QUART_IN=function(a){return a*a*a*a};this.QUART_OUT=function(a){return 1- --a*a*a*a};this.QUART_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)};this.QUINT_IN=function(a){return a*a*a*a*a};this.QUINT_OUT=function(a){return--a*a*a*a*a+1};this.QUINT_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)};this.SIN_IN=function(a){return 1-Math.cos(a*Math.PI/2)};this.SIN_OUT=function(a){return Math.sin(a*Math.PI/2)};this.SIN_IN_OUT=function(a){return 0.5*
(1-Math.cos(Math.PI*a))};this.EXP_IN=function(a){return 0===a?0:Math.pow(1024,a-1)};this.EXP_OUT=function(a){return 1===a?1:1-Math.pow(2,-10*a)};this.EXP_IN_OUT=function(a){return 0===a?0:1===a?1:1>(a*=2)?0.5*Math.pow(1024,a-1):0.5*(-Math.pow(2,-10*(a-1))+2)};this.CIRC_IN=function(a){return 1-Math.sqrt(1-a*a)};this.CIRC_OUT=function(a){return Math.sqrt(1- --a*a)};this.CIRC_IN_OUT=function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)};this.ELASTIC_IN=function(a){var h,
g=0.1;if(0===a)return 0;if(1===a)return 1;!g||1>g?(g=1,h=0.1):h=0.4*Math.asin(1/g)/(2*Math.PI);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a-h)*Math.PI/0.4))};this.ELASTIC_OUT=function(a){var h,g=0.1;if(0===a)return 0;if(1===a)return 1;!g||1>g?(g=1,h=0.1):h=0.4*Math.asin(1/g)/(2*Math.PI);return g*Math.pow(2,-10*a)*Math.sin(2*(a-h)*Math.PI/0.4)+1};this.ELASTIC_IN_OUT=function(a){var h,g=0.1;if(0===a)return 0;if(1===a)return 1;!g||1>g?(g=1,h=0.1):h=0.4*Math.asin(1/g)/(2*Math.PI);return 1>(a*=2)?-0.5*
g*Math.pow(2,10*(a-=1))*Math.sin(2*(a-h)*Math.PI/0.4):g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-h)*Math.PI/0.4)*0.5+1};this.BACK_IN=this.BACKSWING=function(a){return a*a*(2.70158*a-1.70158)};this.BACK_OUT=function(a){return--a*a*(2.70158*a+1.70158)+1};this.BACK_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a*(3.5949095*a-2.5949095):0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)};this.BOUNCE_IN=function(a){return 1-this.BOUNCE_OUT(1-a)};this.BOUNCE_OUT=function(a){return a<d[0]?7.5625*a*a:a<d[1]?7.5625*(a-=c[0])*
a+b[0]:a<d[2]?7.5625*(a-=c[1])*a+b[1]:7.5625*(a-=c[2])*a+b[2]};this.BOUNCE_IN_OUT=function(a){return 0.5>a?0.5*this.BOUNCE_IN(2*a):0.5*this.BOUNCE_OUT(2*a-1)+0.5}}})})();
define("Arstider/Engine","Arstider/Browser Arstider/Screen Arstider/Buffer Arstider/Events Arstider/Background Arstider/Watermark Arstider/Preloader Arstider/GlobalTimers Arstider/core/Performance Arstider/Mouse Arstider/Viewport Arstider/Renderer Arstider/Telemetry Arstider/Sound Arstider/Signal Arstider/Hash".split(" "),function(f,d,c,b,a,h,g,m,p,k,l,r,u,y,w,x){function v(){this.version="1.7.1";this.release="min";this.debug=!1;this.timestamp="01/24/2015 02:57 AM";this.allowSkip=!0;this.context=
this.canvas=null;this.renderer=r;this.currentScreen=this.profiler=this.frameRequest=null;this.handbreak=!0;this._deltaTimeReset=this._emergencySoundMute=this._isSynchronous=this.isPreloading=this.pausedByRequest=!1;this.onerror=new w;this.onskip=new w}var q;v.prototype.start=function(a,g,h,d,m){window.console&&this.debug||(Arstider.verbose=0,Arstider.disableConsole());this.debug&&requirejs(["Arstider/core/Debugger"],function(a){q.profiler=new a(q);q.profiler.init()});this.canvas=new c({name:"Arstider_main",
id:"Arstider_main_canvas",webgl:!1});this.context=this.canvas.context;Arstider.setFPS(Arstider.FPS);this._isSynchronous=h||!1;p.updateLogic=this._isSynchronous?null:this.stepLogic;window.addEventListener("error",this._handleError);l.init(a,this.canvas.data);k.init(l.container);k._touchRelay=this.applyTouch;b.bind("Engine.gotoScreen",this.loadScreen);b.bind("Engine.showPopup",this.showPopup);b.bind("Engine.hidePopup",this.hidePopup);b.bind("Viewport.pagehide",function(){this._deltaTimeReset=!0;q.stop();
q._emergencySoundMute||(q._emergencySoundMute=!0,y.pause("__emergency-stop__"))});b.bind("Viewport.pageshow",function(){this._deltaTimeReset=!0;q.play();q._emergencySoundMute&&(q._emergencySoundMute=!1,y.resume("__emergency-stop__"))});this.pausedByRequest||this.play();a=Arstider.clone(f,!1,"browser_");window.screen?(a._screenWidth=window.screen.width,a._screenHeight=window.screen.height):(a._screenWidth=window.innerWidth,a._screenHeight=window.innerHeight);a._viewportWidth=window.innerWidth;a._viewportHeight=
window.innerHeight;a._pixelRatio=l.canvasRatio;a._vibration=l.vibrationEnabled;a._accelerometer=l.accelerometerEnabled;u.log("system","gamestart",a)};v.prototype.setPreloaderScreen=function(a){g.setScreen(new d(a));g._screen.stage=q};v.prototype.stepLogic=function(a){p.numUpdates=0;Arstider.skipUpdate||null===q||q.handbreak||(q._deltaTimeReset?q._deltaTimeReset=!1:0>=a||(p.numTimers=m.count(),m.step(a),q.currentScreen&&q.currentScreen._update&&(q.currentScreen._update(a),p.numUpdates++)))};v.prototype._handleError=
function(a){q.onerror.dispatch(a);u.log("error","error",a)};v.prototype.startScreen=function(){b.unbind("Preloader.loadingCompleted",q.startScreen);q.currentScreen?(q.currentScreen.onload&&!1===q.currentScreen.__loaded&&(q.currentScreen.__loaded=!0,q.currentScreen.onload()),q.canvas&&q.canvas.data&&q.canvas.data.focus(),q.isPreloading=!1,l.unsupportedOrientation||q.play(),u.log("system","screenstart",{screen:q.currentScreen.name})):0<Arstider.verbose&&console.warn("Arstider.Engine.startScreen: no current screen")};
v.prototype.loadScreen=function(a,h){var c;"string"==typeof a?(c=a,a={}):c=a.name;q.killScreen(q.currentScreen&&q.currentScreen.__savedState);if(void 0!=Arstider.savedStates[c]){q.currentScreen=Arstider.savedStates[c];q.releaseData(q.currentScreen);for(var f=0;f<Arstider.savedStates[c].__tweens.length;f++)Arstider.savedStates[c].__tweens[f].running=Arstider.savedStates[c].__tweens[f].__running,Arstider.savedStates[c].__tweens[f].running&&Arstider.savedStates[c].__tweens[f].resume&&Arstider.savedStates[c].__tweens[f].resume();
m.list=m.list.concat(Arstider.savedStates[c].__tweens);delete q.currentScreen.__tweens;q.currentScreen.__savedState=!1;if(q.currentScreen.onresume)q.currentScreen.onresume();delete Arstider.savedStates[c]}else b.unbind("Preloader.loadingCompleted",q.onScreenLoaded),b.bind("Preloader.loadingCompleted",q.onScreenLoaded),a.noPreloader||(f=a.preloader?a.preloader:{},g.interactive=Arstider.checkIn(f.interactive,!1),g.animated=Arstider.checkIn(f.animated,!1),q.stop(),q.isPreloading=!0,g.set(c),g.progress("__screen__",
0)),requirejs([c],function(m){l.unsupportedOrientation?b.bind("Viewport.rotate",function z(){b.unbind("Viewport.rotate",z);q.currentScreen=new d(m,q,h);q.currentScreen.name=c;setTimeout(function(){g.progress("__screen__",100)},100)}):(q.currentScreen=new d(m,q,h),q.currentScreen.stage=q,q.currentScreen.name=c,a.noPreloader?setTimeout(q.startScreen,10):setTimeout(function(){g.progress("__screen__",100)},100))})};v.prototype.onScreenLoaded=function(){g.interactive?b.bind("Preloader.userCompleted",function(){q.startScreen();
b.unbind("Preloader.userCompleted",q.startScreen)}):q.startScreen()};v.prototype.protectData=function(a){var g=Arstider.getNode(a);g.data&&g.data.toDataURL&&(g._protected=!0);if(a.children&&0<a.children.length)for(g=0;g<a.children.length;g++)q.protectData(a.children[g])};v.prototype.releaseData=function(a){var g=Arstider.getNode(a);g.data&&g.data.toDataURL&&(g._protected=!1);if(a.children&&0<a.children.length)for(g=0;g<a.children.length;g++)q.releaseData(a.children[g])};v.prototype.killScreen=function(b){if(null!=
q.currentScreen){u.log("system","screenstop",{screen:q.currentScreen.name});b||q.currentScreen._unload();q.protectData(g._screen);q.protectData(a);q.protectData(h);for(var c in Arstider.bufferPool)-1==c.indexOf(Arstider.tempBufferLabel)&&-1==c.indexOf("Arstider_Gradient")&&-1==c.indexOf("Arstider_TextField")||!Arstider.bufferPool[c].data||Arstider.bufferPool[c]._protected||Arstider.bufferPool[c].kill();m.removeTweens();delete q.currentScreen;l.tagParentNode&&(l.tagParentNode.innerHTML="")}else 1<
Arstider.verbose&&console.warn("Arstider.Engine.killScreen: no current screen")};v.prototype.play=function(){q.handbreak&&!l.unsupportedOrientation&&(2<Arstider.verbose&&console.warn("Arstider.Engine.play: playing..."),q.isPreloading||(q.handbreak=!1),(q.frameRequest||Arstider.__animTimer)&&Arstider.cancelAnimFrame.call(window,q.frameRequest),q.draw(),b.broadcast("Engine.play",q))};v.prototype.stop=function(){2<Arstider.verbose&&console.warn("Arstider.Engine.stop: stopping...");k.reset();q.handbreak=
!0;b.broadcast("Engine.stop",q)};v.prototype.applyTouch=function(a,h){h||(Arstider.__cancelBubble={},h=q.handbreak?g._screen:q.currentScreen);if(h&&h.touchAccuracy&&0!=h.touchAccuracy&&!(0>h.global.x+h.global.width||h.global.x>l.maxWidth||0>h.global.y+h.global.height||h.global.y>l.maxHeight)){var b,c,d=1;f.isMobile&&(d=Arstider.min(k.count(!0),5));if(h&&h.children&&0<h.children.length)for(b=h.children.length-1;0<=b;b--)if(h&&h.children&&h.children[b]&&!h.children[b].__skip){for(c=0;c<d;c++)if(!0!==
Arstider.__cancelBubble[c]&&h.children[b].isTouched&&h.children[b].isTouched(k.x(c),k.y(c))){k.isPressed(c)?(h.children[b]._pressed||h.children[b]._onpress(a),f.isMobile&&(h.children[b]._preclick=!0)):h.children[b]._pressed&&h.children[b]._onrelease(a);h&&h.children&&h.children[b]&&!h.children[b].__skip&&(k.rightPressed?h.children[b]._rightPressed=!0:h.children[b]._rightPressed&&h.children[b]._onrightclick(a));break}h&&h.children&&h.children[b]&&!h.children[b].__skip&&h.children[b].children&&0<h.children[b].children.length&&
0!=h.children[b].children.touchAccuracy&&q.applyTouch(a,h.children[b])}}};v.prototype.applyRelease=function(a,g){var h=0==g.length?-1:g[0].x,b=0==g.length?-1:g[0].y,c,d=null;if(a&&a.touchAccuracy&&0!=a.touchAccuracy&&!(0>a.global.x+a.global.width||a.global.x>l.maxWidth||0>a.global.y+a.global.height||a.global.y>l.maxHeight)){if(f.isMobile){for(c=0;c<g.length;c++)if(!0!==Arstider.__cancelBubble[c]&&a.isTouched&&a.isTouched(g[c].x,g[c].y)&&g[c].pressed){d=c;h=g[c].x;b=g[c].y;break}null==d&&(a._pressed||
a._preclick)&&(a._onleave(),a._pressed=!1,a._preclick=!1)}else!0!==Arstider.__cancelBubble[0]&&a.isTouched&&(a.isTouched(h,b)?(a._hovered||a._onhover(),k.isPressed()||(a._preclick=!0)):(a._hovered&&a._onleave(),a._pressed=!1));-1!=h&&-1!=b&&a._dragged&&(a.x=h-a._dragOffsetX,a.y=b-a._dragOffsetY,a._boundDrag&&(0>a.x&&(a.x=0),0>a.y&&(a.y=0),a.x>a.parent.width&&(a.x=a.parent.width),a.y>a.parent.height&&(a.y=a.parent.height)));Arstider.__cancelBubble={}}};v.prototype.removePending=function(a){if(a&&a.children&&
0<a.children.length)for(i=a.children.length-1;0<=i;i--)a&&a.children&&a.children[i]&&a.children[i].__skip?a.children.splice(i,1):a&&a.children&&a.children[i]&&a.children[i].children&&0<a.children[i].children.length&&q.removePending(a.children[i])};v.prototype.draw=function(){var a=!1;if(!l.unsupportedOrientation)if(q._isSynchronous&&(p.deltaTime=Arstider.timestamp()-p.lastFrame,q.stepLogic(p.deltaTime)),!q.debug&&0<Arstider.verbose&&(Arstider.verbose=0),p.startStep(q.allowSkip),q.frameRequest=Arstider.requestAnimFrame.call(window,
q.draw,p.deltaTime),"sharp"==Arstider.defaultRenderStyle&&q.canvas.updateRenderStyle(Arstider.defaultRenderStyle),q.handbreak){if(g.interactive||g.animated||0<g._queue.length)q.drawPreloader(a),p.endStep()}else 0===p.getStatus()?(p.endStep(),2<Arstider.verbose&&console.warn("Arstider.Engine.draw: skipping draw step")):(q.profiler&&(a=q.profiler.showFrames),q.drawBackground(a),q.drawScreen(a),p.frames++,k.cleanTouches(),a&&q.profiler.drawFrames(),p.endStep())};v.prototype.drawPreloader=function(a){this.renderer.clear(q.context,
0,0,l.maxWidth,l.maxHeight);this.renderer.draw(q.context,g._screen,function(a){q.applyRelease(a,f.isMobile?k._ongoingTouches:[{x:k.x(),y:k.y(),pressed:k.pressed}])},null,a);l.tagParentNode&&(l.tagParentNode.style.display="none");k.cleanTouches()};v.prototype.drawBackground=function(g){null==a.data&&0==a.children.length||this.renderer.draw(q.context,a,null,null,g)};v.prototype.drawOverlay=function(a){null==h.data&&0==h.children.length||this.renderer.draw(q.context,h,null,null,a)};v.prototype.drawScreen=
function(a){this.renderer.draw(q.context,q.currentScreen,function(a){q.applyRelease(a,f.isMobile?k._ongoingTouches:[{x:k.x(),y:k.y(),pressed:k.pressed}])},null,a)};Arstider.printScreen=function(a){return q.canvas.getURL(a)};return q=new v});
define("Arstider/Entity",[],function(){function f(d){d=d||Arstider.emptyObject;this.name=d.name||"entity"+ ++f.anonymousEntities;this.alpha=Arstider.checkIn(d.alpha,1);this.x=Arstider.checkIn(d.x,0);this.y=Arstider.checkIn(d.y,0);this.width=Arstider.checkIn(d.width,0);this.height=Arstider.checkIn(d.height,0);this.scaleX=Arstider.checkIn(d.scaleX,1);this.scaleY=Arstider.checkIn(d.scaleY,1);this.skewX=Arstider.checkIn(d.skewX,0);this.skewY=Arstider.checkIn(d.skewY,0);this.rotation=Arstider.checkIn(d.rotation,
0);this.rpX=Arstider.checkIn(d.rpX,0);this.rpY=Arstider.checkIn(d.rpY,0);this.onStage=!1;this.global={alpha:1,x:0,y:0,rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,width:0,height:0};this.data=null;this.mask=!1;this.shadowColor=Arstider.checkIn(d.shadowColor,Arstider.defaultColor);this.shadowBlur=Arstider.checkIn(d.shadowBlur,0);this.shadowOffsetX=Arstider.checkIn(d.shadowOffsetX,0);this.shadowOffsetY=Arstider.checkIn(d.shadowOffsetY,0);this.compositeMode=Arstider.checkIn(d.compositeMode,Arstider.defaultComposition);
this.xOffset=Arstider.checkIn(d.xOffset,0);this.yOffset=Arstider.checkIn(d.yOffset,0);this.dataWidth=Arstider.checkIn(d.dataWidth,0);this.dataHeight=Arstider.checkIn(d.dataHeight,0);this.largeData=Arstider.checkIn(d.largeData,!1);this.parent=null;this.onpress=Arstider.checkIn(d.onpress,null);this.onrelease=Arstider.checkIn(d.onrelease,null);this.onhover=Arstider.checkIn(d.onhover,null);this.onleave=Arstider.checkIn(d.onleave,null);this.onclick=Arstider.checkIn(d.onclick,null);this.onrightclick=Arstider.checkIn(d.onrightclick,
null);this.ondoubleclick=Arstider.checkIn(d.ondoubleclick,null);this.onload=Arstider.checkIn(d.onload,null);this.showOutline=Arstider.checkIn(d.showOutline,!1);this._rightPressed=this._preclick=this._pressed=this._hovered=!1;this._doubleClickCheck=0;this._doubleClickDelay=250;this._dockX=Arstider.checkIn(d.dockX,null);this._dockY=Arstider.checkIn(d.dockY,null);this._fillX=Arstider.checkIn(d.fillX,null);this._fillY=Arstider.checkIn(d.fillX,null);this._skipUpdateBubble=!1;this._skipUpdate=0;this._boundDrag=
this._dragged=!1;this._dragOffsetY=this._dragOffsetX=0;this.onunload=Arstider.checkIn(d.onunload,null);this.touchAccuracy=Arstider.checkIn(d.touchAccuracy,f.ACTIVE);d.update&&(this.update=d.update)}f.anonymousEntities=0;f.PASSIVE=0;f.ACTIVE=1;f.COMPLEX=2;f.prototype.update=null;f.prototype._onhover=function(d){this._hovered=!0;if(this.onhover)this.onhover(d)};f.prototype._onleave=function(d){this._rightPressed=this._preclick=this._hovered=!1;if(this.onleave)this.onleave(d)};f.prototype._onpress=function(d){this._pressed=
!0;if(this.onpress)this.onpress(d)};f.prototype._onrelease=function(d){this._pressed=!1;var c=Arstider.timestamp();if(this._preclick){if(c-this._doubleClickCheck<this._doubleClickDelay&&this.ondoubleclick)this.ondoubleclick(d);else if(this.onclick)this.onclick(d);this._doubleClickCheck=c}if(this.onrelease)this.onrelease(d);this._preclick=!1};f.prototype._onrightclick=function(d){this._rightPressed=!1;if(this.onrightclick)this.onrightclick(d)};f.prototype._update=function(d){var c,b,a;null!=this.parent&&
0<this.global.alpha&&(null!=this._fillX&&(this.width=this.parent.width*parseFloat(this._fillX)),null!=this._fillY&&(this.height=this.parent.height*parseFloat(this._fillY)),null!=this._dockX&&(this.x=Math.round(this.parent.width*parseFloat(this._dockX)-this.width*parseFloat(this._dockX))),null!=this._dockY&&(this.y=Math.round(this.parent.height*parseFloat(this._dockY)-this.height*parseFloat(this._dockY))));!this._skipUpdateBubble&&this.update&&this.update(d);if(this.children&&!this._skipUpdateBubble&&
(a=this.children.length,0<a))for(c=0;c<a;c++)(b=this.children[c])&&b._update&&(this._skipUpdateBubble&&b.cancelBubble&&(b._skipUpdateBubble=!0),0>=b._skipUpdate?b._update(d):b._skipUpdate--);this._skipUpdateBubble&&(this._skipUpdateBubble=!1)};f.prototype.startDrag=function(d,c){var b=this;null==this.parent&&0<Arstider.verbose&&console.warn("Arstider.Entity.startDrag: cannot drag an element with no parent");requirejs(["Arstider/Mouse"],function(a){var h=a.x();a=a.y();b._dragged=!0;d||-1==h||-1==a?
(b._dragOffsetX=0.5*b.width,b._dragOffsetY=0.5*b.height):(b._dragOffsetX=h-b.global.x,b._dragOffsetY=a-b.global.y);b._boundDrag=c||!1});return this};f.prototype.stopDrag=function(){var d=this;setTimeout(function(){d._dragged=!1;d._dragOffsetX=0;d._dragOffsetY=0;d._boundDrag=!1},0);return this};f.prototype.updateGlobalProperties=function(){this.global&&(this.global.x=this.x,this.global.y=this.y,this.global.scaleX=this.scaleX,this.global.scaleY=this.scaleY,this.global.skewX=this.skewX,this.global.skewY=
this.skewY,this.global.width=this.width,this.global.height=this.height,this.global.rotation=this.rotation,this.global.alpha=this.alpha,this.parent&&(this.global.x+=this.parent.global.x,this.global.y+=this.parent.global.y,this.global.scaleX*=this.parent.global.scaleX,this.global.scaleY*=this.parent.global.scaleY,this.global.skewX*=this.parent.global.skewX,this.global.skewY*=this.parent.global.skewY,this.global.width*=0>this.global.scaleX?-1*this.global.scaleX:this.global.scaleX,this.global.height*=
0>this.global.scaleY?-1*this.global.scaleY:this.global.scaleY,this.global.rotation+=this.parent.global.rotation,this.global.alpha*=this.parent.global.alpha))};f.prototype.dock=function(d,c){this._dockX="left"===d?0:"center"===d?0.5:"right"===d?1:d||null;this._dockY="top"===c?0:"center"===c?0.5:"bottom"===c?1:c||null;this.cancelBubble()._update();return this};f.prototype.fill=function(d,c){this._fillX="full"===d?1:"half"===d?0.5:d||null;this._fillY="full"===c?1:"half"===c?0.5:c||null;this.cancelBubble()._update();
return this};f.prototype.isTouched=function(d,c){if(this.touchAccuracy==f.PASSIVE)return!1;if(this.touchAccuracy==f.ACTIVE||!this.global.points)return d>this.global.x&&d<this.global.x+this.width*this.global.scaleX&&c>this.global.y&&c<this.global.y+this.height*this.global.scaleY?!0:!1;var b=Arstider.distance(this.global.points[0],this.global.points[1],d,c),a=Arstider.distance(this.global.points[2],this.global.points[3],d,c),h=Arstider.distance(this.global.points[4],this.global.points[5],d,c),g=Arstider.distance(this.global.points[6],
this.global.points[7],d,c),m=0.5*(b+a+this.global.width),m=Math.sqrt(m*(m-b)*(m-a)*(m-this.global.width))||0;quad2=0.5*(a+g+this.global.height);quad2=Math.sqrt(quad2*(quad2-a)*(quad2-g)*(quad2-this.global.height))||0;quad3=0.5*(h+g+this.global.width);quad3=Math.sqrt(quad3*(quad3-h)*(quad3-g)*(quad3-this.global.width))||0;quad4=0.5*(b+h+this.global.height);quad4=Math.sqrt(quad4*(quad4-b)*(quad4-h)*(quad4-this.global.height))||0;sum=m+quad2+quad3+quad4;total=this.global.width*this.global.height;return sum>=
total-100&&sum<=total+100?!0:!1};f.prototype.collides=function(d,c,b,a){return this.x<d+b&&this.x+this.width>d&&this.y<c+a&&this.y+this.height>c};f.prototype.setIndex=function(d){if(this.parent){var c=this.parent.children.indexOf(this);-1<c&&1<this.parent.children.length?(d>this.parent.children.length-1&&(d=this.parent.children.length-1),this.parent.children.splice(d,0,this.parent.children.splice(c,1)[0])):1<Arstider.verbose&&console.warn("Arstider.Entity.setIndex: no re-order occured")}else 0<Arstider.verbose&&
console.warn("Arstider.Entity.setIndex: element has no parent");return this};f.prototype.getIndex=function(d){if(this.parent)return this.parent.children.indexOf(this);0<Arstider.verbose&&console.warn("Arstider.Entity.getIndex: element has no parent");return-1};f.prototype.cancelBubble=function(){this._skipUpdateBubble=!0;return this};f.prototype.cancelUpdate=function(d){this._skipUpdate=d||1;return this};f.prototype.killBuffer=function(d){this.data&&this.data.kill&&this.data.kill();this.data=null;
if(this.onunload)this.onunload();this._requestedAsset=null;return this};f.prototype.id=function(){return this.parent&&""!=this.parent.id()?this.parent.id()+"."+this.name:this.name||""};return f});
(function(){function f(a,h,b){for(var c=h.length,d=0;d<c;d++)if(b){if(h[d][b]==a)return d}else if(h[d]==a)return d;return-1}function d(a,b){var c,d=0;for(c=a.length-1;0<=c;c--)-1===f(c,h,b)&&(a.splice(c,1),d++);return d}var c=null,b=[0],a=[],h=[];define("Arstider/Events",[],function(){function g(){}if(null!=c)return c;g.prototype.bind=function(g,c,d){d=d||0;var l=f(c,a),r=f(d,b);-1===l&&(l=a.length,a[l]=c);-1===r&&(r=b.length,b[r]=d);h[h.length]=[r,g,l]};g.prototype.unbind=function(g,c,d){d=d||0;
c=c||-1;var f;for(f=h.length-1;0<=f;f--)h[f][1]!=g||a[h[f][2]]!=c&&-1!==c||b[h[f][0]]!=d&&0!==d||h.splice(f,1)};g.prototype.broadcast=function(g,d,f){f=f||0;var l;for(l=h.length-1;0<=l;l--)if(h[l]&&h[l][1]==g)if(a[h[l][2]]instanceof Function||"function"===typeof a[h[l][2]])if(!b[h[l][0]]||0!==f&&f!=b[h[l][0]])a[h[l][2]](d);else a[h[l][2]].apply(b[h[l][0]],[d]);else 1<Arstider.verbose&&console.warn("Arstider.Events.broadcast: discrepancy found, flushing events"),c.flush()};g.prototype.flush=function(){d(a,
2);d(b,0);h.sort(function(a,g){return a[1]>g[1]?1:g[1]>a[1]?-1:0})};return c=new g})})();
define("Arstider/Filters",["Arstider/Buffer","Arstider/Browser"],function(f,d){return{invertColors:function(c,b,a,h,g){b=c.context.getImageData(Arstider.checkIn(b,0),Arstider.checkIn(a,0),Arstider.checkIn(h,c.width),Arstider.checkIn(g,c.height));a=b.data;var d=Arstider.checkIn(h,c.width)*Arstider.checkIn(g,c.height)-1;for(c=new f({name:c.name+"_inverted_",width:Arstider.checkIn(h,c.width),height:Arstider.checkIn(g,c.height)});0<=d;d--)a[4*d]=255-a[4*d],a[4*d+1]=255-a[4*d+1],a[4*d+2]=255-a[4*d+2];
c.context.putImageData(b,0,0);return c},grayscale:function(c,b,a,h,g){b=c.context.getImageData(Arstider.checkIn(b,0),Arstider.checkIn(a,0),Arstider.checkIn(h,c.width),Arstider.checkIn(g,c.height));a=b.data;var d=Arstider.checkIn(h,c.width)*Arstider.checkIn(g,c.height)-1;c=new f({name:c.name+"_grayscale",width:Arstider.checkIn(h,c.width),height:Arstider.checkIn(g,c.height)});for(h=null;0<=d;d--)h=(a[4*d]+a[4*d+1]+a[4*d+2])/3,a[4*d]=h,a[4*d+1]=h,a[4*d+2]=h;c.context.putImageData(b,0,0);return c},tint:function(c,
b,a,h,g,d,p,k,l){d=c.context.getImageData(Arstider.checkIn(d,0),Arstider.checkIn(p,0),Arstider.checkIn(k,c.width),Arstider.checkIn(l,c.height));p=d.data;var r=Arstider.checkIn(k,c.width)*Arstider.checkIn(l,c.height)-1;c=new f({name:c.name+"_tint"+b+a+h,width:Arstider.checkIn(k,c.width),height:Arstider.checkIn(l,c.height)});g=Arstider.checkIn(g,1);for(r;0<=r;r--)p[4*r]=Arstider.min(b+p[4*r]*g),p[4*r+1]=Arstider.min(a+p[4*r+1]*g),p[4*r+2]=Arstider.min(h+p[4*r+2]*g);c.context.putImageData(d,0,0);return c},
blur:function(c,b,a,h,g,d,p){var k=0;b=1/b;b=new f({name:c.name+"_blurred_temp",width:Arstider.checkIn(d,c.width)*b,height:Arstider.checkIn(p,c.height)*b,renderStyle:"auto"});for(var l=new f({name:c.name+"_blur",width:Arstider.checkIn(d,c.width),height:Arstider.checkIn(p,c.height),renderStyle:"auto"});k<a;k++)0===k?b.context.drawImage(c.data,Arstider.checkIn(h,0),Arstider.checkIn(g,0),Arstider.checkIn(d,c.width),Arstider.checkIn(p,c.height),0,0,b.width,b.height):(b.context.clearRect(0,0,b.width,b.height),
b.context.drawImage(l.data,0,0,b.width,b.height),l.context.clearRect(0,0,l.width,l.height)),l.context.drawImage(b.data,0,0,l.width,l.height);return l}}});
(function(){var f=null;define("Arstider/Fonts",["Arstider/Request","Arstider/texts/Font"],function(d,c){function b(){this.collection={};this.numFileToLoad=0;this.loadCallback=null}if(null!=f)return f;b.prototype.get=function(a){if(this.collection[a])return this.collection[a];this.collection[a]=new c({temp:!0,name:a});return this.collection[a]};b.prototype.create=function(a){if(void 0==a.name)return 0<Arstider.verbose&&console.warn("Arstider.Fonts.create: name not specified, font not created"),!1;
if(this.collection[a.name]&&!1==this.collection[a.name].temp)return this.collection[a.name];this.collection[a.name]&&0<this.collection[a.name].loadCallbacks.length&&(a.loadCallbacks=this.collection[a.name].loadCallbacks);this.collection[a.name]=new c(a);return this.collection[a.name]};b.prototype.load=function(a,h){this.loadCallback=h;a instanceof String||"string"==typeof a?(new d({url:a,caller:this,track:!0,type:"json",cache:!1,callback:this._parseFile})).send():this._parseFile(a)};b.prototype._parseFile=
function(a){this.numFileToLoad=Object.keys(a).length;for(var h in a)a[h].name=h,a[h].loadCallbacks=[this._singleFontLoadCallback.bind(this)],this.create(a[h])};b.prototype._singleFontLoadCallback=function(){0==--this.numFileToLoad&&this.loadCallback&&(this.loadCallback(),this.loadCallback=null)};return f=new b})})();
(function(){function f(c,b){return 0==c.buckets.length?!1:-1!=c.buckets.indexOf(b)||"*"===b}var d=null;define("Arstider/GameData",["Arstider/core/Storage","Arstider/Request"],function(c,b){function a(){this._defaultSet={};this._runtimeSet={}}if(null!=d)return d;a.prototype.load=function(a,g){a instanceof String||"string"==typeof a?(new b({url:a,caller:this,track:!0,cache:!1,type:"json",callback:function(a){null!=a?this._defaultSet=a:0<Arstider.verbose&&console.warn("Arstider.GameData.load: JSON parse error in config file");
g&&g()}})).send():this._defaultSet=a};a.prototype.setStoragePrefix=function(a){c.prefix=a;return d};a.prototype.get=function(a,g){var b=null;if(void 0!=this._runtimeSet[a])return this._runtimeSet[a].hist[this._runtimeSet[a].rev];if(g&&(b=c.get(a),null!=b&&void 0!=b))return this.set(a,b),this._runtimeSet[a].hist[this._runtimeSet[a].rev];if(void 0!=this._defaultSet[a])return this._defaultSet[a]};a.prototype.set=function(a,g,b){a in this._runtimeSet?(this._runtimeSet[a].rev!=this._runtimeSet[a].hist.length-
1&&this._runtimeSet[a].hist.splice(this._runtimeSet[a].rev+1,this._runtimeSet[a].hist.length),this._runtimeSet[a].hist.push(g),this._runtimeSet[a].rev=this._runtimeSet[a].hist.length-1):this._runtimeSet[a]={rev:0,hist:[g],buckets:[]};!0===b&&this.save(a);return d};a.prototype.save=function(a){c.set(a,this.get(a));return d};a.prototype.addToBucket=function(a,g){a in this._runtimeSet?-1==this._runtimeSet[a].buckets.indexOf(g)&&this._runtimeSet[a].buckets.push(g):1<Arstider.verbose&&console.warn("Arstider.GameData.addToBucket: ",
a," not found in game data");return d};a.prototype.removeFromBucket=function(a,g){if(a in this._runtimeSet){var b=this._runtimeSet[a].buckets.indexOf(g);-1!=b&&this._runtimeSet[a].buckets.splice(b,1)}else 1<Arstider.verbose&&console.warn("Arstider.GameData.addToBucket: ",a," not found in game data");return d};a.prototype.revert=function(a,g){g=Arstider.checkIn(g,1);if(a in this._runtimeSet){if(1<this._runtimeSet[a].hist.length&&0<this._runtimeSet[a].rev)return this._runtimeSet[a].rev-=g,0>this._runtimeSet[a].rev&&
(this._runtimeSet[a].rev=0),d;1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," cannot revert because no earlier versions")}else 1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," not found in game data");return d};a.prototype.redo=function(a,g){g=Arstider.checkIn(g,1);if(a in this._runtimeSet){if(1<this._runtimeSet[a].hist.length&&this._runtimeSet[a].rev<this._runtimeSet[a].hist.length-1)return this._runtimeSet[a].rev+=g,this._runtimeSet[a].rev>this._runtimeSet[a].hist.length-
1&&(this._runtimeSet[a].rev=this._runtimeSet[a].hist.length-1),d;1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," cannot revert because no later versions")}else 1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," not found in game data");return d};a.prototype.saveStateAs=function(a,g,b){Arstider.savedStates[a]=Arstider.deepClone(this._runtimeSet);if(g){Arstider.savedStates[a]._storage={};g=c.list();for(var f=0;f<g.length;f++)Arstider.savedStates[a]._storage[g[f]]=c.get(g[f])}b&&
this.set(a,JSON.stringify(Arstider.savedStates[a]),!0);return d};a.prototype.loadState=function(a,g){this._runtimeSet=Arstider.savedStates[a];if(g&&this._runtimeSet._storage){for(var b in this._runtimeSet._storage)c.set(b,this._runtimeSet._storage[b]);delete this._runtimeSet._storage}return d};a.prototype.saveBucket=function(a){for(var g in this._runtimeSet)f(this._runtimeSet[g],a)&&this.save(g);return d};a.prototype.revertBucket=function(a,g){for(var b in this._runtimeSet)f(this._runtimeSet[b],a)&&
this.revert(b,g);return d};a.prototype.redoBucket=function(a,g){for(var b in this._runtimeSet)f(this._runtimeSet[b],a)&&this.redo(b,g);return d};a.prototype.getBucket=function(a){var g,b={};for(g in this._runtimeSet)f(this._runtimeSet[g],a)&&(b[g]=this.get(g));return b};a.prototype.unset=function(a,g){delete this._runtimeSet[a];g&&c.remove(a);return d};a.prototype.clearBucket=function(a,g){for(var b in this._runtimeSet)f(this._runtimeSet[b],a)&&this.unset(b,g);return d};a.prototype.clearStorage=function(){c.reset();
return d};return d=new a})})();
define("Arstider/Gesture",["Arstider/Mouse"],function(f){function d(){this.reccording=!1;this.points=[];this.center=null;this.distanceY=this.distanceX=this.distance=this.speedY=this.speedX=this.speed=0;this.resembles=null;this.scale=1;this.angle=this.drawTime=0;this.startSpread=null;this._savedDistanceY=this._savedDistanceX=this._savedDelay=0;this._startDelay=null;this.maxPoints=6}d.prototype.update=function(){if(0!=this.points.length){for(var c=null,b=null,a=0,h=0,g=0,d=!1,f=0,k=0;k<this.points.length;k++){d=
!1;if(null==c||null==b)c=this.points[k].inputs[0].x,b=this.points[k].inputs[0].y;null!=this.points[k].inputs[1]&&(null==this.center&&(this.center={x:(this.points[k].inputs[0].x+this.points[k].inputs[1].x)/2,y:(this.points[k].inputs[0].y+this.points[k].inputs[1].y)/2}),null==this.startSpread&&(d=!0,this.startSpread=Math.sqrt(Math.pow(this.points[k].inputs[0].x-this.points[k].inputs[1].x,2)+Math.pow(this.points[k].inputs[0].x+this.points[k].inputs[1].y,2))));a=this.points[k].inputs[0].x<c?a+(c-this.points[k].inputs[0].x):
a+(this.points[k].inputs[0].x-c);h=this.points[k].inputs[0].y<b?h+(b-this.points[k].inputs[0].y):h+(this.points[k].inputs[0].y-b);0<k&&(g+=this.points[k].delay-this.points[k-1].delay,this.angle=180*Math.atan2(this.points[k].inputs[0].y-this.points[k-1].inputs[0].y,this.points[k].inputs[0].x-this.points[k-1].inputs[0].x)/Math.PI);c=this.points[k].inputs[0].x;b=this.points[k].inputs[0].y;null!=this.startSpread&&1<this.points[k].inputs.length&&!d&&(f=Math.sqrt(Math.pow(c-this.points[k].inputs[1].x,2)+
Math.pow(b+this.points[k].inputs[1].y,2)))}g+=this._savedDelay;a+=this._savedDistanceX;h+=this._savedDistanceY;this.drawTime=g;this.distanceX=a;this.distanceY=h;this.distance=Math.sqrt(Math.pow(a,2)+Math.pow(h,2));this.speedX=a/g;this.speedY=h/g;this.speed=this.distance/g;null!=this.startSpread&&0!=f?(this.scale=f/this.startSpread,this.resembles=1>this.scale?gestures.PINCH_IN:gestures.PINCH_OUT):this.resembles=gestures.SWIPE}};d.prototype.step=function(c){this.points.push({inputs:[c[0],c[1]||null],
delay:parseInt(Arstider.timeStamp())-this._startDelay});this.points.length>this.maxPoints&&this.points.shift();this.update()};d.prototype.startReccording=function(){this.reccording=!0;this._startDelay=parseInt(Arstider.timeStamp());-1==f._currentGestures.indexOf(this)&&f._currentGestures.push(this)};d.prototype.stopReccording=function(){this.reccording=!0;var c=f._currentGestures.indexOf(this);-1!=c&&f._currentGestures.splice(c,1)};return d});
define("Arstider/GlobalTimers",[],function(){function f(){this.list=[];this._roughStarted=!1}f.prototype.step=function(d){for(var c=this.list.length-1;0<=c;c--)this.list[c]&&this.list[c].running&&this.list[c]&&this.list[c].delay&&(this.list[c].delay-=d,this.list[c]&&this.list[c].step&&this.list[c].step.call(this.list[c],d),this.list[c]&&0>=this.list[c].delay&&!1==this.list[c].completed&&this.list[c].finish())};f.prototype.count=function(){return this.list.length};f.prototype.push=function(d){-1==
this.list.indexOf(d)&&this.list.push(d)};f.prototype.removeTweens=function(){for(var d=this.list.length-1;0<=d;d--)this.list[d]&&this.list[d].kill&&this.list[d].kill()};f.prototype.remove=function(d){d=this.list.indexOf(d);if(-1!==d)return this.list.splice(d,1);2<Arstider.verbose&&console.warn("Arstider.GlobalTimers.remove: timer not in list, nothing was removed")};f.prototype.clean=function(){this.list.length=0};f.prototype.pauseAll=function(){for(var d=this.list.length-1;0<=d;d--)this.list[d]&&
this.list[d].pause&&this.list[d].pause()};f.prototype.resumeAll=function(){for(var d=this.list.length-1;0<=d;d--)this.list[d]&&this.list[d].resume&&this.list[d].resume()};return new f});
(function(){var f=0;define("Arstider/Gradient",["Arstider/Buffer","Arstider/Browser"],function(d,c){function b(a){a=a||{};this.type=a.type||"linear";this.name=a.name||this.type+"_gradient"+f++;this.x1=Arstider.checkIn(a.x1,0);this.y1=Arstider.checkIn(a.y1,0);this.x2=Arstider.checkIn(a.x2,1);this.y2=Arstider.checkIn(a.y2,1);this.r1=Arstider.checkIn(a.r1,1);this.r2=Arstider.checkIn(a.r2,50);this.width=a.width||100;this.height=a.height||100;this.colors=a.colors||[];this.xOffset=a.x||0;this.yOffset=a.y||
0;this.pattern=null;this.grad=new d({name:"Arstider_Gradient_"+this.name,width:this.width,height:this.height});this.render()}b.prototype.render=function(){var a=0,h=this.xOffset+this.x1*this.width,g=this.xOffset+this.x2*this.width,b=this.yOffset+this.y1*this.height,c=this.yOffset+this.y2*this.height;"linear"==this.type?this.pattern=this.grad.context.createLinearGradient(h,b,g,c):"radial"==this.type?this.pattern=this.grad.context.createRadialGradient(h,b,this.r1,g,c,this.r2):0<Arstider.verbose&&console.warn('Arstider.Gradient: gradient must be of type "linear" or "radial" ');
for(a;a<this.colors.length;a++)this.pattern.addColorStop(this.colors[a].pos,this.colors[a].color);return this};b.prototype.addColor=function(a,h){this.colors.push({pos:a,color:h});this.render();return this};b.prototype.changeSize=function(a,h){this.grad.setSize(a,h);this.render();return this};b.prototype.changeOffset=function(a,h){if(a!=this.xOffset||h!=this.yOffset)this.xOffset=a,this.yOffset=h,this.render();return this};return b})})();
(function(){var f=null;define("Arstider/Hash",["Arstider/Signal"],function(d){function c(){this.anchor=this.getAnchor();this.onchange=new d}if(null!=f)return f;c.prototype.getAnchor=function(){var b=window.location.hash,b=b.substring(1,b.length);return""==b?!1:b=b.replace(".js","")};c.prototype.setAnchor=function(b){b=b.replace("#","");window.location.hash=b};c.prototype.listenHash=function(){var b=this;window.onhashchange=function(){b.anchor=b.getAnchor();b.onchange.dispatch(b.anchor)}};return f=
new c})})();
(function(){function f(a){return 16==a?"shift":18==a?"alt":13==a?"enter":27==a?"esc":32==a?"space":37==a?"left":38==a?"up":39==a?"right":40==a?"down":String.fromCharCode(a).toLowerCase()}function d(h,g){if(void 0!=a[h])for(var b=0;b<a[h].length;b++)if(g===a[h][b][0]&&a[h][b][1]&&(a[h][b][1]instanceof Function||"function"===typeof a[h][b][1]))a[h][b][1]();if(void 0!=a.any)for(b=0;b<a.any.length;b++)if(g===a.any[b][0]&&a.any[b][1]&&(a.any[b][1]instanceof Function||"function"===typeof a.any[b][1]))a.any[b][1]()}var c=
null,b={},a={};window.document.addEventListener("keydown",function(a){var g=f(a.keyCode);b[g]=1;d(g,"down");if("up"==g||"down"==g||"space"==g||"left"==g||"right"==g)return a=a||window.event,a.stopPropagation(),a.preventDefault(),!1});window.document.addEventListener("keyup",function(a){var g=f(a.keyCode);b[g]=0;d(g,"up");if("up"==g||"down"==g||"space"==g||"left"==g||"right"==g)return a=a||window.event,a.stopPropagation(),a.preventDefault(),!1});define("Arstider/Keyboard",[],function(){function h(){this.enabled=
!0}if(null!=c)return c;h.prototype.bind=function(g,h,b){this.enabled&&(void 0==a[g.toLowerCase()]&&(a[g.toLowerCase()]=[]),a[g.toLowerCase()].push([h,b]))};h.prototype.getKey=function(a){if("any"==a){for(var h in b)if(1==b[h])return 1;return 0}return b[a]};h.prototype.unbind=function(g,h,b){if(void 0==h||void 0==a[g.toLowerCase()])a[g.toLowerCase()]=[];else if(void 0==b)for(b=a[g.toLowerCase()].length;0<=b;b--)a[g.toLowerCase()][b][0]==h&&a[g.toLowerCase()].splice(b,1);else h=a[g.toLowerCase()].indexOf([h,
b]),-1!=h&&a[g.toLowerCase()].splice(h,1)};h.prototype.disablePageScroll=function(){window.onkeydown=function(a){return 32!=a.keyCode};return this};return c=new h})})();
define("Arstider/Mouse",["Arstider/Browser","Arstider/Viewport","Arstider/Events"],function(f,d,c){function b(a,h){return{id:Arstider.checkIn(a.identifier,-1),x:(a.clientX-d.xOffset)/d.canvasRatio/d.globalScale,y:(a.clientY-d.yOffset)/d.canvasRatio/d.globalScale,pressed:Arstider.checkIn(h,!0)}}function a(){this.rightPressed=this.pressed=!1;this._mouse={x:0,y:0};this._touchRelay=Arstider.emptyFunction;this._ongoingTouches=[];this._currentGestures=[]}var h;a.prototype.init=function(a){if(a){if(f.isMobile||
"ontouchmove"in window)a.addEventListener("touchmove",this._handleTouchMove),a.addEventListener("touchstart",this._handleTouchStart,!1),a.addEventListener("touchend",this._handleTouchEnd,!1),a.addEventListener("touchcancel",this._handleTouchEnd,!1),a.addEventListener("touchleave",this._handleTouchEnd,!1);!f.isMobile&&"onmousemove"in window&&(a.addEventListener("mouseup",this._handleMouseUp,!1),a.addEventListener("mousedown",this._handleMouseDown,!1),a.addEventListener("mousemove",this._handleMouseMove),
a.addEventListener("mouseleave",this._handleMouseUp,!1),a.addEventListener("mousewheel",this._mouseWheel,!1),a.addEventListener("DOMMouseScroll",this._mouseWheel,!1))}else Arstider.log("Arstider.Mouse: no Viewport tag, cannot bind mouse events")};a.prototype.reset=function(){h._ongoingTouches.length=0;h.pressed=!1;h.rightPressed=!1;h._mouse.x=0;h._mouse.y=0};a.prototype.x=function(a){a=a||0;return f.isMobile?void 0!=h._ongoingTouches[a]?parseInt(h._ongoingTouches[a].x):-1:parseInt(h._mouse.x)};a.prototype.y=
function(a){a=a||0;return f.isMobile?void 0!=h._ongoingTouches[a]?parseInt(h._ongoingTouches[a].y):-1:parseInt(h._mouse.y)};a.prototype.isPressed=function(a){a=a||0;return f.isMobile?void 0!=h._ongoingTouches[a]?h._ongoingTouches[a].pressed:!1:"right"==a?h.rightPressed:h.pressed};a.prototype.count=function(a){if(f.isMobile){if(a)return h._ongoingTouches.length;a=0;for(a;a<h._ongoingTouches.length&&h._ongoingTouches[a].pressed;a++);return a}return 1};a.prototype._handleTouchMove=function(a){e=a||window.event;
e.preventDefault();var c=-1,d=e.changedTouches,f;for(a=0;a<d.length;a++)c=h.getIndexFromId(d[a].identifier),0<=c?(f=h._ongoingTouches[c].pressed,h._ongoingTouches.splice(c,1,b(d[a],f))):Arstider.log("Arstider.Mouse.handleTouchMove: could not resolve input id "+c);h.stepGestures()};a.prototype._handleTouchStart=function(a){a=a||window.event;a.preventDefault();for(var c=a.changedTouches,d=0;d<c.length;d++)h._ongoingTouches.push(b(c[d]));h._touchRelay(a)};a.prototype.stepGestures=function(){for(i=0;i<
h._currentGestures.length;i++)h._currentGestures[i]&&h._currentGestures[i].reccording&&h._currentGestures[i].step()};a.prototype._handleTouchEnd=function(a){a=a||window.event;a.preventDefault();for(var b=-1,c=a.changedTouches,d=0;d<c.length;d++)b=h.getIndexFromId(c[d].identifier),0<=b?h._ongoingTouches[b].pressed=!1:Arstider.log("Arstider.Mouse.handleTouchEnd: could not resolve input id "+b);h._touchRelay(a)};a.prototype.setCursor=function(a){window.document.body.style.cursor=a};a.prototype.getCursor=
function(){return window.document.body.style.cursor};a.prototype._handleMouseDown=function(a){var b;a=a||window.event;a.which?b=3==a.which:a.button&&(b=2==a.button);b?h.rightPressed=!0:h.pressed=!0;h._handleMouseMove(a);h._touchRelay&&h._touchRelay(a)};a.prototype._handleMouseUp=function(a){var b;a=a||window.event;a.which?b=3==a.which:a.button&&(b=2==a.button);b?h.rightPressed=!1:h.pressed=!1;h._handleMouseMove(a);h._touchRelay&&h._touchRelay(a)};a.prototype._handleMouseMove=function(a){a=a||window.event;
a=b(a);h._mouse.x=a.x;h._mouse.y=a.y};a.prototype._mouseWheel=function(a){a=a||window.event;a=Arstider.max(-1,Arstider.min(1,a.wheelDelta||-a.detail));c.broadcast("Mouse.wheel",a)};a.prototype.cleanTouches=function(){for(i=h._ongoingTouches.length-1;0<=i;i--)h._ongoingTouches[i].pressed||h._ongoingTouches.splice(i,1)};a.prototype.getIndexFromId=function(a){for(var b=0;b<h._ongoingTouches.length;b++)if(a==h._ongoingTouches[b].id)return b;return-1};return h=new a});
define("Arstider/Preloader",["Arstider/Events"],function(f){function d(a,b){for(var g=a.length-1;0<=g;g--)if(a[g].name===b)return!1;return!0}function c(){this._queue=[];this._gracePeriodTimer=null;this._checks=0;this._screen=null;this.name="_Arstider_Preloader";this.visible=!1}var b;c.prototype.set=function(a){this.reset();f.broadcast("Preloader.showPreloader",a);this.visible=!0};c.prototype.setScreen=function(a){this._screen=a};c.prototype.progress=function(a,b,g){if(!this.visible)return!1;var c=
this._queue.length,f=this;if(0<b&&!g)if(d(this._queue,a))this.progress(a,b,!0);else for(g=c-1;0<=g;g--){if(this._queue[g].name==a){null!=this._queue[g].timer&&clearTimeout(this._queue[g].timer);this._queue[g].timer=setTimeout(function(){f.progress.apply(f,[a,b,!0])},100);break}}else{if(void 0==b||0===b)d(this._queue,a)&&this._queue.push({name:a,loaded:b,timer:null});else for(g=c-1;0<=g;g--)if(this._queue[g].name==a){this._queue[g].loaded=b;break}g=this.totalPercent();this._screen&&this._screen.update&&
this._screen.update.apply(this._screen,[g]);100<=g&&this._checkComplete(!0)}};c.prototype._checkComplete=function(a){0==b._checks&&a?(b._checks=1,b._gracePeriodTimer=setTimeout(b._checkComplete,100)):a||1!=b._checks||(100>b.totalPercent()?b._checks=0:b.hide())};c.prototype.totalPercent=function(){var a,b=this._queue.length,g=0;for(a=b-1;0<=a;a--)g+=this._queue[a].loaded;return Arstider.floor(g/b)};c.prototype.reset=function(){this._checks=this._queue.length=0};c.prototype.hide=function(){f.broadcast("Preloader.loadingCompleted");
this.visible=!1;this.reset()};return b=new c});
define("Arstider/Renderer",["Arstider/Buffer","Arstider/contexts/Canvas2d","Arstider/core/Performance","Arstider/contexts/MatrixTransform"],function(f,d,c,b){function a(){this.pencil=d;this.padding=100;this.pendingRemoval=0}a.prototype.checkOnScreen=function(a,g,b,c,d){var f=a.canvas.width;a=a.canvas.height;var r=-c,u=-d;d=g.height-d;c=g.width-c;g=b.transformPoint(r,u);u=b.transformPoint(c,u);r=b.transformPoint(r,d);b=b.transformPoint(c,d);d=0.25*(g.x+u.x+r.x+b.x);c=0.25*(g.y+u.y+r.y+b.y);if(g.x-
this.padding<f&&g.x>=-this.padding||u.x-this.padding<=f&&u.x>-this.padding||r.x-this.padding<f&&r.x>=-this.padding||b.x-this.padding<=f&&b.x>-this.padding||d-this.padding<=f&&d>-this.padding)if(g.y-this.padding<a&&g.y>=-this.padding||u.y-this.padding<=a&&u.y>-this.padding||r.y-this.padding<a&&r.y>=-this.padding||b.y-this.padding<=a&&b.y>-this.padding||c-this.padding<=a&&c>-this.padding)return!0;return!1};a.prototype.updateAlpha=function(a,b){1!=a.alpha&&(c.transforms++,this.pencil.alpha(b,a.alpha))};
a.prototype.checkTransformations=function(a,b,c,d,f){if(0!=a.rotation||1!=a.scaleX||1!=a.scaleY||c)b.save(),c?b.translate(a.x+d,a.y+f):b.translate(a.global.x+d,a.global.y+f),c=!0;return c};a.prototype.updateRotation=function(a,b){0!=a.rotation&&(c.transforms++,b.rotate(a.rotation*Arstider.degToRad))};a.prototype.updateScale=function(a,b){if(1!=a.scaleX||1!=a.scaleY)c.transforms++,b.scale(a.scaleX,a.scaleY)};a.prototype.updateSkew=function(a){};a.prototype.checkCompositeMode=function(a,b,d,f,k){a.compositeMode!=
Arstider.defaultComposition?(c.transforms++,this.pencil.setCompositionMode(b,a.compositeMode)):!0===a.mask&&(t.setTransform(),c.transforms++,this.pencil.clip(b,d?-f:a.global.x,d?-k:a.global.y,a.width,a.height))};a.prototype.updateShadow=function(a,b){a.shadowColor!=Arstider.defaultColor&&(c.transforms++,this.pencil.dropShadow(b,a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur,a.shadowColor))};a.prototype.renderChild=function(a,g,d,f,k,l,r,u,y){var w=0,x=0;if(g&&(c.elements++,g._skipUpdateBubble||g._skipUpdate||
!g.update||c.numUpdates++,!(0>=g.alpha))){l||(l=new b(this.pencil,a),l.reset());w=g.width*g.rpX;x=g.height*g.rpY;g.updateGlobalProperties();this.updateAlpha(g,a);d=this.checkTransformations(g,l,d,w,x);this.updateRotation(g,l);this.updateScale(g,l);this.checkCompositeMode(g,a,d,w,x);this.updateShadow(g,a);f&&f(g);if(g.data||g.draw){var v=g.global.x<a.canvas.width&&0<=g.global.x+g.global.width&&g.global.y<a.canvas.height&&0<=g.global.y+g.global.height;if(!d&&v||d)g.mask||l.setTransform(),g.draw?(c.draws++,
g.draw.call(g,a,d?-w:g.global.x,d?-x:g.global.y)):0<g.global.height&&0<g.global.width&&(v=g)&&v.data&&(v.data.data&&(v=v.data),c.draws++,!0===g.largeData?this.pencil.renderAt(a,v.data,d?-w:g.global.x,d?-x:g.global.y,g.width,g.height,g.xOffset,g.yOffset,g.dataWidth,g.dataHeight):this.pencil.renderAt(a,v.data,d?-w:g.global.x,d?-x:g.global.y,g.width,g.height,0,0,g.width,g.height))}(r||!0===g.showOutline)&&this.pencil.debugOutline(a,d?-w:g.global.x,d?-x:g.global.y,g.width,g.height,"magenta");k&&k(g);
if(g.children&&0<g.children.length)for(w=g.children.length,x=0;x<w;x++)g.children[x]&&!g.children[x].__skip?this.renderChild(a,g.children[x],d,f,k,l,r):this.pendingRemoval=1;g.postDraw&&g.postDraw.call(g,a);y?u&&u():(d&&l.restore(),1!=g.alpha&&this.pencil.alpha(a,1/g.alpha))}};a.prototype.clear=function(a,b,c,d,f){this.pencil.clear(a,b,c,d,f)};a.prototype.draw=function(a,b,c,d,f,l){this.pendingRemoval=0;this.renderChild(a,b,!1,c,d,null,f,l,!0)};return new a});
define("Arstider/Request",["Arstider/Browser","Arstider/Preloader"],function(f,d){function c(a){var b=h.length-1;for(b;0<=b;b--)if(a==h[b].url)return!0;return!1}function b(a,b){var c=h.length-1;for(c;0<=c;c--)a==h[c].url&&(h[c].callback&&(h[c].callback.call(h[c].caller,g[a]),b&&b.progress(h[c].id,100)),h.splice(c,1))}function a(b){this.url=b.url;a.urlArgs&&(this.url+=(-1===this.url.indexOf("?")?"?":"&")+a.urlArgs);this._compatibilityMode="ie"==f.name&&9==f.version||"safari"==f.name&&7>f.platformVersion;
this.callback=Arstider.checkIn(b.callback,null);this.progress=Arstider.checkIn(b.progress,null);this.track=Arstider.checkIn(b.track,!1);this.type=Arstider.checkIn(b.type,this._compatibilityMode?"arraybuffer":"blob");this.cache=Arstider.checkIn(b.cache,!0);this.error=Arstider.checkIn(b.error,null);this.caller=Arstider.checkIn(b.caller,this);this.timeout=Arstider.checkIn(b.timeout,12E3);this.timeoutTimer=null;this.crossDomain=Arstider.checkIn(b.crossDomain,!1);this.method=Arstider.checkIn(b.method,
"GET");this.async=Arstider.checkIn(b.async,!0);this.mimeOverride=Arstider.checkIn(b.mimeOverride,null);this.user=Arstider.checkIn(b.user,Arstider.emptyString);this.password=Arstider.checkIn(b.password,Arstider.emptyString);this.headers=Arstider.checkIn(b.headers,Arstider.emptyObj);this.postData=Arstider.checkIn(b.postData,Arstider.checkIn(b.data,null));this.id=this.url+"_"+Arstider.timestamp();this.completed=!1}a.urlArgs=null;var h=[],g={},m="Accept-Charset Accept-Encoding Access-Control-Request-Headers Access-Control-Request-Method Connection Content-Length Cookie Cookie2 Date DNT Expect Host Keep-Alive Origin Referer TE Trailer Transfer-Encoding Upgrade User-Agent Via".split(" ");
a.prototype.send=function(){function a(b){l.error&&l.error.call(l.caller,Arstider.error(URIError,{code:b,module:"Arstider/Request",message:"Error while loading "+l.url+", server returned "+b}));l.track&&d.progress(l.id,100);b&&b.preventDefault&&b.preventDefault();return!1}var k,l=this,r;this.completed=!1;null!=this.timeoutTimer&&clearTimeout(this.timeoutTimer);this.timeoutTimer=null;this.track&&d.progress(this.id,0);if(this.cache&&!("arraybuffer"==this.type&&"safari"==f.name&&7>f.platformVersion)){if(void 0!==
g[this.url]){this.callback.call(this.caller,g[this.url]);b(this.url);this.track&&d.progress(this.id,100);return}if(c(this.url)){h.push(this);return}h.push({url:this.url})}if("arraybuffer"==this.type){var u=new Image;u.onerror=function(){l.track&&d.progress(l.id,100)};u.onload=function(){var a;u.onload=null;l.url.indexOf(".jpg")||l.url.indexOf(".png")||l.url.indexOf(".gif")?setTimeout(function(){a=Arstider.saveToBuffer(l.id,u);a.getPixelAt(1,1,1,1);a=a.getURL("image/png",0);g[l.url]=a;Arstider.bufferPool[l.id]&&
Arstider.bufferPool[l.id].kill&&Arstider.bufferPool[l.id].kill();l.callback&&l.callback.call(l.caller,a);l.track&&d.progress(l.id,100);u.src=Arstider.emptyImgSrc},50):(g[l.url]=a,l.callback&&l.callback.call(l.caller,a),l.track&&d.progress(l.id,100),u.src=Arstider.emptyImgSrc);this.completed=!0;null!=l.timeoutTimer&&clearTimeout(l.timeoutTimer);l.timeoutTimer=null};u.src=this.url;this.track&&(this.timeoutTimer=setTimeout(function(){l.completed||d.progress(l.id,100)},2*this.timeout))}else{k=new XMLHttpRequest;
k.open(this.method,this.url,this.async,this.user,this.password);"safari"==f.name&&7>f.platformVersion||(this.async&&(k.responseType=this.type),"json"==this.type&&(k.responseType="text"));null!=this.mimeOverride&&k.overrideMimeType&&k.overrideMimeType(this.mimeOverride);"post"==this.method.toLowerCase()&&(this.headers===Arstider.emptyObj&&(this.headers={}),void 0==this.headers["Content-Type"]&&(this.headers["Content-Type"]="application/x-www-form-urlencoded"));for(r in this.headers)-1===m.indexOf(r)?
k.setRequestHeader(r,this.headers[r]):1<Arstider.verbose&&console.warn("Arstider.Request.send: header ",r," is not accepted and will be ignored");this.crossDomain&&k.setRequestHeader("X-Requested-With","XMLHttpRequest");k.onprogress=function(a){l.progress&&l.progress.call(l.caller,a);l.track&&d.progress(l.id,Arstider.chop(a.loaded/a.total*100))};k.onload=function(){if(200==this.status){var h;if("json"==l.type)try{h=JSON.parse(this.responseText)}catch(c){console.error(c),h={}}else h="text"==l.type?
this.responseText:this.response;l.cache&&(g[l.url]=h,b(l.url,d));l.callback&&l.callback.call(l.caller,h);l.track&&d.progress(l.id,100)}else l.track&&d.progress(l.id,100),a(this.status);l.completed=!0;null!=l.timeoutTimer&&clearTimeout(l.timeoutTimer);l.timeoutTimer=null};k.onerror=a;k.send(Arstider.serialize(this.postData));this.track&&(this.timeoutTimer=setTimeout(function(){l.completed||d.progress(l.id,100)},this.timeout));return k}};return a});
define("Arstider/Screen",["Arstider/DisplayObject","Arstider/Viewport","Arstider/Events","Arstider/Request","Arstider/GlobalTimers"],function(f,d,c,b,a){function h(a,h,c){Arstider.Super(this,f);Arstider.mixin(this,Arstider.clone(a,!0),!0,!0);this.__loaded=!1;this.stage=h;c?(new b({url:c,track:!0,type:"json",caller:this,cache:!0,callback:this._finishSetup})).send():this._finishSetup()}Arstider.Inherit(h,f);h.prototype._finishSetup=function(a){if(a)return this._instantiateElements(a);this.width=d.maxWidth;
this.height=d.maxHeight;this.scaleX=this.scaleY=d.globalScale;this.global.x=0;this.global.y=0;this.global.alpha=1;this.global.rotation=0;this.global.scaleX=this.global.scaleY=d.globalScale;this.global.width=d.maxWidth;this.global.height=d.maxHeight;this.onStage=!0;this.init?this.init():2<Arstider.verbose&&console.warn("Arstider.Screen: new screen has no init method")};h.prototype._instantiateElements=function(a){this.__elementsToSpawn=a.elements.length;this.__elements=[];this.basePath=a.path;for(var b=
0;b<a.elements.length;b++)this._spawnElement(a.elements[b],function(){this.__elementsToSpawn==this.__elements.length&&(this._resolveHierarchy(this.__elements),delete this.__elementsToSpawn,delete this.__elements,this._finishSetup())})};h.prototype._resolveHierarchy=function(a){var b=0,h=0;for(b;b<a.length;b++)if(null!=a[b].parent)for(h=0;h<a.length;h++){if(a[h].name==a[b].parent){a[h].addChild(a[b]);break}}else this.addChild(a[b])};h.prototype._spawnElement=function(a,b){var h=this;requirejs([a._type],
function(c){c=new c(a);!0===a._export&&(h[c.name]=c);h.__elements.push(c);b.apply(h)})};h.prototype._unload=function(){this.loaded=!1;this.removeChildren(!0);if(this.onunload)this.onunload()};h.prototype.saveStateAs=function(b,h){this.__savedState=!0;Arstider.savedStates[b]=this;Arstider.savedStates[b].__tweens=[];this.stage.protectData(this);for(var c=a.list.length-1;0<=c;c--)a.list[c]&&a.list[c].kill&&(a.list[c].__running=a.list[c].running,Arstider.savedStates[b].__tweens.push(Arstider.clone(a.list[c],
!0)))};return h});
define("Arstider/Sequence",[],function(){var f=function(d,c,b,a,h){this.sheet=d;this.time=1E3*b;this.frames=a||[0];this.name=c;this.loops=0;"number"===typeof h&&(this.stop=h);if(void 0==h||-1===h)this.stop=-1;if(!0===h||0===h)this.stop=0;d=Arstider.chop(1E3/Arstider.FPS);this.time<d&&(this.time=d);this.chainedAnim=null;this.callbacks=[];this.frameCallbacks=[]};f.prototype.then=function(d,c,b){var a=this;d instanceof Function||"function"===typeof d?this.callbacks.push(d):d instanceof String||"string"===
typeof d?this.callbacks.push(function(){a.currentAnim&&a.currentAnim.sheet&&a.currentAnim.sheet[d]&&(a.currentAnim=a.currentAnim.sheet[d],a.rewind())}):this.chainedAnim=new f(this.sheet,d,c,b);return this};f.prototype.callback=function(d){this.callbacks.push(d);return this};f.prototype.frameCallback=function(d){this.frameCallbacks.push(d);return this};return f});
(function(){define("Arstider/Shape",["Arstider/Entity"],function(f){function d(c){Arstider.Super(this,f,c);c=c||Arstider.emptyObject;this.shape=c.shape||"rect";this.points=c.points||[];this.fillStyle=c.fillStyle||Arstider.defaultColor;this.strokeStyle=c.strokeStyle||Arstider.defaultColor;this.lineWidth=c.lineWidth||0;this.lineCap=c.lineCap||"square";this.lineDash=c.lineDash||[];this.lineDashOffset=c.lineDashOffset||0}Arstider.Inherit(d,f);d.prototype.draw=function(c,b,a){c.save();var h;this.fillStyle.changeOffset&&
this.fillStyle.changeOffset(b,a);this.strokeStyle.changeOffset&&this.strokeStyle.changeOffset(b,a);c.fillStyle=this.fillStyle.pattern?this.fillStyle.pattern:this.fillStyle;c.strokeStyle=this.strokeStyle.pattern?this.strokeStyle.pattern:this.strokeStyle;c.lineWidth=this.lineWidth;c.lineCap=this.lineCap;c.setLineDash&&(c.setLineDash(this.lineDash),c.lineDashOffset=this.lineDashOffset);c.beginPath();switch(this.shape){case "rect":c.rect(b,a,this.width,this.height);break;case "circ":c.arc(b+0.5*this.width,
a+0.5*this.height,0.5*this.width,0,2*Math.PI,!1);break;case "custom":if(0<this.points.length)for(c.moveTo(b+this.points[0].x,a+this.points[0].y),h=1;h<this.points.length;h++)void 0!=this.points[h].cpX&&void 0!=this.points[h].cpY?c.quadraticCurveTo(b+this.points[h].cpX,a+this.points[0].cpY,b+this.points[h].x,a+this.points[0].y):c.lineTo(b+this.points[h].x,a+this.points[h].y)}c.closePath();this.fillStyle!=Arstider.defaultColor&&c.fill();this.strokeStyle!=Arstider.defaultColor&&c.stroke();c.restore()};
return d})})();
define("Arstider/Signal",[],function(){function f(){this.__bindings;this.__bindingsOnce}f.prototype.add=function(d){return this.registerListener(d)};f.prototype.addOnce=function(d){return this.registerListener(d,!0)};f.prototype.remove=function(d){var c=this.find(d);d=this.find(d,this.__bindingsOnce);0<=c&&this.__bindings.splice(c,1);0<=d&&this.__bindingsOnce.splice(d,1)};f.prototype.removeAll=function(){this.__bindingsOnce=this.__bindings=null};f.prototype.dispatch=function(){if(this.__bindings)for(var d=Array.prototype.slice.call(arguments),
c=this.__bindings.concat(),b,a=0,h=c.length;a<h;a++)b=c[a],b.apply(null,d),-1!=this.find(b,this.__bindingsOnce)&&this.remove(b)};f.prototype.getNumListeners=function(){return this.__bindings?this.__bindings.length:0};f.prototype.registerListener=function(d,c){this.__bindings||(this.__bindings=[],this.__bindingsOnce=[]);-1!=this.find(d)&&c||(this.__bindings.push(d),c&&this.__bindingsOnce.push(d))};f.prototype.find=function(d,c){if(!this.__bindings)return-1;c=c||this.__bindings;if(c.indexOf)return c.indexOf(d);
for(var b=0,a=c.length;b<a;b++)if(c[b]===d)return b;return-1};return f});
(function(){var f=null;define("Arstider/Social",["Arstider/Request"],function(d){function c(){this._token=this.currentNetwork="";this.user=this._sessionTimeout=null;this.friends=[];this._facebookSetupped=!1}c.prototype.login=function(b,a,h,g){var c=this;"facebook"==b&&(requirejs.config({shim:{facebook:{exports:"FB"}},paths:{facebook:"//connect.facebook.net/en_US/all"}}),this.currentNetwork="facebook",requirejs(["facebook"],function(){if(!c._facebookSetupped){var b=window.document.createElement("div");
b.id="fb-root";window.document.body.appendChild(b);FB.init({appId:a.appId,cookie:a.cookie,frictionlessRequests:!0});c._facebookSetupped=!0}FB.getLoginStatus(function(b){"connected"===b.status?(b.authResponse&&(c._token=b.authResponse.accessToken,clearTimeout(c._sessionTimeout),c._sessionTimeout=setTimeout(function(){c.login.apply(c,["facebook"])},1E3*b.authResponse.expiresIn)),FB.api("/me",function(a){c.user=a;FB.api("/me/friends",{access_token:c._token},function(a){c.friends=a.data;h&&h()})})):(a=
a||{},a.permissions=a.permissions||[],-1==a.permissions.indexOf("user_friends")&&a.permissions.push("user_friends"),-1==a.permissions.indexOf("user_location")&&a.permissions.push("user_location"),FB.login(function(a){a.authResponse?c.login.apply(c,["facebook",{},h,g]):g&&g(a)},{scope:a.permissions.join()}))})}))};c.prototype.getInfo=function(b,a,c,g){var d=this.getUser(b),f=0;a=a||[];for(f;f<a.length;f++)if(!(a[f]in d)){"facebook"==this.currentNetwork&&FB.api("/"+b,{access_token:this._token,fields:a.join()},
function(a){a.data?(Arstider.mixin(d,a.data,!0),c&&c(d)):g&&g(a)});return}c&&c(d)};c.prototype.getPictureUrl=function(b,a,c,g,d){var f=this.getUser(b),k="picture_"+Arstider.checkIn(a,100)+"x"+Arstider.checkIn(c,100);f[k]?g&&g(f[k]):"facebook"==this.currentNetwork&&FB.api("/"+b+"/picture?width="+Arstider.checkIn(a,100)+"&height="+Arstider.checkIn(c,100),{access_token:this._token},function(a){a.data&&a.data.url?(f[k]=a.data.url,g&&g(f[k])):d&&d(a)})};c.prototype.getUser=function(b){var a=null,c=0;if("me"==
b||b==this.user.id)a=this.user;else{for(c;c<this.friends.length;c++)if(this.friends[c].id==b){a=this.friends[c];break}null==a&&(a={id:b},this.friends.push(a))}return a};return f=new c})})();
define("Arstider/Sound",["Arstider/Browser","Arstider/Request","Arstider/Timer","Arstider/sounds/Track","Arstider/sounds/HowlerInterface"],function(f,d,c,b,a){function h(){this.tracks={};this.sounds={};this._queue=[];this._callbacks={};this.muted=!1;this.lib=null}var g;h.prototype._init=function(c){g._spriteUrl=c;var h;g.lib=a;if(c){var k=".mp3";"firefox"==f.name&&(k=".ogg");(new d({url:c+k,caller:g,cache:!1,track:!0})).send()}g.lib.init(g,c);for(h in g.tracks)g.tracks[h]=new b(g.tracks[h]),g.preload(h)};
h.prototype.load=function(a,b,c){b instanceof String||"string"==typeof b?(new d({url:b,caller:g,cache:!1,track:!0,type:"json",callback:function(b){this.sounds=b.sounds||{};this.tracks=b.tracks||{};this._init(a);c&&c()}})).send():(g.sounds=b.sounds||{},g.tracks=b.tracks||{},g._init(a),c&&c());return g};h.prototype.preload=function(a,b,c){f.isMobile||"ie"==f.name||"safari"==f.name&&7>f.version?(g.tracks[a].handle=g.lib.create(a),b&&g.play(a,c)):(new d({url:g.tracks[a].files[0],caller:g,cache:!1,track:!0,
callback:function(){this.tracks[a].handle=this.lib.create(a);b&&g.play(a,c)}})).send();return g};h.prototype.play=function(a,b){b=b||{};if(g.muted)return g;if(a in g.tracks){if(null==g.tracks[a].handle)return g.preload(a,!0,b),g;g.lib.setVolume(g.tracks[a].handle,Arstider.checkIn(b.volume,1));g.lib.playTrack(g.tracks[a].handle,a,b)}else a in g.sounds?g.lib.playSound(g.sounds.handle,a,b):1<Arstider.verbose&&console.warn("Arstider.Sound.play: sound '",a,"' does not exist");return g};h.prototype.fade=
function(a,b,c,h){if(a in g.tracks)return g.lib.fade(g.tracks[a].handle,a,"auto",b,c,h),g;g.checkInstance(a)&&g.lib.fade(g.sounds.handle,a,"auto",b,c,h);return g};h.prototype.setPosition=function(a,b){if(a in g.tracks)return g.lib.setPosition(g.tracks[a].handle,b),g;g.checkInstance(a)&&g.lib.setPosition(g.sounds.handle,b,a);return g};h.prototype._addInstance=function(a,b){g._callbacks[b]=[];g.sounds[a].instances||(g.sounds[a].instances=[]);g.sounds[a].instances.push(b)};h.prototype._removeInstance=
function(a){var b=g._callbacks[a];if(b&&b.length)for(var c=0;c<b.length;c++)b[c]();for(var h in g.sounds)if(g.sounds[h].instances&&0!=g.sounds[h].instances.length)for(c=0;c<g.sounds[h].instances.length;c++)if(g.sounds[h].instances[c]==a){g.sounds[h].instances.splice(c,1);break}g._killCallbacks(a)};h.prototype._killCallbacks=function(a){g._callbacks[a]?g._callbacks[a].length=0:1<Arstider.verbose&&console.warn("Arstider.Sound.killCallbacks: sound instance id unavailable")};h.prototype.getPlaying=function(a,
b){if(a in g.tracks)return g.tracks[a].handle;g.sounds[a].instances||(g.sounds[a].instances=[]);return void 0!=b?g.sounds[a].instances[b]:g.sounds[a].instances};h.prototype.stop=function(a){if(void 0==a)return g.stopAllTracks(),g.stopAllSounds(),g;if(a in g.tracks)return g.lib.stop(g.tracks[a].handle,a),g;g.checkInstance(a)&&g.lib.stop(g.sounds.handle,a);return g};h.prototype.stopAllTracks=function(){for(var a in g.tracks)g.lib.stop(g.tracks[a].handle,a);return g};h.prototype.mute=function(){g.stopAllSounds();
g.stopAllTracks();g.muted=!0;return g};h.prototype.unmute=function(){g.muted=!1;return g};h.prototype.stopAllSounds=function(){g.lib.stop(g.sounds.handle);return g};h.prototype.pause=function(a){if("__emergency-stop__"==a){for(var b in g.tracks)g.lib.pause(g.tracks[b].handle,b);g.lib.pause(g.sounds.handle)}else{if(a in g.tracks)return g.lib.pause(g.tracks[a].handle,a),g;g.checkInstance(a)&&g.lib.pause(g.sounds.handle,a);return g}};h.prototype.resume=function(a){if("__emergency-stop__"==a)for(var b in g.tracks)g.lib.resume(g.tracks[b].handle,
b);else{if(a in g.tracks)return g.lib.resume(g.tracks[a].handle,a),g;g.checkInstance(a)&&g.lib.resume(g.sounds.handle,a);return g}};h.prototype.checkInstance=function(a){for(var b in g.sounds)if(g.sounds[b].instances&&0!=g.sounds[b].instances.length&&-1!=g.sounds[b].instances.indexOf(a))return!0;0<Arstider.verbose&&console.warn("Arstider.Sound.checkInstance: sound instance doesn't exist");return!1};h.prototype.setVolume=function(a,b){if(a in g.tracks)return g.lib.setVolume(g.tracks[a].handle,b,a),
g;g.checkInstance(a)&&g.lib.setVolume(g.sounds.handle,b,a);return g};return g=new h});
(function(){define("Arstider/Sprite",["Arstider/DisplayObject","Arstider/GlobalTimers"],function(f,d){function c(b){b=b||{};Arstider.Super(this,f,b);this.currentAnim=Arstider.checkIn(b.currentAnim,null);this.currentFrame=-1;this.delay=512;this.stopped=this.completed=this.running=!1;d.push(this)}Arstider.Inherit(c,f);c.prototype.killBuffer=function(){this.kill();this.data&&this.data.kill&&this.data.kill();this.data=null;this.currentAnim&&this.currentAnim.sheet.url&&Arstider.bufferPool[this.currentAnim.sheet.url]&&
Arstider.bufferPool[this.currentAnim.sheet.url].kill()};c.prototype.kill=function(){this.running=!1;d.remove(this);return this};c.prototype.step=function(){null==this.currentAnim?(this.delay=512,this.running=!1):!1==this.running&&!1==this.completed&&!1==this.stopped&&(this.running=!0,this.delay=this.currentAnim.time)};c.prototype.finish=function(){var b=!1,a=0,c=null;if(null!==this.currentAnim&&null!==this.currentAnim.sheet.data){c=this.currentAnim.callbacks.length;this.currentFrame++;if(this.currentFrame>
this.currentAnim.frames.length-1)if(this.currentAnim.loops++,null!=this.currentAnim.chainedAnim)this.currentAnim=this.currentAnim.chainedAnim,this.currentFrame=0;else for(this.currentAnim.stop<this.currentAnim.loops&&-1!==this.currentAnim.stop?(this.currentFrame--,b=!0,this.stop()):this.currentFrame=0,a;a<c;a++)this.currentAnim.callbacks[a]&&this.currentAnim.callbacks[a].call(this);!1===b&&(this.running=!0,this.completed=!1,this.delay=this.currentAnim.time,this.showFrame(this.currentAnim.sheet,this.currentAnim.frames[this.currentFrame]))}else this.running=
!0,this.completed=!1,this.delay=this.currentAnim.time};c.prototype.showFrame=function(b,a){this.data=b.data;if(b.frames&&b.frames[a])return this.dataWidth=b.frames[a][2]||b.frameWidth||0,this.dataHeight=b.frames[a][3]||b.frameHeight||0,this.width=this.dataWidth,this.height=this.dataHeight,this.xOffset=b.frames[a][0],this.yOffset=b.frames[a][1],this;0!=b.frameWidth&&(this.width=b.frameWidth);0!=b.frameHeight&&(this.height=b.frameHeight);for(var c=this.height,g=[0,0],d=this.width*a;d>=b.data.width;)d-=
b.data.width,g[1]+=c;g[0]+=d;this.loadSection(b.data,g[0],g[1],this.width,this.height);for(c=this.currentAnim.frameCallbacks.length-1;0<=c;c--)this.currentAnim.frameCallbacks[c]&&this.currentAnim.frameCallbacks[c].call(this,a);return this};c.prototype.stop=function(){this.pause();this.currentFrame=-1;this.delay=null!=this.currentAnim?this.currentAnim.time:512;return this};c.prototype.pause=function(){this.stopped=!0;this.running=!1;return this};c.prototype.resume=function(){d.push(this);this.running=
!0;this.stopped=this.completed=!1;return this};c.prototype.rewind=function(){this.stop();this.resume();this.finish();return this};return c})})();
define("Arstider/SpriteSheet",["Arstider/Bitmap","Arstider/Sequence"],function(f,d){var c=function(b){b=b||{};this.data=null;this.height=this.width=0;this.frames=Arstider.checkIn(b.frames,null);this.frameWidth=Arstider.checkIn(b.width,0);this.frameHeight=Arstider.checkIn(b.height,0);this.onload=Arstider.checkIn(b.onload,null);(b=Arstider.checkIn(Arstider.checkIn(b.data,b.bitmap),null))&&this.loadBitmap(b)};c.prototype.addSequence=function(b,a,c,g){this[b]=new d(this,b,a,c,g);return this[b]};c.prototype.loadBitmap=
function(b){var a=this;"string"===typeof b||b instanceof String?(this.url=b,new f({url:b,callback:function(b){a.data=b.data?b.data:b;0==a.width&&(a.width=b.width);0==a.height&&(a.height=b.height);if(a.onload)a.onload()}})):(a.data=b,0==a.width&&(a.width=b.width),0==a.height&&(a.height=b.height))};return c});
define("Arstider/Tag",["Arstider/Entity","Arstider/Viewport"],function(f,d){function c(b){Arstider.Super(this,f,b);this._tag=window.document.createElement(b.tag||"input");b.type&&(this._tag.type=b.type);b.value&&(this._tag.value=b.value);this._tag.id=b.id||"Arstider_tag_"+this.name;d.tagParentNode.appendChild(this._tag);this.parentNode=d.tagParentNode}Arstider.Inherit(c,f);c.prototype.attr=function(b,a){void 0!=a&&(this._tag[b]=a);return this._tag[b]};c.prototype.style=function(b,a){void 0!=a&&(this._tag.style[b]=
a);return this._tag.style[b]};c.prototype.killBuffer=function(){null!=this.parentNode&&this.parentNode.removeChild(this._tag);this._tag=null};c.prototype.bind=function(b,a){this._tag?this._tag.addEventListener(b,a):0<Arstider.verbose&&console.warn("Arstider.Tag.bind: no DOM element")};c.prototype.unbind=function(b,a){this._tag?this._tag.removeEventListener(b,a):0<Arstider.verbose&&console.warn("Arstider.Tag.unbind: no DOM element")};c.prototype.appendChild=function(b){b.nodeName||b._tag?b.nodeName?
this._tag.appendChild(b):b._tag&&b._tag.nodeName?this._tag.appendChild(b._tag):console.error("Problem with element, cannot append to DOM tree! :: ",b):console.error("Cannot append non-DOM element to DOM tree! :: ",b)};c.prototype._update=function(){this._tag&&(null==this.global.x?this._tag.style.display="none":(this._tag.style.display="block",f.prototype._update.call(this),this._tag.style.position="absolute",this._tag.style.zIndex="999",this._tag.style.left=this.global.x+"px",this._tag.style.top=
this.global.y+"px",this._tag.width=this._tag.style.width=this.global.width+"px",this._tag.height=this._tag.style.height=this.global.height+"px",this._tag.style.opacity=this.global.alpha))};return c});
(function(){var f=null;define("Arstider/Telemetry",["Arstider/Request"],function(d){function c(){this.enabled=!1;this._events={};this._sessionId=Arstider.guid();this._orderId=0;this._targetURLs={}}if(null!=f)return f;c.prototype.log=function(b,a,c){f.enabled&&(c=c||{},c._timestamp=Arstider.timestamp(),c._category=b,c._name=a,c._session=f._sessionId,c._orderId=f._orderId,f._events[b]||(f._events[b]={}),f._events[b][a]||(f._events[b][a]=[]),f._events[b][a].push(c),"screenstart"==a&&f._orderId++,f._send())};
c.prototype.sendTo=function(b,a){f.enabled=!0;a=a||["*"];for(var c=0;c<a.length;c++)f._targetURLs[a[c]]=b;f._send()};c.prototype._send=function(){var b,a,c;for(b in f._events)if(b in f._targetURLs||"*"in f._targetURLs)for(a in f._events[b])for(c=0;c<f._events[b][a].length;c++)if(!f._events[b][a][c].__sent){f._events[b][a][c].__sent=Arstider.timestamp();var g=new d(Arstider.clone(f._targetURLs[b]||f._targetURLs["*"]||{},!0));g.url=g.url.split("[category]").join(b).split("[name]").join(a);g.postData=
JSON.stringify(f._events[b][a][c]);g.send()}};return f=new c})})();
define("Arstider/TextField","Arstider/Buffer Arstider/Entity Arstider/Fonts Arstider/Signal Arstider/texts/Segment Arstider/texts/BBParser".split(" "),function(f,d,c,b,a,h){function g(a){this.fillText=Arstider.checkIn(a.fillText,!0);this.strokeText=Arstider.checkIn(a.strokeText,!1);this._textValue=null;this.rightToLeft=Arstider.RTL;this._words=[];this.textWrap=Arstider.checkIn(a.textWrap,!1);this._finalFont=this._font=null;this._custom={};this.dynamic=null;this.onchange=new b;Arstider.Super(this,
d,a);void 0!=a.font&&this.setFont(a.font);void 0!=a.text&&this.setText(a.text)}g._entityRef=new d;g.CROP_PADDING=1;Arstider.Inherit(g,d);g.prototype.setText=function(b){b+="";b!=this._textValue&&(-1!=b.indexOf(h.breakLine)&&(this.textWrap=!0),this._textValue=b,-1!=b.indexOf(h.openSegment)||this.textWrap||this.rightToLeft?(this._words=h.parse(b),this._words=h.splitSymbol(this._words,h.breakLine,!1,!0),this._words=h.trimSpaces(this._words),this.rightToLeft&&(this._words=this._words.reverse())):this._words=
[new a(b)],this.render())};g.prototype.setFastText=function(b){b+="";this.textWrap=this.dynamic=!1;b!=this._textValue&&(this._textValue=b,this._words=[new a(b)]);this.render(!0)};g.prototype.setFont=function(a,b){this._finalFont=null;this._custom=b||{};this._font=c.get(a);var g=this;this._font._onFontLoaded(function(){g.render.call(g)})};g.prototype._makeBuffer=function(){null==this.data&&(this.data=new f({name:"Arstider_TextField_"+this.name}))};g.prototype._renderWordList=function(a,b,c){var d=
0,f=0,u=this.width-2*a.paddingLeft,y=f=0,w=[],x=null,v,q=Math.max(0,a.lineSpacing-parseInt(a.size));if(c)f=a.paddingTop+a.lineSpacing+a.fontOffsetY-q,"right"==a.textAlign?d=this.width-a.paddingLeft:"center"==a.textAlign&&(d=0.5*this.width),this.data.context.textAlign=a.textAlign,this.data.context.clearRect(0,0,this.width,this.height),this._words[0].width=this.data.width,this._words[0].render(this.data.context,a,d,f,this.strokeText,this.fillText);else{for(v=0;v<this._words.length;v++)this._words[v].width||
this._words[v].calculateWidth(this.data.context,a);if((0<u||this.textWrap)&&!c){for(v=0;v<this._words.length;v++)-1!=this._words[v].text.indexOf(h.breakLine)&&(null!=x&&w.push(x),x=[],y=0),0<u&&y+this._words[v].width>u&&(null!=x&&0!=x.length&&w.push(x),x=[],y=0),null==x&&(x=[]),x.push(this._words[v]),y+=this._words[v].width,y>f&&(f=y);x&&0<x.length&&w.push(x)}else w[0]=this._words,f=this._getLineWidth(w[0]);d=w.length*a.lineSpacing+2*a.paddingTop+Math.abs(a.fontOffsetY)+2*a.lineWidth+a.shadowBlur;
0>=u?(u=f+Math.abs(2*a.paddingLeft)+Math.abs(a.fontOffsetX)+Math.abs(2*a.shadowBlur)+2*g.CROP_PADDING,this.strokeText&&(u+=Math.abs(2*a.lineWidth)),this.data.setSize(u,d),u=f):this.data.width!=this.width&&this.data.height!=this.height?(this.data.setSize(this.width,this.height||d),b=!0):this.data.context.clearRect(0,0,this.width,this.height);this.width=this.data.width;this.height=this.data.height;b&&this.applyFont(a);this.data.context.textAlign="left";for(v=0;v<w.length;v++)for(d=a.paddingLeft+a.fontOffsetX+
Math.abs(a.lineWidth)+g.CROP_PADDING,"right"==a.textAlign?d+=u:"center"==a.textAlign&&(x=this._getLineWidth(w[v]),d+=0.5*(u-x)),f=a.paddingTop+(v+1)*a.lineSpacing+a.fontOffsetY-q,b=0;b<w[v].length;b++)"right"==a.textAlign?(d-=w[v][w[v].length-(b+1)].width,w[v][w[v].length-(b+1)].render(this.data.context,a,d,f,this.strokeText,this.fillText)):(w[v][b].render(this.data.context,a,d,f,this.strokeText,this.fillText),d+=w[v][b].width)}};g.prototype._getLineWidth=function(a){for(var b=0,c=0;c<a.length;c++)b+=
a[c].width;return b};g.prototype.applyFont=function(a){for(var b in a)this.data.context[b]=void 0==this[b]||b in g._entityRef?a[b]:[b];this.data.context.font=(a.bold?"bold ":"")+(a.italic?"italic ":"")+a.size+" "+a.family};g.prototype.render=function(a){var b=!1;null==this.dynamic&&(this.dynamic=0==this.width?!0:!1);!0===this.dynamic&&(this.height=this.width=0);if(this.dynamic||this.textWrap||null==this._finalFont)this._makeBuffer(),b=!0;null!==this._font&&null!==this._textValue&&""!==this._textValue&&
!1!==this._font.loaded&&(this._font.temp&&!c.collection[this._font.name].temp&&this.setFont(c.get(this._font.name)),null==this._finalFont?(this._finalFont=Arstider.mixin(Arstider.clone(this._font),this._custom,!0),this._renderWordList(this._finalFont,!0,a)):this._renderWordList(this._finalFont,b,a),this.onchange.dispatch(this))};return g});
(function(){var f=null;define("Arstider/Texture",["Arstider/Buffer","Arstider/Bitmap"],function(d,c){function b(a){a=a||{};this.pattern=null;this.repeat=Arstider.checkIn(a.repeat,"repeat");this.url=Arstider.checkIn(a.data,a.url||"");this.callback=a.callback||Arstider.emptyFunction;""!=this.url&&this.loadBitmap(this.url)}null==f&&(f=new d({name:"Arstider_textureLoader",width:100,height:100}));b.prototype.loadBitmap=function(a,b){if("string"===typeof a||a instanceof String){var g=this;this.url=a;new c({url:a,
callback:function(a){g._createPattern.apply(g,[a,b])}})}else g._createPattern(a,b)};b.prototype._createPattern=function(a,b){var c=Arstider.getNode(a);c&&c.data?this.pattern=f.context.createPattern(c.data,this.repeat):console.error("Arstider.Texture.createPattern: no data");b?b.apply(this):this.callback(this)};b.prototype.setSize=function(a,b){f.setSize(a,b);this.loadBitmap(this.url)};return b})})();
define("Arstider/Timer",["Arstider/GlobalTimers"],function(f){function d(c,b,a){this.running=!0;this.completed=!1;this.delay=this.initialDelay=b;this.callback=c;this._clockBased=a;this._startTime=this._internalTimer=null;this._clockBased?this.resume():f.push(this)}d.prototype.pause=function(){this.running=!1;this._clockBased&&(clearTimeout(this._internalTimer),this._internalTimer=null,this.delay-=Arstider.timestamp()-this._startTime);return this};d.prototype.kill=function(){this._clockBased?this.pause():
(this.running=!1,f.remove(this))};d.prototype.resume=function(){this.running=!0;if(this._clockBased&&null==this._internalTimer){var c=this;this._startTime=Arstider.timestamp();clearTimeout(this._internalTimer);this._internalTimer=setTimeout(function(){c.finish.call(c)},this.delay)}return this};d.prototype.restart=function(){this.completed=!1;this.delay=this.initialDelay;this.resume();return this};d.prototype.finish=function(){this.running=!1;this.callback();!0!=this.running&&(this.completed=!0);return this};
return d});
define("Arstider/Tween",["Arstider/Easings","Arstider/GlobalTimers","Arstider/tweens/Transformation","Arstider/tweens/Animation","Arstider/tweens/Action"],function(f,d,c,b,a){function h(a,b,c,h,d){this.target=a;this.completed=this.running=!1;this._stack=[];this._currentStep=0;this.delay=512;b&&this._addAnimation(b,c,h,d)}h.DEFAULT_EASING=f.LINEAR;h.DEFAULT_TIME=1E3;h.AUTO_KILL=!1;h.to=function(a,b,c,d){return(new h(a)).to(a,b,c,d).play()};h.from=function(a,b,c,d){return(new h(a)).from(a,b,c,d).play()};
h.prototype.to=function(a,b,c,h){c&&0<c.delay&&this.sleep(c.delay);this._addAnimation(b,c,h);return this};h.prototype.from=function(a,b,c,h){var d,f,u={};for(f in b)d=b[f],u[f]=a[f],a[f]=d;return this.to(a,u,c,h)};h.prototype._addAnimation=function(a,c,d,f){var l;0<c||0===c?l=c:c&&(l=c.time,d=c.easing);l||0===l||(l=h.DEFAULT_TIME);d||(d=h.DEFAULT_EASING);this._stack.push(new b(this.target,a,l,d,f))};h.prototype._addAction=function(b,c){this._stack.push(new a(b,c))};h.prototype.nextStep=function(){var a;
if(this._stack[this._currentStep].changes)for(a=this._stack[this._currentStep].changes.length-1;0<=a;a--)this._stack[this._currentStep].changes[a].lastStep=this.target[this._stack[this._currentStep].changes[a].property],this.target[this._stack[this._currentStep].changes[a].property]=this._stack[this._currentStep].changes[a].end;this._currentStep++;if(this._currentStep<this._stack.length&&this._stack[this._currentStep].changes)for(a=this._stack[this._currentStep].changes.length-1;0<=a;a--)this._stack[this._currentStep].changes[a].start=
this.target[this._stack[this._currentStep].changes[a].property];return this};h.prototype.step=function(a){this.delay=512;a=Arstider.checkIn(a,Arstider.FPS/1E3);this._currentStep<this._stack.length?0<this._stack[this._currentStep].time?(this._stack[this._currentStep].step&&this._stack[this._currentStep].step(this),this._stack[this._currentStep].time-=a):(this.nextStep(),this.step(a)):(this.completed=!0,h.AUTO_KILL&&this.kill())};h.prototype.play=function(){d.push(this);this.running=!0;return this};
h.prototype.pause=function(){this.running=!1;return this};h.prototype.resume=function(){this.completed||(this.running=!0);return this};h.prototype.sleep=function(a){var b={};b["__tweenSleep"+Arstider.timestamp()]=a;this.then(b,a);return this};h.prototype.then=function(a,b,c,h){a instanceof Function||"function"===typeof a?this._addAction(a,b):this._addAnimation(a,b,c,h);return this};h.prototype.rewind=function(){this._currentStep=0;for(var a=this._stack.length-1;0<=a;a--)this._stack[a].rewind();this.step(0);
return this};h.prototype.reverse=function(){var a,h,d;for(d=this._stack.length-1;0<=d;d--)if(this._stack[d].changes){a=new b(this,{},this._stack[d].startTime,this._stack[d].easing,this._stack[d].easingOpt);for(h=this._stack[d].changes.length-1;0<=h;h--)a.changes.push(new c(this._stack[d].changes[h].property,this._stack[d].changes[h].start,this._stack[d].changes[h].end));this._stack.push(a)}return this};h.prototype.kill=h.prototype.stop=function(){this.running=!1;d.remove(this);return this};h.prototype.loop=
function(a){this._addAction(this.rewind,Arstider.checkIn(a,-1));return this};h.prototype.yoyo=function(){this._addAction(this.reverse);return this};h.prototype.stepBack=function(){this._stack[this._currentStep].stepBack?this._stack[this._currentStep].stepBack(this):2<Arstider.verbose&&console.warn("Arstider.Tween.stepBack: no step to back to");return this};return h});
define("Arstider/Viewport",["Arstider/Browser","Arstider/Events"],function(f,d){function c(){this.tag=null;this.orientation="landscape";this.canvasRatio=1;this.preserveAspect=!1;this.visibleWidth=this.visibleHeight=this.yOffset=this.xOffset=0;this.globalScale=1;this.maxWidth=1136;this.maxHeight=672;this.minWidth=960;this.minHeight=536;this._cancelFullscreenEvent=this._requestFullscreenEvent=this.container=null;this.geolocationEnabled=!1;this._geoloc=null;this.accelerometerEnabled=this.vibrationEnabled=
!1;this._tilt={x:0,y:0,z:0};this.unsupportedOrientation=!1;setTimeout(this.vibrate,0)}var b;c.prototype.init=function(a,c){b.container=a.appendChild?a:window.document.getElementById(a);if(b.container){b.container.appendChild(c);b.tag=c;b.container.style.position="relative";b.container.style.display="block";b.container.style.width="100%";b.container.style.height="100%";window.addEventListener("resize",b._resize);f.isMobile&&window.addEventListener("orientationchange",b._rotate);window.onbeforeunload=
b._unload;window.addEventListener("pagehide",b._pagehide);var g,d;"undefined"!==typeof window.document.hidden?(g="hidden",d="visibilitychange"):"undefined"!==typeof window.document.mozHidden?(g="mozHidden",d="mozvisibilitychange"):"undefined"!==typeof window.document.msHidden?(g="msHidden",d="msvisibilitychange"):"undefined"!==typeof window.document.webkitHidden&&"hidden"!=g?(g="webkitHidden",d="webkitvisibilitychange"):(g="body",visibilitychange="blur");"safari"==f.name&&f.isMobile&&8>f.platformVersion?
function(){var a,c=Arstider.timestamp();setInterval(function(){a=Arstider.timestamp();120<a-c&&b._pageshow();c=a},50)}():window.addEventListener("focus",b._pageshow);window.document.addEventListener(d,function(){window.document[g]?b._pagehide():b._pageshow()});b._requestFullscreenEvent=b.tag.requestFullScreen?"requestFullScreen":b.tag.mozRequestFullScreen?"mozRequestFullScreen":b.tag.webkitRequestFullScreenWithKeys?"webkitRequestFullScreenWithKeys":b.tag.webkitRequestFullScreen?"webkitRequestFullScreen":
"FullscreenError";b._cancelFullscreenEvent=window.document.cancelFullScreen?"cancelFullScreen":window.document.mozCancelFullScreen?"mozCancelFullScreen":window.document.webkitCancelFullScreen?"webkitCancelFullScreen":"FullscreenError";window.ondevicemotion=function(a){a=a||window.event;null!=a.accelerationIncludingGravity.x&&null!=a.accelerationIncludingGravity.y&&null!=a.accelerationIncludingGravity.z&&(b.accelerometerEnabled=!0,b._tilt.x=a.accelerationIncludingGravity.x,b._tilt.y=a.accelerationIncludingGravity.y,
b._tilt.z=a.accelerationIncludingGravity.z)};b._rotate()}else 0<Arstider.verbose&&console.warn("Arstider.Viewport.init: no DOM element specified, viewport broken")};c.prototype.enterFullScreen=function(a){(a=Arstider.checkIn(a,!1))?b.tag.classList.add("fs_scaled_element"):b.tag.classList.remove("fs_scaled_element");a=b.tag[b._requestFullscreenEvent]();d.broadcast("Viewport.enterFullscreen",b);return a};c.prototype.quitFullScreen=function(){var a=window.document[b._cancelFullscreenEvent]();d.broadcast("Viewport.quitFullscreen",
b);return a};c.prototype._resize=function(a){f.isMobile&&(b._rotate(),"landscape"==b.orientation?(window.document.body.style.width=window.innerWidth+"px",window.document.body.style.height=window.innerHeight+"px"):(window.document.body.style.height=window.innerWidth+"px",window.document.body.style.width=window.innerHeight+"px"));var c,g=1,m,p,k,l;c=window.getComputedStyle(b.container,null);if("landscape"==b.orientation)a=parseInt(c.getPropertyValue("width")),c=parseInt(c.getPropertyValue("height"));
else if("portrait"==b.orientation)a=parseInt(c.getPropertyValue("height")),c=parseInt(c.getPropertyValue("width"));else return;b.preserveAspect?(b.tag.style.left="0px",b.tag.style.top="0px",b.tag.style.width=b.maxWidth+"px",b.tag.style.height=b.maxHeight+"px",b.tag.style.position="absolute",b.tag.width=b.maxWidth,b.tag.height=b.maxHeight,d.broadcast("Viewport.resize",b),window.document.body.scrollTop=0):(f.isMobile&&2*a>=b.minWidth&&2*a<=b.maxWidth&&2*c>=b.minHeight&&2*c<=b.maxHeight?g=0.5:(m=a/b.minWidth,
p=c/b.minHeight,g=Arstider.min(m,p),g=Arstider.min(1,g)),m=Arstider.chop(b.maxWidth*g),p=Arstider.chop(b.maxHeight*g),k=Arstider.chop(0.5*(a-m)),l=Arstider.chop(0.5*(c-p)),b.xOffset=k,b.yOffset=l,b.tag.style.left=k+"px",b.tag.style.top=l+"px",b.tag.style.width=m+"px",b.tag.style.height=p+"px",b.tag.style.position="absolute",b.tag.width=b.maxWidth,b.tag.height=b.maxHeight,b.canvasRatio=g,b.visibleWidth=Arstider.chop(a/g),b.visibleHeight=Arstider.chop(c/g),b.visibleWidth=Arstider.min(b.visibleWidth,
b.maxWidth)/b.globalScale,b.visibleHeight=Arstider.min(b.visibleHeight,b.maxHeight)/b.globalScale,b.tagParentNode=window.document.getElementById("Arstider_tag_overlay"),b.tagParentNode||(b.tagParentNode=window.document.createElement("div"),b.tagParentNode.id="Arstider_tag_overlay",b.tag.parentNode.appendChild(b.tagParentNode),b.tagParentNode.style.position="absolute",b.tagParentNode.style.display="block",b.tagParentNode.style.zIndex=9999,b.tagParentNode.style.overflow="hidden"),b.tagParentNode.style.width=
b.tag.style.width,b.tagParentNode.style.height=b.tag.style.height,b.tagParentNode.style.left=b.tag.style.left,b.tagParentNode.style.top=b.tag.style.top,d.broadcast("Viewport.resize",b),f.isMobile&&(window.document.body.scrollTop=0))};c.prototype._rotate=function(a){a=b.orientation;b.orientation=f.isMobile?"android"==f.name?90==window.orientation||-90==window.orientation?"portrait":"landscape":window.innerHeight>window.innerWidth?"portrait":"landscape":"landscape";b.orientation!=a&&d.broadcast("Viewport.rotate",
b)};c.prototype._unload=function(a){d.broadcast("Viewport.unload",b)};c.prototype._pagehide=function(a){Arstider.pageHidden=!0;d.broadcast("Viewport.pagehide",b)};c.prototype._pageshow=function(a){Arstider.pageHidden=!1;d.broadcast("Viewport.pageshow",b)};c.prototype.getGeolocation=function(a){null==b._geoloc?b.updateGeolocation(a):a(b._geoloc)};c.prototype.updateGeolocation=function(a){if(navigator.geolocation){b.geolocationEnabled=!0;try{navigator.geolocation.getCurrentPosition(function(c){b._geoloc=
c;a&&a(b._geoloc)})}catch(c){b.geolocationEnabled=!1,b._geoloc={},0<Arstider.verbose&&console.warn("Arstider.Viewport.updateGeolocation: ",c)}}else b.geolocationEnabled=!1,b._geoloc={},a&&a(b._geoloc)};c.prototype.vibrate=function(a){a=a||0;var b=window.navigator.vibrate||window.navigator.webkitVibrate||window.navigator.mozVibrate||window.navigator.msVibrate;if(f.isMobile)if(b)try{b(0),b(a)}catch(c){0<Arstider.verbose&&console.warn("Arstider.Browser.vibrate: error while trying to vibrate API may be broken")}else 1<
Arstider.verbose&&console.warn("Arstider.Browser.vibrate: feature not supported");else 2<Arstider.verbose&&console.warn("Arstider.Browser.vibrate: feature not supported")};c.prototype.getDeviceTilt=function(){return b._tilt};c.prototype.removeDecorations=function(a){a=a||window;a.locationbar&&(a.locationbar.visible=!1);a.menubar&&(a.menubar.visible=!1);a.personalbar&&(a.personalbar.visible=!1);a.scrollbars&&(a.scrollbars.visible=!1);a.statusbar&&(a.statusbar.visible=!1);a.toolbar&&(a.toolbar.visible=
!1)};c.prototype.setGlobalScale=function(a){var c=1/b.globalScale;b.visibleWidth/=c;b.visibleHeight/=c;b.globalScale=a;b.visibleWidth/=a;b.visibleHeight/=a;d.broadcast("Viewport.globalScaleChange",a)};c.prototype.changeResolution=function(a,c,g,d){b.maxWidth=c;b.maxHeight=d;b.minWidth=a||0;b.minHeight=g||0;b._resize()};return b=new c});(function(){var f=null;define("Arstider/Watermark",["Arstider/DisplayObject"],function(d){return null!=f?f:f=new d})})();
(function(){var f=[];define("Arstider/commons/Ad",["Arstider/Tag"],function(d){var c={Banner:function(b){b=b||{};b.tag="iframe";Arstider.Super(this,d,b);f.push(this);this.attr("seamless","seamless");this.attr("scrolling","no");this.style("border","0px");this.style("backgroundColor","white");b.url&&this.loadUrl(b.url)}};Arstider.Inherit(c.Banner,d);c.Interstitial=function(b){b=b||{};b.tag="iframe";Arstider.Super(this,d,b);f.push(this);this.fill(1,1);this.dock(0.5,0.5);this.attr("seamless","seamless");
this.attr("scrolling","no");this.style("border","0px");this.style("backgroundColor","black");b.url&&this.loadUrl(b.url)};Arstider.Inherit(c.Interstitial,d);c.Banner.prototype.loadUrl=c.Interstitial.prototype.loadUrl=function(b){this._tag.src=b};c.Banner.prototype.close=c.Interstitial.prototype.close=function(){var b=f.indexOf(this);-1<b&&f.splice(b,1);this.killBuffer()};c.closeAll=function(){for(var b=f.length-1;0<=b;b--)f[b].close()};return c})})();
define("Arstider/commons/Button",["Arstider/DisplayObject","Arstider/TextField","Arstider/Mouse","Arstider/Browser"],function(f,d,c,b){function a(a){Arstider.Super(this,f,a);a=a||{states:{}};this.enabled=Arstider.checkIn(a.enabled,!0);this.currentState=null;this.states={};this.currentCursor=c.getCursor();this.hitbox=Arstider.checkIn(a.hitbox,Arstider.checkIn(a.hitBox,null));for(var b in a.states)this.addState(b,a.states[b]);this.enabled?this.showState("normal"):this.showState("disabled");null!=this.hitbox&&
this.addHitbox(this.hitbox);b=Arstider.firstOf([a.label,a.text],null);null!=b&&(this.label=new d({strokeText:a.strokeText||!1}),this.label.setText(b),a.font&&this.label.setFont(a.font),this.label.dock(0.5,0.5),this.addChild(this.label))}Arstider.Inherit(a,f);a.prototype._onhover=function(){null==this.hitbox&&this.enabled&&!b.isMobile&&(c.setCursor("pointer"),this.showState("hover"),f.prototype._onhover.call(this))};a.prototype._onleave=function(){null==this.hitbox&&(c.setCursor(this.currentCursor),
this.enabled?this.showState("normal"):this.showState("disabled"),f.prototype._onleave.call(this))};a.prototype._onpress=function(){null==this.hitbox&&this.enabled&&(this.showState("pressed"),f.prototype._onpress.call(this))};a.prototype._onrelease=function(){null==this.hitbox&&this.enabled&&(c.setCursor(this.currentCursor),this.showState("normal"),f.prototype._onrelease.call(this))};a.prototype.addState=function(a,b){var c=this,d=new f({name:a+"State",alpha:0}),k=Arstider.checkIn(b.image,Arstider.checkIn(b.data,
Arstider.checkIn(b.bitmap,null)));null!=k&&("string"===typeof k?d.loadBitmap(k,function(a){0==c.height&&(c.height=a.height);0==c.width&&(c.width=a.width)}):null!=k.data&&(d.data=k.data,d.width=k.width,d.height=k.height,d.dataHeight=k.dataHeight,d.dataWidth=k.dataWidth,d.xOffset=k.xOffset,d.yOffset=k.yOffset,0==this.height&&(this.height=k.height),0==this.width&&(this.width=k.width)));null!=b.icon&&(d.icon="string"===typeof b.icon?new f({data:b.icon}):null!=k.data?b.icon:new f,d.addChild(d.icon));this.addChild(d);
this.states[a]=d};a.prototype.showState=function(a){if(this.currentState!=a)if(a in this.states){for(s in this.states)this.states[s].alpha=s==a?1:0;this.currentState=a}else 1<Arstider.verbose&&console.warn("Arstider.commons.Button.showState: unexisting state ",a)};a.prototype.addHitbox=function(a){var d=this;this.hitbox=new f({x:a[0],y:a[1],width:a[2],height:a[3],onleave:function(){c.setCursor(d.currentCursor);d.enabled?d.showState("normal"):d.showState("disabled");f.prototype._onleave.call(d)},onrelease:function(){d.enabled&&
(c.setCursor(d.currentCursor),d.showState("normal"),f.prototype._onrelease.call(d))},onhover:function(){d.enabled&&!b.isMobile&&(c.setCursor("pointer"),d.showState("hover"),f.prototype._onhover.call(d))},onpress:function(){d.enabled&&(d.showState("pressed"),f.prototype._onpress.call(d))}});this.addChild(this.hitbox)};a.prototype.enable=function(){this.enabled=!0;this.showState("normal")};a.prototype.disable=function(){this.enabled=!1;this.showState("disabled")};return a});
define("Arstider/commons/CollisionMap",["Arstider/Bitmap","Arstider/Entity"],function(f,d){function c(b){Arstider.Super(this,d,b);b=b||{};this._maskData=this._collMask=null;this._collMaskUrl=Arstider.checkIn(b.mask,null);this._collMaskScale=Arstider.checkIn(b.maskScale,1);this._debugDraw=Arstider.checkIn(b.debug,!1);null!=this._collMaskUrl&&this.loadMask(this._collMaskUrl)}Arstider.Inherit(c,d);c.prototype.setScale=function(b){this._collMaskScale=b};c.prototype.loadMask=function(b){var a=this;"string"===
typeof b||b instanceof String?new f({url:b,callback:function(b){a._collMask=b.data;a._maskData=Arstider.saveToCanvas("CollisionMap_"+a._collMaskUrl,b.data).context2D().getImageData(0,0,b.width,b.height);a._parseMap();0==a.width&&(a.width=a.dataWidth=b.width);0==a.height&&(a.height=a.dataHeight=b.height);a._debugDraw&&a._drawShape.apply(a)}}):(a.data=b,0==a.width&&(a.width=b.width),0==a.height&&(a.height=b.height))};c.prototype._drawShape=function(){this.alpha=0.25;this.data=this._collMask;this.scaleX=
this.scaleY=this._collMaskScale};c.prototype._parseMap=function(){for(var b=[],a=this._maskData.data.length,c=0;c<a;c+=4)b[b.length]=0===this._maskData.data[c]?1:null;this._maskData=b;Arstider.bufferPool["CollisionMap_"+this._collMaskUrl]&&Arstider.bufferPool["CollisionMap_"+this._collMaskUrl].kill()};c.prototype.updateAt=function(b,a,c){this._maskData[Arstider.chop(a/this._collMaskScale)*this.width+Arstider.chop(b/this._collMaskScale)]=c};c.prototype.collisionAt=function(b,a){return 1===this._maskData[Arstider.chop(a/
this._collMaskScale)*this.width+Arstider.chop(b/this._collMaskScale)]};return c});
define("Arstider/commons/ComboBox","Arstider/DisplayObject Arstider/TextField Arstider/commons/Input Arstider/Keyboard Arstider/Mouse Arstider/Events Arstider/commons/Scrollbar".split(" "),function(f,d,c,b,a,h,g){function m(a){Arstider.Super(this,f,a);var b=this;this.addScrollbar=!1;this.scrollValue=0;var d=new f({name:this.name+"_comboBox"});d.imageBar=Arstider.checkIn(a.bar,Arstider.checkIn(a.imageBar,null));d.imageButton=Arstider.checkIn(a.button,Arstider.checkIn(a.imageButton,null));d.imageList=
Arstider.checkIn(a.list,Arstider.checkIn(a.imageList,null));d.imageSlider=Arstider.checkIn(a.slider,Arstider.checkIn(a.imageSlider,null));d.imageHandle=Arstider.checkIn(a.handle,Arstider.checkIn(a.imageHandle,null));d.dataList=Arstider.checkIn(a.data,Arstider.checkIn(a.dataList,["item1","item2","item3","item4"]));d.font=Arstider.checkIn(a.font,Arstider.checkIn(a.fontList,null));d.heightItem=Arstider.checkIn(a.heightItem,Arstider.checkIn(a.heightText,Arstider.checkIn(a.heightOption,40)));d.widthItem=
Arstider.checkIn(a.widthItem,Arstider.checkIn(a.widthText,Arstider.checkIn(a.widthOption,140)));d.imageBarDisabled=Arstider.checkIn(a.barDisabled,Arstider.checkIn(a.imageBarDisabled,d.imageBar));d.imageButtonPress=Arstider.checkIn(a.buttonPress,Arstider.checkIn(a.imageButtonPress,d.imageButton));d.imageButtonDisabled=Arstider.checkIn(a.buttonDisabled,Arstider.checkIn(a.imageButtonDisabled,d.imageButton));d.imageListFocus=Arstider.checkIn(a.listFocus,Arstider.checkIn(a.imageListFocus,null));d.placeHolder=
Arstider.checkIn(a.placeHolder,Arstider.checkIn(a.placeholder," "));d.label=Arstider.checkIn(a.label," ");d.disabled=Arstider.checkIn(a.disabled,!1);d.inputX=Arstider.checkIn(a.inputX,Arstider.checkIn(a.inputTextX,null));d.inputY=Arstider.checkIn(a.inputY,Arstider.checkIn(a.inputTextY,null));d.inputSize=Arstider.checkIn(a.inputSize,Arstider.checkIn(a.inputTextSize,20));d.buttonX=Arstider.checkIn(a.buttonX,null);d.buttonY=Arstider.checkIn(a.buttonY,null);d.scrollbarX=Arstider.checkIn(a.scrollbarX,
null);d.scrollbarY=Arstider.checkIn(a.scrollbarY,null);d.bar=new f({name:this.name+"_bar",data:d.disabled?d.imageBarDisabled:d.imageBar,onload:function(){d.bar.textInput.y=d.inputY?d.inputY:d.bar.height/2-10;d.bar.textInput.x=d.inputX?d.inputX:8}});d.bar.textInput=new c({name:this.name+"_input",placeholder:d.placeHolder,label:d.label,enabled:!d.disabled,size:d.inputSize});d.bar.button=new f({name:this.name+"_button",data:d.disabled?d.imageButtonDisabled:d.imageButton,onclick:function(){d.disabled||
(0==d.list.alpha?(b.addScrollbar&&b.getAttr("scrollbar").setValue(0),b.showList()):d.list.alpha=0)},onpress:function(){d.disabled||d.bar.button.loadBitmap(d.imageButtonPress)},onhover:function(){d.disabled||d.bar.button.loadBitmap(d.imageButtonPress)},onleave:function(){d.disabled||d.bar.button.loadBitmap(d.imageButton)},onrelease:function(){d.disabled||d.bar.button.loadBitmap(d.imageButton)}});d.list=new f({name:this.name+"_list",data:d.imageList,alpha:0,onload:function(){setTimeout(function(){d.list.y=
d.bar.height;d.bar.button.x=d.buttonX?d.buttonX:d.bar.width-d.bar.button.width;d.bar.button.y=d.buttonY?d.buttonY:0;b.listHeight=d.list.height;b.listWidth=d.list.width;b.addScrollBar()},1)},onhover:function(){b.addScrollbar&&b.getAttr("scrollbar").setFocus(!0)}});d.addChild(d.bar);d.addChild(d.bar.textInput);d.addChild(d.bar.button);d.addChild(d.list);this.addChild(d);this.showNewItem(d.dataList);this.startSearch()}Arstider.Inherit(m,f);m.prototype.getDisabled=function(){return this.getAttr("comboBox").disabled};
m.prototype.setDisabled=function(a){this.getAttr("comboBox").disabled=a;this.getAttr("button").loadBitmap(a?this.getAttr("comboBox").imageButtonDisabled:this.getAttr("comboBox").imageButton);this.getAttr("bar").loadBitmap(a?this.getAttr("comboBox").imageBarDisabled:this.getAttr("comboBox").imageBar);a?this.getAttr("input").disable():this.getAttr("input").enable()};m.prototype.getValue=function(){return this.getAttr("input").value()};m.prototype.setValue=function(a){this.getAttr("input").attr("value",
a)};m.prototype.addItem=function(a){if("string"===typeof a)this.getAttr("comboBox").dataList.push(a);else{for(var b=0;b<a.length;b++)this.getAttr("comboBox").dataList.push(a[b]);this.addScrollbar&&this.getAttr("scrollbar").setSizeParent(this.getAttr("comboBox").heightItem*(this.getAttr("comboBox").dataList.length-(this.getAttr("scrollbar").itemVisible-1)))}this.showNewItem(a)};m.prototype.showNewItem=function(a){var b=this;a="string"===typeof a?this.getAttr("comboBox").dataList.length-1:this.getAttr("comboBox").dataList.length-
a.length;for(a;a<this.getAttr("comboBox").dataList.length;a++){var c=new f({name:this.name+"_item_"+a,alpha:1E-13,y:a*this.getAttr("comboBox").heightItem,height:this.getAttr("comboBox").heightItem,width:this.getAttr("comboBox").widthItem,onhover:function(){this.alpha=1},onleave:function(){this.alpha=1E-13},onclick:function(){b.getAttr("input").attr("value",b.getAttr("comboBox").dataList[this.num]);b.getAttr("list").alpha=0;b.oldLength=b.getAttr("input").value().length}});this.getAttr("comboBox").imageListFocus&&
c.loadBitmap(this.getAttr("comboBox").imageListFocus);c.num=a;var g=new d({name:this.name+"_txt_"+a,alpha:1,width:this.getAttr("comboBox").widthItem,height:this.getAttr("comboBox").heightItem,y:a*this.getAttr("comboBox").heightItem});g.setText(this.getAttr("comboBox").dataList[a]);g.setFont(this.getAttr("comboBox").font);this.getAttr("list").addChild(c);this.getAttr("list").addChild(g)}};m.prototype.showList=function(a){if(!this.getAttr("comboBox").disabled){this.getAttr("list").height=this.listHeight;
this.getAttr("list").width=this.listWidth;this.getAttr("list").loadSection(this.getAttr("comboBox").imageList,0,0,this.listWidth,this.listHeight);this.getAttr("list").alpha=1;a||(a=0);var b=this.getAttr("comboBox").dataList.length;if(this.addScrollbar){var c=this.getAttr("scrollbar").itemVisible;this.getAttr("scrollbar").alpha=1;this.getAttr("scrollbar").step=100/(this.getAttr("comboBox").dataList.length-(c-1));0>a&&(a=0);a+c>this.getAttr("comboBox").dataList.length?(b=this.getAttr("comboBox").dataList.length,
a=this.getAttr("comboBox").dataList.length-c):b=a+c;this.getAttr("scrollbar").index=a}for(c=0;c<this.getAttr("comboBox").dataList.length;c++)this.getAttr("txt",c).alpha=this.getAttr("item",c).alpha=0;c=0;for(a;a<b;a++)this.getAttr("item",a).y=this.getAttr("txt",a).y=this.getAttr("comboBox").heightItem*c,this.getAttr("txt",a).alpha=1,this.getAttr("item",a).alpha=1E-13,c++}};m.prototype.resizeList=function(a){a*=this.getAttr("comboBox").heightItem;a<=this.listHeight&&this.getAttr("list").loadSection(this.getAttr("comboBox").imageList,
0,this.listHeight-a,this.listWidth,a)};m.prototype.addScrollBar=function(a){if(this.getAttr("comboBox").imageSlider&&this.getAttr("comboBox").imageHandle&&(this.addScrollbar=this.getAttr("comboBox").heightItem*this.getAttr("comboBox").dataList.length>this.listHeight)){a=this.listHeight/this.getAttr("comboBox").heightItem;a=Math.round(a)>a?Math.round(a)-1:Math.round(a);var b=new g({name:this.name+"_scrollbar",data:this.getAttr("comboBox").imageSlider,handle:this.getAttr("comboBox").imageHandle,maxSize:this.getAttr("comboBox").heightItem*
(this.getAttr("comboBox").dataList.length-(a-1)),y:this.getAttr("comboBox").scrollbarY?this.getAttr("comboBox").scrollbarY:0,x:this.getAttr("comboBox").scrollbarX?this.getAttr("comboBox").scrollbarX:this.getAttr("comboBox").widthItem});b.itemVisible=a;this.getAttr("list").addChild(b)}};m.prototype.startSearch=function(){var a=this,c;b.bind("any","up",function(){length=a.getAttr("input").value().length;c=a.getAttr("comboBox");if(0==length||length==a.oldLength)a.getAttr("list").alpha=0;else{for(var b=
0,d=0;d<c.dataList.length;d++){if(a.addScrollbar&&b>a.getAttr("scrollbar").itemVisible)return;0==c.dataList[d].search(a.getAttr("input").value())?(a.getAttr("list").alpha=1,a.getAttr("item",d).alpha=1E-13,a.getAttr("txt",d).alpha=1,a.getAttr("txt",d).y=a.getAttr("item",d).y=b*c.heightItem,b++):(a.getAttr("item",d).alpha=0,a.getAttr("txt",d).alpha=0)}0==b?a.getAttr("list").alpha=0:(a.addScrollbar&&(a.getAttr("scrollbar").alpha=0),a.resizeList(b))}a.oldLength=length})};m.prototype.update=function(){!a.isPressed()||
this.getAttr("bar").collides(a.x()-this.x,a.y()-this.y,1,1)||this.getAttr("list").collides(a.x()-this.x,a.y()-this.y,1,1)||(this.addScrollbar?this.getAttr("scrollbar").getIsDragged()||(this.getAttr("list").alpha=0):this.getAttr("list").alpha=0);if(this.addScrollbar&&this.scrollValue!=this.getAttr("scrollbar").getValue()){var b=this.getAttr("scrollbar").getValue("%")/this.getAttr("scrollbar").step,b=Math.round(b);this.showList(b);this.scrollValue=this.getAttr("scrollbar").getValue()}};m.prototype.getAttr=
function(a,b){var c;switch(a){case "comboBox":c=this.getChild(this.name+"_comboBox");break;case "bar":case "list":case "input":case "button":c=this.getChild(this.name+"_comboBox").getChild(this.name+"_"+a);break;case "item":case "txt":c=this.getChild(this.name+"_comboBox").getChild(this.name+"_list").getChild(this.name+"_"+a+"_"+b);break;case "scrollbar":c=this.getChild(this.name+"_comboBox").getChild(this.name+"_list").getChild(this.name+"_"+a)}return c};return m});
(function(){function f(c,b){return c+(2*Math.random()*b-b)}var d={spawnRate:150,startingIndex:0,maxLifeTime:100,maxLifeTimeVariant:0,xVelocity:0,xVelocityDecay:0,xVelocityVariant:0,yVelocity:0,yVelocityDecay:0,yVelocityVariant:0,scale:1,scaleDecay:0,scaleVariant:0,rotation:0,rotationDecay:0,rotationVariant:0,alpha:1,alphaDecay:0,alphaVariant:0};define("Arstider/commons/Emitter",["Arstider/DisplayObject","Arstider/commons/Pool"],function(c,b){function a(a){Arstider.Super(this,c,a);this.modulePool=
[];this.canonTimers={};this.canonActivated=!1;this._container=new c}Arstider.Inherit(a,c);a.prototype.addParticleType=function(a,c,f){f=f||Arstider.emptyObject;f=Arstider.mixin(f,d);this.modulePool.push({name:a,module:c,options:f});b.prealloc(c,1);this.canonActivated&&(this.stop(),this.start())};a.prototype.removeParticleType=function(a){for(var b=0;b<this.modulePool.length;b++)this.modulePool[b].name===a&&this.modulePool.splice(b,1);this.canonActivated&&(this.stop(),this.start())};a.prototype.start=
function(){this.canonActivated=!0;null==this._container.parent&&this.parent.addChild(this._container);for(var a=0;a<this.modulePool.length;a++)void 0==this.canonTimers[this.modulePool[a].name]&&this.spawn(this.modulePool[a])};a.prototype.stop=function(){this.canonActivated=!1;for(var a in this.canonTimers)clearTimeout(this.canonTimers[a]);this.canonTimers={}};a.prototype.spawn=function(a){var c=this;this.canonActivated&&(this.canonTimers[a.name]=setTimeout(function(){c.spawn.apply(c,[a])},a.options.spawnRate||
150),b.get(a.module,this.callback.bind(this,a)))};a.prototype.callback=function(a,b){Arstider.mixin(b.__particleInfo,a.options,!0);0!=b.__particleInfo.maxLifeTimeVariant&&(b.__particleInfo.maxLifetime=f(b.__particleInfo.maxLifetime,b.__particleInfo.maxLifeTimeVariant));0!=b.__particleInfo.xVelocityVariant&&(b.__particleInfo.xVelocity=f(b.__particleInfo.xVelocity,b.__particleInfo.xVelocityVariant));0!=b.__particleInfo.yVelocityVariant&&(b.__particleInfo.yVelocity=f(b.__particleInfo.yVelocity,b.__particleInfo.yVelocityVariant));
0!=b.__particleInfo.scaleVariant&&(b.__particleInfo.scale=f(b.__particleInfo.scale,b.__particleInfo.scaleVariant));0!=b.__particleInfo.rotationVariant&&(b.__particleInfo.rotation=f(b.__particleInfo.rotation,b.__particleInfo.rotationVariant));0!=b.__particleInfo.alphaVariant&&(b.__particleInfo.alpha=f(b.__particleInfo.alpha,b.__particleInfo.alphaVariant));b.rotation=b.__particleInfo.rotation;b.alpha=b.__particleInfo.alpha;1<b.alpha&&(b.alpha=1);0>b.alpha&&(b.alpha=0);b.scaleX=b.scaleY=b.__particleInfo.scale;
b.x=this.x;b.y=this.y;b.parent=this._container;b.__particleInfo.startingIndex<this._container.children.length?this._container.children.splice(b.__particleInfo.startingIndex,0,b):this._container.children[this.children.length]=b};a.prototype.update=function(){for(var a,c=this._container.children.length-1;0<=c;c--)a=this._container.children[c],a.__particleInfo.lifeTime++,a.__particleInfo.lifeTime>=a.__particleInfo.maxLifeTime||0>=a.alpha?(a.parent=null,b.free(a,!0),this._container.children.splice(c,
1)):(a.alpha-=a.__particleInfo.alphaDecay,a.rotation+=a.__particleInfo.rotation,a.scaleX*=a.__particleInfo.scale,a.scaleY*=a.__particleInfo.scale,a.x+=a.__particleInfo.xVelocity,a.y+=a.__particleInfo.yVelocity,a.__particleInfo.rotation+=a.__particleInfo.rotationDecay,a.__particleInfo.scale-=a.__particleInfo.scaleDecay,a.__particleInfo.xVelocity-=a.__particleInfo.xVelocityDecay,a.__particleInfo.yVelocity-=a.__particleInfo.yVelocityDecay)};return a})})();
define("Arstider/commons/GridLayer",["Arstider/DisplayObject","Arstider/Bitmap","Arstider/Buffer","Arstider/Preloader"],function(f,d,c,b){function a(a,b,c){for(var d=c.length-1;0<=d;d--)if(c[d].x===a&&c[d].y===b)return c[d];return null}function h(a,c,h,k,l,r){Arstider.Super(this,f);this.tileSizeX=h;this.tileSizeY=k;this.name=a;this.tiles=[];this.chunks=[];this._lockRequested=this.locked=!1;this.mapData=c.tiles;this._parseRequested=!1;this._texturePosSave={};var u=this;this._data=null;b.progress("_mapLayer"+
this.name+"Setup",0);new d({url:c.asset||Arstider.emptyImgSrc,callback:function(a){u._data=a.data;u._parseRequested=!0;u._parseFOV.apply(u,[[0,l,0,r]]);u._prepareChunks.apply(u);b.progress("_mapLayer"+u.name+"Setup",100)}})}h.MIN_CHUNK_SIZE=860;Arstider.Inherit(h,f);h.prototype._getTileTexturePos=function(a,b){if(void 0!=this._texturePosSave[a])return this._texturePosSave[a];2<Arstider.verbose&&console.warn("Arstider.GridLayer._getTileTexturePos: texture tile not found");for(var c=a*this.tileSizeX,
d=0;c>=b;)c-=b,d+=this.tileSizeY;this._texturePosSave[a]=[c,d];return this._texturePosSave[a]};h.prototype._createTile=function(c,d){var h=a(c,d,this.mapData);if(void 0==h)return Arstider.emptyObject;var k=new f({x:c*this.tileSizeX,y:d*this.tileSizeY,name:this.name+"_tile_"+c+"_"+d,width:this.tileSizeX,height:this.tileSizeY});void 0!=h.tileId&&(k.data=this._data,k.dataWidth=this.tileSizeX,k.dataHeight=this.tileSizeY,k.largeData=!0,k.xOffset=this._getTileTexturePos(h.tileId,this._data.width)[0],k.yOffset=
this._getTileTexturePos(h.tileId)[1]);if(h.spawns&&0<h.spawns.length)for(var l=0;l<h.spawns.length;l++)(function(a,c,d,g,h){b.progress("_mapSpawn"+d+"_"+g+"_"+h+c[d].module,0);try{requirejs([c[d].module],function(f){void 0==a.spawns&&(a.spawns=[]);void 0==c[d].props&&(c[d].props={});void 0==c[d].props.x&&(c[d].props.x=g);void 0==c[d].props.y&&(c[d].props.y=h);a.spawns.push(new f(c[d].props));b.progress("_mapSpawn"+d+"_"+g+"_"+h+c[d].module,100)})}catch(f){console.warn("Spawn error:",f)}})(k,h.spawns,
l,c*this.tileSizeX,d*this.tileSizeY);return k};h.prototype.lock=function(){if(this._parseRequested){for(var a=new c({width:this.chunks[0].width,height:this.chunks[0].height,name:"__mapChunkBuffer"}),b=0,d=0,h,f=0;f<this.chunks.length;f++){this.chunks[f].alpha=1;for(a.setSize(this.chunks[f].width,this.chunks[f].height);b+this.chunks[f]._startTileX<this.chunks[f]._endTileX;){for(;d+this.chunks[f]._startTileY<this.chunks[f]._endTileY;)this.tiles[b+this.chunks[f]._startTileX]&&this.tiles[b+this.chunks[f]._startTileX][d+
this.chunks[f]._startTileY]&&(h=this.tiles[b+this.chunks[f]._startTileX][d+this.chunks[f]._startTileY],null!=h.data&&(a.context.drawImage(h.data,h.xOffset,h.yOffset,h.dataWidth,h.dataHeight,b*this.tileSizeX,d*this.tileSizeY,this.tileSizeX,this.tileSizeY),h._dataLocked=h.data,h.data=null)),d++;d=0;b++}this.chunks[f].loadBitmap(a.getURL())}a.kill();this.locked=!0}else this._lockRequested=!0};h.prototype.unlock=function(){if(this._lockRequested)this._lockRequested=!1;else{for(var a=0;a<this.chunks.length;a++)this.chunks[a].killBuffer(),
this.chunks[a].alpha=0;for(a=0;a<this.tiles.length;a++)for(var b=0;b<this.tiles[a].length;b++)this.tiles[a][b]&&this.tiles[a][b]._dataLocked&&(this.tiles[a][b].data=this.tiles[a][b]._dataLocked,this.tiles[a][b]._dataLocked=null);this.locked=!1}};h.prototype._prepareChunks=function(){for(var a=null,b=Arstider.ceil(h.MIN_CHUNK_SIZE/this.tileSizeX),c=Arstider.ceil(this.parent.mapWidth/b),d=Arstider.ceil(h.MIN_CHUNK_SIZE/this.tileSizeY),l=Arstider.ceil(this.parent.mapHeight/d),r=0,u=0;r<c;){for(;u<l;)a=
new f({x:r*b*this.tileSizeX,y:u*d*this.tileSizeY,height:d*this.tileSizeY,width:b*this.tileSizeX}),a._startTileX=r*b*this.tileSizeX,a._startTileY=u*d*this.tileSizeY,a._endTileX=a._startTileX+b,a._endTileY=a._startTileY+d,a._numTilesX=b,a._numTilesY=d,a._endTileX>this.parent.mapWidth&&(a.width-=(a._endTileX-this.parent.mapWidth)*this.tileSizeX,a._endTileX=this.parent.mapWidth),a._endTileY>this.parent.mapHeight&&(a.height-=(a._endTileY-this.parent.mapHeight)*this.tileSizeY,a._endTileY=this.parent.mapHeight),
this.chunks.push(a),u++;u=0;r++}};h.prototype._parseFOV=function(a){this.children=[];a=a||this.parent._getRenderZone();var b,c,d=[];for(b=a[0];b<a[1];b++)if(0<=b&&b<=this.parent.mapWidth)for(void 0==this.tiles[b]&&(this.tiles[b]=[]),c=a[2];c<a[3];+c++)0<=c&&c<=this.parent.mapHeight&&(void 0==this.tiles[b][c]&&(this.tiles[b][c]=this._createTile(b,c)),this.locked||null!=this.tiles[b][c].data&&(this.children[this.children.length]=this.tiles[b][c]),this.tiles[b][c].spawns&&0!=this.tiles[b][c].spawns.length&&
(d=d.concat(this.tiles[b][c].spawns)));if(this.locked)for(b=0;b<this.chunks.length;b++)this.chunks[b]._startTileX<a[1]&&this.chunks[b]._endTileX>a[0]&&this.chunks[b]._startTileY<a[3]&&this.chunks[b]._endTileY>a[2]&&(this.children[this.children.length]=this.chunks[b]);this.children=this.children.concat(d)};h.prototype.update=function(){this._parseRequested?this._parseFOV():this.cancelBubble()};return h});
define("Arstider/commons/GridMap",["Arstider/commons/GridLayer","Arstider/DisplayObject","Arstider/Viewport"],function(f,d,c){function b(a){Arstider.Super(this,d);this.layers={};this.mapWidth=parseInt(a.width);this.mapHeight=parseInt(a.height);this.fov=parseInt(a.fov);this.tileSizeX=parseInt(a.tileSizeX);this.tileSizeY=parseInt(a.tileSizeY);this.width=this.mapWidth*this.tileSizeX;this.height=this.mapHeight*this.tileSizeY;this.__renderZone=[];this.__safeKey=2*Math.random();for(var b in a.layers)this.addLayer(b,
a.layers[b])}Arstider.Inherit(b,d);b.prototype.addLayer=function(a,b){this.layers[a]=new f(a,b,this.tileSizeX,this.tileSizeY,this.mapWidth,this.mapHeight);this.addChild(this.__safeKey,this.layers[a])};b.prototype.removeLayer=function(a){this.removeChild(this.layers[a]);delete this.layers[a]};b.prototype.getTilesOf=function(a,b){for(var c=[],d=0,f=0,k=Arstider.floor(b.global.x/this.tileSizeX),l=Arstider.floor(b.global.y/this.tileSizeY),r=Arstider.ceil(b.global.width/this.tileSizeX),u=Arstider.ceil(b.global.height/
this.tileSizeY);d<r;){for(;f<u;)this.layers[a][k+d]&&this.layers[a][k+d][l+f]&&c.push(this.layers[a][k+d][l+f]),f++;f=0;d++}return c};b.prototype.canStep=function(a,b,c){a=this.getTile(a,b,c);return null!=a?1===!a.__collidable:!0};b.prototype.getTile=function(a,b,c){return this[a].tiles[b]?this[a].tiles[b][c]:null};b.prototype._getRenderZone=function(){this.__renderZone[0]=-1*Arstider.ceil(this.global.x/this.tileSizeX)-this.fov;this.__renderZone[1]=this.__renderZone[0]+(Arstider.ceil(c.maxWidth/this.tileSizeX)+
2*this.fov);this.__renderZone[2]=-1*Arstider.ceil(this.global.y/this.tileSizeY)-this.fov;this.__renderZone[3]=this.__renderZone[2]+(Arstider.ceil(c.maxHeight/this.tileSizeY)+2*this.fov);return this.__renderZone};b.prototype.addChild=function(a,b){var c,d=0;if(a===this.__safeKey){b.parent=this;if(0!=this.children.length)for(c=0;c<this.children.length;c++){if(this.children[c].index>b.index&&d<=b.index){this.children.splice(c,0,b);return}d=this.children[c].index}this.children.push(b)}else 0<Arstider.verbose&&
console.warn("Arstider.GridMap.addChild: operation was cancelled, cannot addChild on a GridMap object, must perform operation on a GridLayer")};return b});
define("Arstider/commons/Input",["Arstider/Tag"],function(f){function d(c){this.enabled=Arstider.checkIn(c.enabled,!0);c.tag=c.label?"label":"input";Arstider.Super(this,f,c);var b;c.label?(this._tag.innerHTML=c.label,b=window.document.createElement("input"),b.id=this.name+"_input",this._tag.appendChild(b)):b=this._tag;b.type=c.password?"password":"text";c.className&&(b.className=c.className);c.placeholder&&(b.placeholder=c.placeholder);c.size&&(b.size=c.size);this.enabled||(this.enabled=!0,this.disable())}
Arstider.Inherit(d,f);d.prototype.enable=function(){if(!this.enabled){this.enabled=!0;var c=this.getField();c.classList.remove("disabled");delete c.readonly;c.disabled=!1}};d.prototype.disable=function(){if(this.enabled){this.enabled=!1;var c=this.getField();c.classList.add("disabled");c.readonly="readonly";c.disabled=!0}};d.prototype.attr=function(c,b){this.getField()[c]=b};d.prototype.style=function(c,b){this.getField().style[c]=b};d.prototype.value=function(){return this.getField().value};d.prototype.getField=
function(){return"input"==this._tag.tagName?this._tag:this._tag.children[0]};return d});
(function(){function f(c){c=c.toString();return c.substring(c.indexOf("function")+9,c.indexOf("("))}var d=null;define("Arstider/commons/Pool",[],function(){function c(){this._sets={};this.useKey="__inUse";this._caps={};this._pending={}}if(null!=d)return d;c.prototype.prealloc=function(b,a,c){a-=1;var d=f(b);for(a;0<=a;a--)this._alloc(d,b);this._caps[d]=c||9999;return this};c.prototype._alloc=function(b,a){var c=new a;c[this.useKey]=!1;b in this._sets?void 0==this._sets[b][0]?this._sets[b][0]=c:this._sets[b].push(c):
this._addSet(b,c);return c};c.prototype.free=function(b,a){var c=0,d=f(b.constructor);if(d in this._sets)for(c=this._sets[d].length,c;0<=c;c--)if(this._sets[d][c]==b){a?this._sets[d].splice(c,1):0<this._pending[d].length?this._pending[d].shift()(this._sets[d][c]):this._sets[d][c][this.useKey]=!1;break}return this};c.prototype.get=function(b,a){var c=0,d=f(b);if(d in this._sets)for(c=this._sets[d].length-1,c;0<=c;c--)!1==this._sets[d][c][this.useKey]&&(this._sets[d][c][this.useKey]=!0,a(this._sets[d][c]));
void 0==this._sets[d]||this._sets[d].length<this._caps[d]?a(this._alloc(d,b)):this._pending[d].push(a)};c.prototype._addSet=function(b,a){this._sets[b]=[a];this._pending[b]=[]};c.prototype.removeSet=function(b){delete this._sets[f(b)]};return d=new c})})();
define("Arstider/commons/Popup",["Arstider/DisplayObject","Arstider/Viewport"],function(f,d){function c(b){Arstider.Super(this,f,b);b=b||Arstider.emptyObject;this.overlay=new f({name:"overlay",alpha:0});this.addChild(this.overlay);var a=this,c=Arstider.checkIn(b.bg,Arstider.checkIn(b.image,null)),g=Arstider.checkIn(b.popup,null);if(null!=c&&"string"===typeof c){var m=new f({name:"backgroundOverlay",onclick:function(){a.hidePopup()}});m.loadBitmap(c);this.overlay.addChild(m)}if(null!=g){var p=new f({name:"PopupBackground",
onclick:function(){Arstider.cancelBubble()},onload:function(){p.x=d.maxWidth/2-p.width/2;p.y=d.maxHeight/2-p.height/2}});"string"===typeof g?p.loadBitmap(g):(g.data=Arstider.checkIn(b.popup.image,Arstider.checkIn(b.popup.bg,null)),p.loadBitmap(g.data),p.x=g.x,p.y=g.y);this.overlay.addChild(p)}}Arstider.Inherit(c,f);c.prototype.showPopup=function(){this.overlay.alpha=1};c.prototype.hidePopup=function(){this.overlay.alpha=0};return c});
define("Arstider/commons/Radio",["Arstider/DisplayObject","Arstider/TextField"],function(f,d){function c(c){Arstider.Super(this,f,c);var g=this;this.disabled=Arstider.checkIn(c.disabled,!1);this.isCheckBox=Arstider.checkIn(c.checkBox,!1);var m=new f({name:"btnRadio"+this.name,onclick:function(){this.disabled||m.disabled||g.changeState(m)}});m.id=a;m.disabled=this.disabled;m.name=Arstider.checkIn(c.name,"btnRadio"+a);m.image=Arstider.checkIn(c.image,Arstider.checkIn(c.btnRadio,Arstider.checkIn(c.data,
null)));m.imageCheck=Arstider.checkIn(c.imageCheck,Arstider.checkIn(c.btnRadioCheck,Arstider.checkIn(c.dataCheck,null)));m.imageDisabled=Arstider.checkIn(c.imageDisabled,Arstider.checkIn(c.btnRadioDisabled,Arstider.checkIn(c.dataDisabled,null)));m.imageDisabledCheck=Arstider.checkIn(c.imageDisabledCheck,Arstider.checkIn(c.btnRadioDisabledCheck,Arstider.checkIn(c.dataDisabledCheck,null)));c.defaultChecked&&(m.defaultChecked=m.checked=c.defaultChecked);this.btnRadio=this.updateState(m);this.addChild(this.btnRadio);
if(c.label){var p=new d({strokeText:c.strokeText||!1});this.btnRadio.addChild(p);p.name=Arstider.checkIn(c.label.name,"labelBtnRadio"+a);p.width=Arstider.checkIn(c.label.width,50);p.x=Arstider.checkIn(c.label.x,0-p.width-4);p.y=Arstider.checkIn(c.label.y,m.height/2);p.font=Arstider.checkIn(c.label.font,Arstider.checkIn(c.font),null);p.fontDisabled=Arstider.checkIn(c.label.fontDisabled,Arstider.checkIn(c.fontDisabled),null);c.label.text?p.setText(c.label.text):"string"===typeof c.label&&p.setText(c.label);
m.disabled?(p.fontDisabled||(p.fontDisabled=p.font),p.setFont(p.fontDisabled)):p.setFont(p.font);this.btnRadio.label=p}if(c.icon){var k=new f({onload:function(){k.x=Arstider.checkIn(c.icon.x,0-k.width-6);k.y=Arstider.checkIn(c.icon.y,0-k.height/2+m.height/2)}});this.btnRadio.addChild(k);k.name=Arstider.checkIn(c.icon.name,"iconBtnRadio"+a);k.image="string"===typeof c.icon?c.icon:Arstider.checkIn(c.icon.image,Arstider.checkIn(c.icon.data,null));k.imageDisabled="string"===typeof c.iconDisabled?c.iconDisabled:
Arstider.checkIn(c.icon.imageDisabled,Arstider.checkIn(c.icon.dataDisabled,null));!m.disabled&&k.image?k.loadBitmap(k.image):(k.imageDisabled||(k.imageDisabled=k.image),k.loadBitmap(k.imageDisabled));this.btnRadio.icon=k}b[m.name]||(b[m.name]={});b[m.name][m.id]=m;a++}var b={},a=0;Arstider.Inherit(c,f);c.prototype.getDisabled=function(){return this.btnRadio.disabled};c.prototype.setDisabled=function(a){this.btnRadio.disabled=a;this.updateState(this.btnRadio)};c.prototype.getChecked=function(){return this.btnRadio.checked};
c.prototype.setChecked=function(a){a?this.btnRadio.disabled?(this.btnRadio.checked=!0,this.updateState(this.btnRadio)):this.isCheckBox?(this.btnRadio.checked=!0,this.updateState(this.btnRadio)):(this.btnRadio.checked=!0,this.changeState(this.btnRadio)):(this.btnRadio.checked=!1,this.updateState(this.btnRadio))};c.prototype.changeState=function(c){if(c.checked)c.checked&&this.isCheckBox&&!c.disabled&&(c.loadBitmap(c.image),c.checked=!1);else if(!c.disabled){for(a in b[c.name])a==c.id||b[c.name][a].disabled||
(b[c.name][a].checked=!1,b[c.name][a].loadBitmap(b[c.name][a].image));c.loadBitmap(c.imageCheck);c.checked=!0}};c.prototype.updateState=function(a){a.disabled?(a.checked&&null!=a.imageDisabledCheck?a.loadBitmap(a.imageDisabledCheck):null!=a.imageDisabled&&a.loadBitmap(a.imageDisabled),a.icon&&a.icon.loadBitmap(a.icon.imageDisabled),a.label&&a.label.setFont(a.label.fontDisabled)):(null!=a.image&&null!=a.imageCheck&&(a.checked?a.loadBitmap(a.imageCheck):a.loadBitmap(a.image)),a.icon&&a.icon.loadBitmap(a.icon.image),
a.label&&a.label.setFont(a.label.font));return a};return c});
define("Arstider/commons/Random",[],function(){function f(d){this.seed=d&&!isNaN(d)?d:Arstider.timestamp();this.j_=this.i_=0;this.S_=[];this.init((""+d).split(""))}f.prototype.init=function(d){var c,b,a;for(c=0;256>c;++c)this.S_[c]=c;for(c=b=0;256>c;++c)b=b+this.S_[c]+d[c%d.length]&255,a=this.S_[c],this.S_[c]=this.S_[b],this.S_[b]=a;this.j_=this.i_=0};f.prototype.next=function(){var d;this.i_=this.i_+1&255;this.j_=this.j_+this.S_[this.i_]&255;d=this.S_[this.i_];this.S_[this.i_]=this.S_[this.j_];this.S_[this.j_]=
d;return this.S_[d+this.S_[this.i_]&255]};return f});
define("Arstider/commons/RingFiller",["Arstider/Entity","Arstider/Bitmap","Arstider/Buffer"],function(f,d,c){function b(a){Arstider.Super(this,f,a);this.centerRadius=Arstider.checkIn(a.centerRadius,10);this.outsideRadius=Arstider.checkIn(a.outsideRadius,20);this.data=new c;this.width=this.height=this.dataWidth=this.dataHeight=2*this.outsideRadius;this._pcent=0;this.startAngle=Arstider.checkIn(a.startAngle,0);this.counterClockwise=Arstider.checkIn(a.counterClockwise,!1);a.texture&&(this.texture=new d({url:a.texture,
callback:this._draw.bind(this)}));a.fillStyle&&(this.fillStyle=a.fillStyle)}Arstider.Inherit(b,f);b.prototype._draw=function(){var a=this.startAngle/360*2*Math.PI;this.data.setSize(this.width,this.height);this.data.context.beginPath();this.data.context.moveTo(this.outsideRadius,this.outsideRadius);this.data.context.arc(this.outsideRadius,this.outsideRadius,this.outsideRadius,a,2*Math.PI*this._pcent-a,this.counterClockwise);this.data.context.lineTo(this.outsideRadius,this.outsideRadius);this.data.context.clip();
this.texture?this.data.context.drawImage(this.texture.data,0.5*(this.width-this.texture.width),0.5*(this.height-this.texture.height)):(this.data.context.fillStyle=this.fillStyle||"red",this.data.context.fill());this.data.context.closePath();this.data.context.beginPath();this.data.context.arc(this.outsideRadius,this.outsideRadius,this.centerRadius,0,2*Math.PI,!1);this.data.context.clip();this.data.context.clearRect(0,0,2*this.outsideRadius,2*this.outsideRadius);this.data.context.closePath()};b.prototype.setProgress=
function(a){this._pcent=a;this._draw()};return b});
define("Arstider/commons/Scrollbar",["Arstider/DisplayObject","Arstider/Mouse","Arstider/Events"],function(f,d,c){function b(a){Arstider.Super(this,f,a);var b=this;this.orientation=Arstider.checkIn(a.orientation,Arstider.checkIn(a.scrollbarOrientation,"default"));this.focus=!1;this.testMouse=!0;var c=new f({name:this.name+"_scrollbar",alpha:0,onload:function(){"default"==b.orientation&&(b.orientation=c.width>c.height?"horizontale":"verticale",b.scrollHeight=c.height,b.scrollWidth=c.width)}});c.imageBar=
Arstider.checkIn(a.scrollbar,Arstider.checkIn(a.image,Arstider.checkIn(a.data,Arstider.checkIn(a.imageBar,null))));c.imageHandle=Arstider.checkIn(a.handle,Arstider.checkIn(a.imageHandle,Arstider.checkIn(a.dataHandle,null)));c.imageBarDisabled=Arstider.checkIn(a.scrollbarDisabled,Arstider.checkIn(a.imageDisabled,Arstider.checkIn(a.dataDisabled,Arstider.checkIn(a.imageBarDisabled,c.imageBar))));c.imageHandleDisabled=Arstider.checkIn(a.handleDisabled,Arstider.checkIn(a.imageHandleDisabled,Arstider.checkIn(a.dataHandleDisabled,
c.imageHandle)));c.sizeParent=Arstider.checkIn(a.maxSize,Arstider.checkIn(a.maxValue,Arstider.checkIn(a.sizeParent,100)));c.defaultValue=Arstider.checkIn(a.value,Arstider.checkIn(a.defaultValue,0));c.disabled=Arstider.checkIn(a.disabled,!1);c.min=0;if(c.imageBar&&c.imageHandle){var d=new f({name:this.name+"_handle",onload:function(){setTimeout(function(){"horizontale"==b.orientation?(b.handleSize||(b.handleSize=d.width),c.max=100*c.sizeParent/c.width,b.resizeHandle(c),d.y=d.height,p.y=-(d.height/
2-c.height/2)-d.height,p.width=c.width-d.width,p.height=k.height=d.height,k.y=-(d.height/2-c.height/2),k.width=c.width,c.defaultValue>c.width-d.width&&(c.defaultValue=c.width-d.width)):"verticale"==b.orientation&&(b.handleSize||(b.handleSize=d.height),c.max=100*c.sizeParent/c.height,b.resizeHandle(c),d.x=d.width,p.x=-(d.width/2-c.width/2)-d.width,p.height=c.height-d.height,p.width=k.width=d.width,k.x=-(d.width/2-c.width/2),k.height=c.height,c.defaultValue>c.height-d.height&&(c.defaultValue=c.height-
d.height));b.setValue(c.defaultValue)},1)}});c.disabled?(c.loadBitmap(c.imageBarDisabled),d.loadBitmap(c.imageHandleDisabled)):(c.loadBitmap(c.imageBar),d.loadBitmap(c.imageHandle));var p=new f({name:this.name+"_containerDrag"});this.addChild(p);var k=new f({name:this.name+"_containerClick",onpress:function(){c.disabled||(b.startDrag(d),b.focus=!0)},onrelease:function(){b.stopDrag(d)}});this.addChild(k);p.addChild(d)}c.handle=d;this.scrollbar=c;this.startMouseWheel(this.scrollbar)}Arstider.Inherit(b,
f);b.prototype.getDisabled=function(){return this.scrollbar.disabled};b.prototype.setDisabled=function(a){this.scrollbar.disabled=a;this.updateState(this.scrollbar)};b.prototype.getValue=function(a){if("horizontale"==this.orientation){if("px"==a||void 0==a)return this.scrollbar.handle.x;if("%"==a)return Math.round(100*this.scrollbar.handle.x/(this.scrollbar.width-this.scrollbar.handle.width))}else if("verticale"==this.orientation){if("px"==a||void 0==a)return this.scrollbar.handle.y;if("%"==a)return Math.round(100*
this.scrollbar.handle.y/(this.scrollbar.height-this.scrollbar.handle.height))}};b.prototype.setValue=function(a,b){"horizontale"==this.orientation?"px"==b||void 0==b?this.scrollbar.handle.x=a:"%"==b&&(this.scrollbar.handle.x=a*(this.scrollbar.width-this.scrollbar.handle.width)/100):"verticale"==this.orientation&&("px"==b||void 0==b?this.scrollbar.handle.y=a:"%"==b&&(this.scrollbar.handle.y=a*(this.scrollbar.height-this.scrollbar.handle.height)/100))};b.prototype.getIsDragged=function(){return this.scrollbar.handle._dragged};
b.prototype.setFocus=function(a){this.focus=a};b.prototype.getSizeParent=function(){return this.scrollbar.sizeParent};b.prototype.setSizeParent=function(a){this.scrollbar.sizeParent=a;this.scrollbar.defaultValue=this.orientation?this.scrollbar.handle.x:this.scrollbar.handle.y;this.scrollbar.handle.onload()};b.prototype.startDrag=function(a){a._dragOffsetX=0;a._dragOffsetY=0;a._dragged=!0;"horizontale"==this.orientation?a._dragOffsetX=a.parent.global.x+a.width/2:"verticale"==this.orientation&&(a._dragOffsetY=
a.parent.global.y+a.height/2);a._boundDrag=!0};b.prototype.stopDrag=function(a){void 0!=a&&a._dragged&&setTimeout(function(){a._dragged=!1;a._dragOffsetX=0;a._dragOffsetY=0;a._boundDrag=!1},0)};b.prototype.updateState=function(a){this.scrollbar.defaultValue=this.orientation?this.scrollbar.handle.x:this.scrollbar.handle.y;a.loadBitmap(a.disabled?a.imageBarDisabled:a.imageBar);a.handle.loadBitmap(a.disabled?a.imageHandle:a.imageHandleDisabled)};b.prototype.resizeHandle=function(a){var b="horizontale"==
this.orientation?!0:!1,c=this.handleSize,d=c-c*c/a.sizeParent;if(!(0>=d)){a.handle.removeChildren();var p=new f({name:this.name+"_subHandle1",alpha:1});p.loadSection(a.disabled?a.imageHandleDisabled:a.imageHandle,0,0,b?c/2-d/2:a.handle.width,b?a.handle.height:c/2-d/2);a.handle.addChild(p);var k=new f({name:this.name+"_subHandle2",x:b?p.width:0,y:b?0:p.height,alpha:1});k.loadSection(a.disabled?a.imageHandleDisabled:a.imageHandle,b?p.width+d:0,b?0:p.height+d,b?c-d-p.width:p.width,b?p.height:c-d-p.height);
a.handle.addChild(k);a.handle.loadSection(0,0,0,0,0);a.handle.width=b?p.width+k.width:p.width;a.handle.height=b?p.height:p.height+k.height}};b.prototype.startMouseWheel=function(a){var b=this;c.bind("Mouse.wheel",function(c){if(b.focus&&!b.scrollbar.disabled)if("horizontale"==b.orientation){var d=0>=a.handle.x-1&&0>c;a.handle.x+1>=a.width-a.handle.width&&0<c||d||(a.handle.x+=2*c)}else"verticale"==b.orientation&&(d=0>=a.handle.y-1&&0<c,a.handle.y+1>=a.height-a.handle.height&&0>c||d||(a.handle.y-=2*
c))})};b.prototype.update=function(){!d.isPressed()&&this.scrollbar.handle._dragged&&this.stopDrag(this.scrollbar.handle);if(d.isPressed()&&this.testMouse){this.testMouse=!1;var a=d.x()>this.parent.global.x+this.parent.width||d.x()<this.parent.global.x,b=d.y()>this.parent.global.y+this.parent.height||d.y()<this.parent.global.y;(a||b)&&this.focus?this.focus=!1:a||b||this.focus||(this.focus=!0)}d.isPressed()||this.testMouse||(this.testMouse=!0)};return b});
define("Arstider/commons/Slider",["Arstider/DisplayObject","Arstider/Mouse"],function(f,d){function c(a){Arstider.Super(this,f,a);var c=this;d.x();d.y();var g=new f({name:"slider"+b,onload:function(){"default"==g.orientation&&(g.orientation=g.width>g.height?m.orientation="horizontale":m.orientation="verticale",this.slider&&(this.slider.orientation=g.orientation))}});g.disabled=Arstider.checkIn(a.disabled,!1);g.imageBar=Arstider.checkIn(a.slider,Arstider.checkIn(a.image,Arstider.checkIn(a.data,Arstider.checkIn(a.imageBar,
null))));g.imageHandle=Arstider.checkIn(a.handle,Arstider.checkIn(a.imageHandle,Arstider.checkIn(a.dataHandle,null)));g.imageHandle2=Arstider.checkIn(a.handle2,Arstider.checkIn(a.imageHandle2,Arstider.checkIn(a.dataHandle2,null)));g.imageBarDisabled=Arstider.checkIn(a.sliderDisabled,Arstider.checkIn(a.imageDisabled,Arstider.checkIn(a.dataDisabled,Arstider.checkIn(a.imageBarDisabled,g.imageBar))));g.imageHandleDisabled=Arstider.checkIn(a.handleDisabled,Arstider.checkIn(a.imageHandleDisabled,Arstider.checkIn(a.dataHandleDisabled,
g.imageHandle)));g.imageHandle2Disabled=Arstider.checkIn(a.handle2Disabled,Arstider.checkIn(a.imageHandle2Disabled,Arstider.checkIn(a.dataHandle2Disabled,g.imageHandle2)));g.max=Arstider.checkIn(a.max,Arstider.checkIn(a.maxValue,100));g.min=Arstider.checkIn(a.min,Arstider.checkIn(a.minValue,0));g.orientation=Arstider.checkIn(a.orientation,Arstider.checkIn(a.sliderOrientation,"default"));g.defaultValue=Arstider.checkIn(a.value,Arstider.checkIn(a.defaultValue,0));g.defaultValues=Arstider.checkIn(a.values,
Arstider.checkIn(a.defaultValues,[0,100]));if(g.imageBar&&g.imageHandle){var m=new f({name:"handle"+b,onpress:function(){g.imageHandle2&&c.startDrag(m)},onload:function(){"horizontale"==g.orientation?(m.y=m.height,k.y=-(m.height/2-g.height/2)-m.height,k.width=g.width-m.width,k.height=l.height=m.height,l.y=-(m.height/2-g.height/2),l.width=g.width):"verticale"==g.orientation&&(m.x=m.width,k.x=-(m.width/2-g.width/2)-m.width,k.height=g.height-m.height,k.width=l.width=m.width,l.x=-(m.width/2-g.width/2),
l.height=g.height);g.imageHandle2?c.setValue(g.defaultValues[0]):c.setValue(g.defaultValue)}});if(g.imageHandle2)var p=new f({name:"handle2"+b,onpress:function(){g.disabled||p.collides(m.x,m.y,m.width,m.height)||c.startDrag(p)},onload:function(){"horizontale"==g.orientation?(p.y=p.height,k.y=-(p.height/2-g.height/2)-p.height,k.width=g.width-p.width,k.height=l.height=p.height,l.y=-(p.height/2-g.height/2),l.width=g.width):"verticale"==g.orientation&&(p.x=p.width,k.x=-(p.width/2-g.width/2)-p.width,k.height=
g.height-p.height,k.width=l.width=p.width,l.x=-(p.width/2-g.width/2),l.height=g.height);c.setValue(g.defaultValues[1],2)}});g.disabled?(g.loadBitmap(g.imageBarDisabled),m.loadBitmap(g.imageHandleDisabled),g.imageHandle2&&p.loadBitmap(g.imageHandle2Disabled)):(g.loadBitmap(g.imageBar),m.loadBitmap(g.imageHandle),g.imageHandle2&&p.loadBitmap(g.imageHandle2));var k=new f({name:"containerDrag"+b});this.addChild(k);m.orientation=g.orientation;m.globalX=Arstider.checkIn(a.x,0);m.globalY=Arstider.checkIn(a.y,
0);var l=new f({name:"containerClick"+b,onpress:function(){g.disabled||g.imageHandle2||c.startDrag(m)},onrelease:function(){c.stopDrag(m);c.stopDrag(p)},onleave:function(){c.stopDrag(m);c.stopDrag(p)}});this.addChild(l);g.imageHandle2&&k.addChild(p);k.addChild(m)}g.handle=m;g.imageHandle2&&(p.globalX=m.globalX,p.globalY=m.globalY,p.orientation=m.orientation,g.handle2=p);this.slider=g;b++}var b=0;Arstider.Inherit(c,f);c.prototype.getDisabled=function(){return this.slider.disabled};c.prototype.setDisabled=
function(a){this.slider.disabled=a;this.updateState(this.slider)};c.prototype.getValue=function(){return Math.round(this.slider.handle.x*(this.slider.max-this.slider.min)/(this.slider.width-this.slider.handle.width))};c.prototype.setValue=function(a,b){void 0==b&&(b=1);1==b?"horizontale"==this.slider.orientation?this.slider.handle.x=a*(this.slider.width-this.slider.handle.width)/(this.slider.max-this.slider.min):"verticale"==this.slider.orientation&&(this.slider.handle.y=a*(this.slider.height-this.slider.handle.height)/
(this.slider.max-this.slider.min)):2==b&&("horizontale"==this.slider.orientation?this.slider.handle2.x=a*(this.slider.width-this.slider.handle.width)/(this.slider.max-this.slider.min):"verticale"==this.slider.orientation&&(this.slider.handle2.y=a*(this.slider.height-this.slider.handle.height)/(this.slider.max-this.slider.min)))};c.prototype.startDrag=function(a){a._dragOffsetX=0;a._dragOffsetY=0;a._dragged=!0;"horizontale"==a.orientation?a._dragOffsetX=a.globalX:"verticale"==a.orientation&&(a._dragOffsetY=
a.globalY);a._boundDrag=!0};c.prototype.stopDrag=function(a){void 0!=a&&a._dragged&&setTimeout(function(){a._dragged=!1;a._dragOffsetX=0;a._dragOffsetY=0;a._boundDrag=!1},0)};c.prototype.updateState=function(a){a.disabled?(a.loadBitmap(a.imageBarDisabled),a.handle.loadBitmap(a.imageHandleDisabled),a.imageHandle2&&a.handle2.loadBitmap(a.imageHandle2Disabled)):(a.loadBitmap(a.imageBar),a.handle.loadBitmap(a.imageHandle),a.imageHandle2&&a.handle2.loadBitmap(a.imageHandle2))};return c});
define("Arstider/commons/StateMachine",["Arstider/Events"],function(f){function d(){this.stack=[];this.prevState=null}d.prototype.update=function(){var c=this.getCurrentState();c.fct&&c.fct.apply(c.caller);c.evt&&this.prevState!=c&&f.broadcast(c.evt,c.caller);this.prevState=c;return this};d.prototype.popState=function(){this.stack.pop();return this};d.prototype.pushState=function(c,b,a){this.getCurrentState()!=c&&this.stack.push({fct:c,caller:Arstider.checkIn(b,this),evt:a});return this};d.prototype.getCurrentState=
function(){return 0<this.stack.length?this.stack[this.stack.length-1]:null};return d});
define("Arstider/contexts/Canvas2d",[],function(){function f(){this.maxDataSize=2048;this.safeMode=!0}f.prototype.init=function(d,c){c&&c()};f.prototype.save=function(d){d.save()};f.prototype.restore=function(d){d.globalAlpha=1;d.__savedShadowColor&&(d.shadowColor=d.__savedShadowColor);d.__savedShadowBlur&&(d.shadowBlur=d.__savedShadowBlur);d.__savedShadowOffsetX&&(d.shadowOffsetX=d.__savedShadowOffsetX);d.__savedShadowOffsetY&&(d.shadowOffsetY=d.__savedShadowOffsetY);d.__savedGlobalCompositeOperation&&
(d.globalCompositeOperation=d.__savedGlobalCompositeOperation);d.__savedShadowColor=null;d.__savedShadowBlur=null;d.__savedShadowOffsetX=null;d.__savedShadowOffsetY=null;d.__savedGlobalCompositeOperation=null};f.prototype.translate=function(d,c,b){d.translate(c,b)};f.prototype.transform=function(d,c,b,a,f,g,m){d.transform(c,b,a,f,g,m)};f.prototype.setTransform=function(d,c,b,a,f,g,m){d.setTransform(c,b,a,f,g,m)};f.prototype.scale=function(d,c,b){d.scale(c,b)};f.prototype.rotate=function(d,c){d.rotate(c*
Arstider.degToRad)};f.prototype.alpha=function(d,c){var b=d.globalAlpha*c;1<b&&(b=1);d.globalAlpha=b};f.prototype.clip=function(d,c,b,a,f){d.beginPath();d.rect(c,b,a,f);d.clip()};f.prototype.reset=function(d){d.setTransform(1,0,0,1,0,0)};f.prototype.setCompositionMode=function(d,c){d.__savedGlobalCompositeOperation=d.globalCompositeOperation;d.globalCompositeOperation=c};f.prototype.dropShadow=function(d,c,b,a,f){d.__savedShadowColor=d.shadowColor;d.__savedShadowBlur=d.shadowBlur;d.__savedShadowOffsetX=
d.shadowOffsetX;d.__savedShadowOffsetY=d.shadowOffsetY;d.shadowColor=f;d.shadowBlur=a;d.shadowOffsetX=c;d.shadowOffsetY=b};f.prototype.renderAt=function(d,c,b,a,f,g,m,p,k,l){if(this.safeMode){if(c instanceof Image||c instanceof HTMLCanvasElement){if(void 0==m||0>m)m=0;if(void 0==p||0>p)p=0;m>=c.width||p>=c.height?Arstider.log("Attempting to draw a sprite element using coordinates {x:"+m+", y:"+p+"} larger than the image size {width:"+c.width+", height:"+c.height+", type:'"+c.nodeName+"', id:'"+c.id+
"', src:'"+c.src+"'}"):c.width>this.maxDataSize||c.height>this.maxDataSize?Arstider.log("Maximum data size exceeded! {type:'"+c.nodeName+"', id:'"+c.id+"', src:'"+c.src+"'}"):0>=f?Arstider.log("Attempting to draw an image with negative width {type:'"+c.nodeName+"', id:'"+c.id+"', src:'"+c.src+"'}"):0>=g?Arstider.log("Attempting to draw an image with negative height {type:'"+c.nodeName+"', id:'"+c.id+"', src:'"+c.src+"'}"):(void 0==k&&(k=f),0>=k?Arstider.log("The provided destination width is inferior or equal to 0 : "+
k):(k+m>c.width&&(k=c.width-m),void 0==l&&(l=g),0>=l?Arstider.log("The provided destination height is inferior or equal to 0 : "+l):(l+p>c.height&&(l=c.height-p),d.drawImage(c,m,p,k,l,b,a,f,g))))}}else d.drawImage(c,m,p,k,l,b,a,f,g)};f.prototype.debugOutline=function(d,c,b,a,f,g){var m=d.shadowColor,p=d.globalAlpha,k=d.strokeStyle,l=d.lineWidth;d.shadowColor="transparent";d.globalAlpha=0.8;d.lineWidth=1;d.strokeStyle=g;d.strokeRect(c,b,a,f);d.globalAlpha=p;d.shadowColor=m;d.strokeStyle=k;d.lineWidth=
l};f.prototype.debugOutlineComplex=function(d,c,b,a,f){if(a){var g=d.shadowColor,m=d.globalAlpha,p=d.strokeStyle,k=d.lineWidth;d.shadowColor="transparent";d.globalAlpha=0.9;d.lineWidth=1;d.strokeStyle=f;d.beginPath();d.moveTo(a[0],a[1]);d.lineTo(a[2],a[3]);d.lineTo(a[4],a[5]);d.lineTo(a[6],a[7]);d.lineTo(a[0],a[1]);d.stroke();d.closePath();d.lineWidth=3;d.strokeStyle="white";d.beginPath();d.moveTo(c-5,b);d.lineTo(c+5,b);d.moveTo(c,b-5);d.lineTo(c,b+5);d.stroke();d.closePath();d.globalAlpha=m;d.shadowColor=
g;d.strokeStyle=p;d.lineWidth=k}};f.prototype.clear=function(d,c,b,a,f){d.clearRect(c,b,a,f)};return new f});
define("Arstider/contexts/MatrixTransform",[],function(){function f(d,c){this.pencil=d;this.context=c;this.matrix=this.baseMatrix=[1,0,0,1,0,0];this.stack=[]}f.prototype.setContext=function(d){this.pencil=d};f.prototype.getMatrix=function(){return this.matrix};f.prototype.setMatrix=function(d){this.matrix=[d[0],d[1],d[2],d[3],d[4],d[5]]};f.prototype.cloneMatrix=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};f.prototype.save=function(){var d=this.cloneMatrix(this.getMatrix());this.stack.push(d);
this.pencil&&this.pencil.save(this.context)};f.prototype.restore=function(){if(0<this.stack.length){var d=this.stack.pop();this.setMatrix(d)}this.pencil&&this.pencil.restore(this.context)};f.prototype.reset=function(){this.setMatrix(this.baseMatrix);this.setTransform(!0)};f.prototype.setTransform=function(d){this.pencil&&(this.matrix!=this.baseMatrix||d)&&this.pencil.setTransform(this.context,this.matrix[0],this.matrix[1],this.matrix[2],this.matrix[3],this.matrix[4],this.matrix[5])};f.prototype.translate=
function(d,c){this.matrix[4]+=this.matrix[0]*d+this.matrix[2]*c;this.matrix[5]+=this.matrix[1]*d+this.matrix[3]*c};f.prototype.rotate=function(d){var c=Math.cos(d);d=Math.sin(d);var b=this.matrix[1]*c+this.matrix[3]*d,a=this.matrix[0]*-d+this.matrix[2]*c,f=this.matrix[1]*-d+this.matrix[3]*c;this.matrix[0]=this.matrix[0]*c+this.matrix[2]*d;this.matrix[1]=b;this.matrix[2]=a;this.matrix[3]=f};f.prototype.scale=function(d,c){this.matrix[0]*=d;this.matrix[1]*=d;this.matrix[2]*=c;this.matrix[3]*=c};f.prototype.rotateAbout=
function(d,c,b){this.translate(c,b);this.rotate(d)};f.prototype.scaleAbout=function(d,c,b,a){this.translate(b,a);this.scale(d,c)};f.prototype.identity=function(){this.m=this.baseMatrix};f.prototype.multiply=function(d){var c=this.matrix[1]*d.m[0]+this.matrix[3]*d.m[1],b=this.matrix[0]*d.m[2]+this.matrix[2]*d.m[3],a=this.matrix[1]*d.m[2]+this.matrix[3]*d.m[3],f=this.matrix[0]*d.m[4]+this.matrix[2]*d.m[5]+this.matrix[4],g=this.matrix[1]*d.m[4]+this.matrix[3]*d.m[5]+this.matrix[5];this.matrix[0]=this.matrix[0]*
d.m[0]+this.matrix[2]*d.m[1];this.matrix[1]=c;this.matrix[2]=b;this.matrix[3]=a;this.matrix[4]=f;this.matrix[5]=g};f.prototype.invert=function(){var d=1/(this.matrix[0]*this.matrix[3]-this.matrix[1]*this.matrix[2]),c=-this.matrix[1]*d,b=-this.matrix[2]*d,a=this.matrix[0]*d,f=d*(this.matrix[2]*this.matrix[5]-this.matrix[3]*this.matrix[4]),g=d*(this.matrix[1]*this.matrix[4]-this.matrix[0]*this.matrix[5]);this.matrix[0]=this.matrix[3]*d;this.matrix[1]=c;this.matrix[2]=b;this.matrix[3]=a;this.matrix[4]=
f;this.matrix[5]=g};f.prototype.transformPoint=function(d,c){return{x:d*this.matrix[0]+c*this.matrix[2]+this.matrix[4],y:d*this.matrix[1]+c*this.matrix[3]+this.matrix[5]}};return f});
(function(){var f=null;define("Arstider/contexts/Webgl",["Arstider/contexts/webgl/Program"],function(d,c){function b(){this.enabled=!0}if(null!=f)return f;b.prototype.init=function(a,b){a.__program?a.__program.ready?b&&b():a.__program.compileCallback=b:(a.__program=new d(a),a.__program.setShaders(a.canvas.buffer.vertexShader,a.canvas.buffer.fragmentShader,b))};b.prototype._setRectangle=function(a,b,c,d,f){d=b+d;f=c+f;a.bufferData(a.ARRAY_BUFFER,new Float32Array([b,c,d,c,b,f,b,f,d,c,d,f]),a.STATIC_DRAW)};
b.prototype.setCompositionMode=function(){};b.prototype.debugOutline=function(){};b.prototype.dropShadow=function(){};b.prototype.transform=function(){};b.prototype.translate=function(){};b.prototype.rotate=function(){};b.prototype.alpha=function(){};b.prototype.save=function(){};b.prototype.restore=function(){};b.prototype.clear=function(a){a.clear(a.COLOR_BUFFER_BIT)};b.prototype._prepareAttribs=function(a){var b=a.getUniformLocation(a.__program.program,"u_resolution");a.uniform2f(b,a.canvas.width,
a.canvas.height);var b=a.getAttribLocation(a.__program.program,"a_position"),c=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a.STATIC_DRAW);a.enableVertexAttribArray(b);a.vertexAttribPointer(b,2,a.FLOAT,!1,0,0)};b.prototype.renderAt=function(a,b,c,d,f,k,l,r,u,y){this._prepareAttribs(a);l=Arstider.checkIn(l,c);py=Arstider.checkIn(r,d);u=Arstider.checkIn(u,f);y=Arstider.checkIn(y,k);a.__program.texture.update(b,u,y);this._setRectangle(a,
l,r,u,y);a.drawArrays(a.TRIANGLES,0,6)};return f=new b})})();
define("Arstider/contexts/webgl/Program",["Arstider/contexts/webgl/Shader","Arstider/contexts/webgl/Texture"],function(f,d){function c(b){this.fragmentShader=this.vertexShader=this.program=null;this.context=b;this.texture;this.compileCallbacks;this.ready=!1}c.prototype.setShaders=function(b,a,c){var d=this;this.compileCallback=c;f.get("vertex",b,function(a){d._compileShader.apply(d,[a])});f.get("fragment",a,function(a){d._compileShader.apply(d,[a])})};c.prototype._compileShader=function(b){if("fragment"===
b.type){if(this.fragmentShader=this.context.createShader(this.context.FRAGMENT_SHADER),this.context.shaderSource(this.fragmentShader,b.script),this.context.compileShader(this.fragmentShader),!this.context.getShaderParameter(this.fragmentShader,this.context.COMPILE_STATUS))return 0<Arstider.verbose&&console.warn("Arstider.contexts.webgl.Program : ",this.context.getShaderInfoLog(this.fragmentShader)),null}else if("vertex"===b.type&&(this.vertexShader=this.context.createShader(this.context.VERTEX_SHADER),
this.context.shaderSource(this.vertexShader,b.script),this.context.compileShader(this.vertexShader),!this.context.getShaderParameter(this.vertexShader,this.context.COMPILE_STATUS)))return 0<Arstider.verbose&&console.warn("Arstider.contexts.webgl.Program : ",this.context.getShaderInfoLog(this.vertexShader)),null;this._compile()};c.prototype._compile=function(){null!=this.vertexShader&&null!=this.fragmentShader&&(this.program=this.context.createProgram(this.context,[this.vertexShader,this.fragmentShader]),
this.context.attachShader(this.program,this.vertexShader),this.context.attachShader(this.program,this.fragmentShader),this.context.linkProgram(this.program),this.context.useProgram(this.program),this.context.clearColor(0,0,0,0),this.texture=new d(this.context,this.program),this.ready=!0,this.compileCallback&&this.compileCallback())};return c});
(function(){var f=null;define("Arstider/contexts/webgl/Shader",["Arstider/Request"],function(d){function c(){this.fragmentStore={};this.vertexStore={}}if(null!=f)return f;c.prototype.load=function(b,a,c){(new d({url:a,cache:!0,track:!0,type:"text",caller:f,mimeOverride:"text",callback:function(d){f[b+"Store"][a]={script:d,type:b};c&&c(f[b+"Store"][a])}})).send()};c.prototype.get=function(b,a,c){f[b+"Store"][a]?c&&c(f[b+"Store"][a]):f.load(b,a,c)};return f=new c})})();
define("Arstider/contexts/webgl/Texture",[],function(){function f(d,c){this.context=d;this.program=c}f.prototype.update=function(d){var c=this.context.getAttribLocation(this.program,"a_texCoord"),b=this.context.createBuffer();this.context.bindBuffer(this.context.ARRAY_BUFFER,b);this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this.context.STATIC_DRAW);this.context.enableVertexAttribArray(c);this.context.vertexAttribPointer(c,2,this.context.FLOAT,!1,0,0);
this.texture=this.context.createTexture();this.context.bindTexture(this.context.TEXTURE_2D,this.texture);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,"sharp"==this.context.renderStyle?this.context.NEAREST:this.context.LINEAR);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MAG_FILTER,"sharp"==this.context.renderStyle?this.context.NEAREST:this.context.LINEAR);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_S,
this.context.CLAMP_TO_EDGE);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_T,this.context.CLAMP_TO_EDGE);this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,this.context.RGBA,this.context.UNSIGNED_BYTE,d)};return f});
define("Arstider/core/Debugger",["Arstider/core/Performance","Arstider/Keyboard","Arstider/core/Profiler","Arstider/Events","Arstider/Viewport"],function(f,d,c,b,a){function h(a,b,c,d){if(c<a&&!d||c>b&&d)return"rgba(255, 0, 0, 1)";if(c>b&&!d||c<a&&d)return"rgba(0, 255, 0, 1)";d?(d=Arstider.chop((c-a)/(b-a)*255),a=255-Arstider.chop((c-a)/(b-a)*255)):(d=255-Arstider.chop((c-a)/(b-a)*255),a=Arstider.chop((c-a)/(b-a)*255));b=Arstider.floor(0.6*Arstider.max(d-(255-d),0)+0.6*Arstider.max(a-(255-a)));return"rgba("+
(d+b)+","+(a+b)+",0,1)"}function g(a){this.engine=a;this.profiler=c;window.document.body.appendChild(this.profiler);this.showFrames=!1;this.stepTimer=null;this.loggedFrames=0;var b=this;d.bind("d","down",function(){b.showFrames=!0});d.bind("d","up",function(){b.showFrames=!1});m=this}var m;g.prototype.step=function(){var a=this;this.stepTimer=setTimeout(function(){a.step.apply(a)},1E3);this.loggedFrames++;if(this.profiler.collapsed)this.profiler.detailsTab&&(this.profiler.detailsTab.innerHTML="");
else if("draw"===this.profiler.currentTab){if(0<f.frames){var b=this.createColumn("second_"+this.loggedFrames),c=Arstider.ceil((f.elements-f.draws)/f.frames),d=Arstider.ceil(f.draws/f.frames),g=Arstider.ceil(f.transforms/f.frames),m=Arstider.ceil((f.composition||0)/f.frames),w=c+d+g+m,x=0,v=this.createSection(c+" empty element(s)",0,Arstider.chop(c/w*300),"rgba(150,150,190,1)"),x=x+Arstider.chop(c/w*300);b.appendChild(v);c=this.createSection(d+" draw(s)",x,Arstider.chop(d/w*300),"rgba(200,200,50,1)");
x+=Arstider.chop(d/w*300);b.appendChild(c);d=this.createSection(g+" transformation(s)",x,Arstider.chop(g/w*300),"#f80");x+=Arstider.chop(g/w*300);b.appendChild(d);g=this.createSection(m+" composion mode change(s)",x,Arstider.chop(m/w*300),"#f03");x+=Arstider.chop(m/w*300);b.appendChild(g);m=window.document.createElement("div");m.title=f.frames;m.style.width="100%";m.style.height="4px";m.style.backgroundColor=h(30,65,f.frames);m.style.borderBottom="1px solid black";m.style.top=300-Arstider.chop(f.frames/
65*150)+"px";m.style.position="absolute";m.style.display="block";m.style.zIndex="99999";b.appendChild(m);this.profiler.detailsTab.appendChild(b)}}else for(m in this.profiler.detailsTab.innerHTML="",b=Arstider.bufferPool,b)w=b[m].getMemory()>>20,w=this.createBar(m,w,h(0.25,12,w,!0)),this.profiler.detailsTab.appendChild(w);this.profiler.minibar.innerHTML=["<span style='color:#FFFF99;'>FPS:",f.frames,"</span>&nbsp;|&nbsp;<span style='color:#99FF99;'>Memory:",Arstider.getMemory(),"Mb</span>&nbsp;|&nbsp;<span style='color:#FF9999;'>Draws:",
Arstider.ceil(f.draws/f.frames),"/ Entities:",Arstider.ceil(f.elements/f.frames),"</span>&nbsp;|&nbsp;<span style='color:#9999FF;'>Transformations:",Arstider.ceil(f.transforms/f.frames),"</span>&nbsp;|&nbsp;<span style='color:#FFFFFF;'>Buffers:",Arstider.countBuffers(),"</span>&nbsp;|&nbsp;<span style='color:#FFFFFF;'>Updates:",f.numUpdates,"</span>&nbsp;|&nbsp;<span style='color:#FFFFFF;'>Timers:",f.numTimers,"</span>&nbsp;|&nbsp;<span style='color:#FF0000;'>D-",f.skippedDraw,"</span>"].join("");
f.update()};g.prototype.drawFrames=function(){if(this.engine.debug&&this.showFrames){this.engine.context.fillStyle="rgba(0,0,0,0.3)";var b=0.5*(a.maxWidth-a.minWidth),c=0.5*(a.maxHeight-a.minHeight);this.engine.context.fillRect(0,0,b,a.maxHeight);this.engine.context.fillRect(a.maxWidth-b,0,b,a.maxHeight);this.engine.context.fillRect(b,0,a.maxWidth-2*b,c);this.engine.context.fillRect(b,a.maxHeight-c,a.maxWidth-2*b,c)}};g.prototype.createColumn=function(a){var b=window.document.createElement("div");
b.id=a;b.style.width="4px";b.style.height="300px";b.style.overflow="hidden";b.style.cssFloat="left";b.style.right="0px";b.style.display="block";b.style.position="relative";b.style.backgroundColor="#FFFFFF";return b};g.prototype.createSection=function(a,b,c,d){var f=window.document.createElement("div");f.title=a;f.style.width="100%";f.style.height=c+"px";f.style.backgroundColor=d;f.style.top=b+"px";f.style.position="absolute";f.style.display="block";return f};g.prototype.createBar=function(a,b,c){var d=
window.document.createElement("div");d.title=a+":"+b+"mb";d.style.width=25+b/24*75+"%";d.style.height="16px";d.style.backgroundColor=c;d.style.clear="both";d.style.marginBottom="3px";d.style.position="relative";d.style.overflow="hidden";d.style.display="block";d.style.paddingTop="4px";d.style.color="white";d.style.textShadow="1px 1px 0px rgba(0,0,0,0.7)";d.innerHTML=a;return d};g.prototype.init=function(){console.log("New instance of the Arstider Engine.");console.log("Build: "+this.engine.release+
" Version: "+this.engine.version);console.log("DEBUG MODE");console.log("##################################################");this.step(this)};Arstider.findElement=function(a,b){if(m.engine.debug){var c=[],d=0;if((b=b||m.engine.currentScreen)&&b.children)for(d;d<b.children.length;d++)a&&a!==b.children[d].name||c.push(b.children[d]),b.children[d].children&&(c=c.concat(Arstider.findElement.apply(m,[a,b.children[d]])));return 1==c.length?c[0]:c}};Arstider.debugDraw=function(a){if(m.engine.debug){var b=
null,b=window.document.getElementById("debugWindow");b||(b=window.document.createElement("canvas"),b.width=300,b.height=300,b.id="debugWindow",b.style.height="300px",b.style.width="300px",b.style.position="absolute",b.style.display="block",b.style.backgroundColor="green",b.style.bottom="0px",b.style.right="0px",b.style.zIndex=999,window.document.body.appendChild(b));b=b.getContext("2d");b.clearRect(0,0,300,300);b.drawImage(a,0,0,300,300)}};Arstider.debugBroadcast=function(a,c,d){m.engine.debug&&b.broadcast(a,
c,d)};return g});
define("Arstider/core/Performance",[],function(){function f(){this.lastLogicFrame=this.lastFrame=this.now=this.bufferMem=this.numBuffers=this.frameDelay=this.topFrames=this.skippedDraw=this.frames=this.transforms=this.elements=this.draws=this.deltaTime=0;this.skipTreshold=45;this._onTrack=!0;this.updateLogic=Arstider.emptyFunction}var d;f.prototype._stepLogic=function(){if(null!=d.updateLogic){var c=Arstider.timestamp();0==this.lastLogicFrame&&(this.lastLogicFrame=c);d.deltaTime=c-d.lastLogicFrame;
d.lastLogicFrame=c;c=Math.round(Math.max(0,1E3/Arstider.FPS-d.deltaTime));setTimeout(d._stepLogic,c);d.updateLogic(d.deltaTime)}};f.prototype.update=function(){d.frames>d.topFrames&&(d.topFrames=d.frames);d.draws=0;d.elements=0;d.transforms=0;d.frames=0};f.prototype.startStep=function(c){d._onTrack=1;!0==c&&(d.now=Arstider.timestamp(),0==d.lastFrame&&(d.lastFrame=d.now),d.now-d.lastFrame>d.skipTreshold&&(d._onTrack=0,d.skippedDraw++))};f.prototype.endStep=function(){d.lastFrame=d.now};f.prototype.getStatus=
function(){return d._onTrack};d=new f;d._stepLogic();return d});define("Arstider/core/Pixel",[],function(){return function(f,d,c,b,a,h,g){this.x=f;this.y=d;this.canvas=c;this.r=b;this.g=a;this.b=h;this.a=g}});
define("Arstider/core/Profiler",["Arstider/Browser"],function(f){function d(a){a.style.position="relative";a.style.display="block";a.style.height="16px";a.style.padding="1px";a.style.paddingRight="2px";a.style.paddingLeft="2px";a.style.marginTop="2px";a.style.marginRight="10px";a.style.fontSize="14px";a.style.fontFamily="Arial";a.style.fontWeight="bold";a.style.backgroundColor="#999";a.style.border="2px solid #def";a.style.color="#070a0f";a.style.cssFloat="right";a.style.cursor="pointer";a.style.textAlign=
"center";a.style.borderRadius="2px";a.style.maxWidth="80px";a.onmouseover=function(){this.style.backgroundColor="#bcc"};a.onmouseout=function(){this.style.backgroundColor="#999"};return a}var c=window.document.createElement("div");c.id="_ArstiderProfiler";c.style.position="fixed";c.style.display="block";c.style.width="100%";c.style.left="0px";c.style.zIndex="9001";c.style.bottom="0px";c.style.padding="3px";c.style.fontSize="10px";c.style.fontFamily="Arial";c.style.backgroundColor="black";c.style.opacity=
"0.7";c.style.color="white";c.style.cursor="default";c.collapsed=!0;c.currentTab="draw";c.minibar=window.document.createElement("div");if(!f.isMobile){f=window.document.createElement("div");f.id="_ArstiderProfilerCloseBtn";d(f);f.onclick=function(){c.style.display="none"};f.innerHTML="X";c.appendChild(f);var b=window.document.createElement("div");b.id="_ArstiderProfilerToggleBtn";d(b);b.onclick=function(){c.collapsed=!c.collapsed;c.collapsed?(b.innerHTML="Expend",a.style.display="none"):(b.innerHTML=
"Collapse",a.style.display="block")};b.innerHTML="Expend";c.appendChild(b);f=window.document.createElement("div");f.id="_ArstiderProfilerDrawTab";d(f);f.style.cssFloat="left";f.onclick=function(){c.currentTab="draw";a.innerHTML=""};f.innerHTML="Drawing";c.appendChild(f);f=window.document.createElement("div");f.id="_ArstiderProfilerMemoryTab";d(f);f.style.cssFloat="left";f.onclick=function(){c.currentTab="memory";a.innerHTML=""};f.innerHTML="Memory";c.appendChild(f);var a=window.document.createElement("div");
a.style.width="100%";a.style.height="300px";a.style.overflowY="auto";a.style.overflowX="hidden";a.style.borderTop="1px solid #333";a.style.display="none";a.style.position="relative";c.detailsTab=a;c.appendChild(a)}c.minibar.id="_ArstiderProfilerMinibar";c.minibar.style.position="relative";c.minibar.style.display="block";c.minibar.style.cssFloat="left";c.minibar.style.paddingTop="5px";c.minibar.style.fontSize="12px";c.appendChild(c.minibar);return c});
(function(){var f=null;define("Arstider/core/Storage",[],function(){function d(){this.enabled=!1;this.prefix="";this._safeKeys=[];this._test()}if(null!=f)return f;d.prototype._test=function(){try{localStorage.test="a",localStorage.removeItem("test"),this.enabled=!0}catch(c){return this.enabled=!1,0<Arstider.verbose&&console.warn("Arstider.Storage.test: localStorage is unavailable"),!1}return!0};d.prototype.setSafeKeys=function(c){this._safeKeys=c};d.prototype.get=function(c){if(!1===this.enabled)return 1<
Arstider.verbose&&console.warn("Arstider.Storage.get: localStorage is unavailable"),null;if(void 0==localStorage[this.prefix+c]){if(-1!=this._safeKeys.indexOf(c))return void 0==localStorage[c]?(1<Arstider.verbose&&console.warn("Arstider.Storage.get: ",c," not found"),null):localStorage[c];1<Arstider.verbose&&console.warn("Arstider.Storage.get: ",this.prefix+c," not found");return null}return localStorage[this.prefix+c]};d.prototype.set=function(c,b){if(!1===this.enabled)return 1<Arstider.verbose&&
console.warn("Arstider.Storage.set: localStorage is unavailable"),!1;-1!=this._safeKeys.indexOf(c)?(localStorage[c]=b,2<Arstider.verbose&&console.warn("Arstider.Storage.set: setting safeKey ",c)):localStorage[this.prefix+c]=b;return!0};d.prototype.remove=function(c){if(!1===this.enabled)return!1;localStorage.removeItem(c);localStorage.removeItem(this.prefix+c);return!0};d.prototype.list=function(){var c=[];for(item in localStorage)-1==this._safeKeys.indexOf(item)&&-1!=item.indexOf(this.prefix)&&(c[c.length]=
item);return c};d.prototype.reset=function(){var c;if(!1===this.enabled)return!1;for(c in localStorage)-1==this._safeKeys.indexOf(c)&&-1!=c.indexOf(this.prefix)?localStorage.removeItem(c):2<Arstider.verbose&&console.warn("Arstider.Storage.reset: keeping safeKey ",c);return!0};return f=new d})})();
Arstider={timestamp:function(){return Date.now()},pageHidden:!1,tempBufferLabel:"_temp_",getNode:function(f,d){d=Arstider.checkIn(d,5);var c=f,b=0;if(c&&c.data)for(;void 0==c.data.nodeName;){b++;if(b>d)break;if(c.data.data)c=c.data;else break}return c},error:function(f,d){var c,b=new f(d.message);for(c in d)"message"!=c&&(b[c]=d[c]);return b},min:function(){for(var f=1,d=0,c=arguments.length;f<c;f++)arguments[f]<arguments[d]&&(d=f);return arguments[d]},max:function(){for(var f=1,d=0,c=arguments.length;f<
c;f++)arguments[d]<arguments[f]&&(d=f);return arguments[d]},floor:function(f){return f>>>0},ceil:function(f){return f<<1},log:function(f,d){var c="",b=null;"string"===typeof f?c=f:(f.message&&(c=f.message),f.asset&&(b=f.asset));Arstider.verbose>=(d||1)&&(null!=b&&console.log("%c","padding:"+(b.height||null)+"px "+(b.width||null)+"px;line-height:"+(b.height||null)+"px;background:url("+(b.src||null)+")"),console.error("%c"+c,"color:purple"))},powerOf2:function(f){return 0<f&&0===(f&f-1)},nextPowerOf2:function(f){if(0<
f&&0===(f&f-1))return f;for(var d=1;d<f;)d<<=1;return d},guid:function(){function f(){return Arstider.floor(65536*(1+Math.random())).toString(16).substring(1)}return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()}};void 0==Object.create&&(Object.create=function(f){function d(){}d.prototype=f;return new d});Arstider.disableConsole=function(){window.console={log:Arstider.emptyFunction,warn:Arstider.emptyFunction}};Arstider.force2d=!0;Arstider.emptyObject={};Arstider.emptyFunction=function(){};
Arstider.emptyString="";Arstider.skipUpdate=!1;Arstider.__cancelBubble={};Arstider.cancelBubble=function(f){f=Arstider.checkIn(f,0);Arstider.__cancelBubble[f]=!0};Arstider.emptyImgSrc="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";Arstider.FPS=60;Arstider.savedStates={};Arstider.queryStringToObject=function(f){return(f||document.location.search).replace(/(^\?)/,"").split("&").map(function(d){return d=d.split("="),this[d[0]]=d[1],this}.bind({}))[0]};
Arstider.disposeSavedState=function(f){f in Arstider.savedStates&&(Arstider.savedStates[f]._unload&&Arstider.savedStates[f]._unload(),delete Arstider.savedStates[f])};Arstider.degToRad=Math.PI/180;Arstider.radToDeg=180/Math.PI;Arstider.defaultComposition="source-over";Arstider.defaultColor="transparent";Arstider.delegate=function(f,d,c){return f.call.apply(f.bind,arguments)};Arstider.checkIn=function(f,d){return void 0===f?d:f};Arstider.isDefine=function(f){return"undefined"!=typeof f};
Arstider.firstOf=function(f,d){if(!f.length)return d;for(var c=0;c<f.length;c++)if(void 0!=f[c])return f[c];return d};Arstider.verbose=0;Arstider.distance=function(f,d,c,b){return Math.sqrt(Math.pow(c-f,2)+Math.pow(b-d,2))};Arstider.distance3=function(f,d,c,b,a,h){return Math.sqrt(Math.pow(b-f,2)+Math.pow(a-d,2)+Math.pow(h-c,2))};Arstider.direction=function(f,d,c,b){return Math.atan2(-(b-d),c-f)*Arstider.radToDeg};
Arstider.trimDuplicates=function(f){var d={},c=0,b=f.length,a=[];for(c;c<b;c++)d[f[c]]=f[c];for(c in d)d.hasOwnProperty(c)&&a.push(d[c]);return a};Arstider.reload=function(){"reload"in window.location?window.location.reload():"history"in window&&"go"in window.history?window.history.go(0):window.location.href=window.location.href};
Arstider.isObject=function(f){if(!f||"object"!==typeof f||f.nodeType||Arstider.isWindow(f)||f.constructor&&!Object.prototype.hasOwnProperty.call(f,"constructor")&&!Object.prototype.hasOwnProperty.call(f.constructor.prototype,"isPrototypeOf"))return!1;for(var d in f)f.hasOwnProperty(d);return void 0==d||Object.prototype.hasOwnProperty.call(f,d)};Arstider.isWindow=function(f){return f&&"object"===typeof f&&"setInterval"in f};Arstider.isFunction=function(f){var d={};return f&&"[object Function]"===d.toString.call(f)};
Arstider.lengthOf=function(f){if("array"===typeof f)return f.length;if(Arstider.isObject(f)){var d=0,c;for(c in f)f.hasOwnProperty(c)&&d++;return d}return 0};
Arstider.compare=function(f,d){var c;if(typeof f!==typeof d)return!1;switch(typeof f){case "object":if(Arstider.lengthOf(f)!==Arstider.lengthOf(d))return!1;for(c in f)if(f.hasOwnProperty(c)&&(!d.hasOwnProperty(c)||!Arstider.compare(f[c],d[c])))return!1;for(c in d)if(d.hasOwnProperty(c)&&!f.hasOwnProperty(c))return!1;break;case "array":c=f.length;if(c!==d.length)return!1;for(c--;0<=c;){if(!Arstider.compare(f[c],d[c]))return!1;c--}break;default:return f===d}return!0};
Arstider.randomSort=function(f){var d=f.length,c,b;if(0===d)return!1;for(;--d;)c=Arstider.floor(Math.random()*(d+1)),b=f[d],f[d]=f[c],f[c]=b;return f};Arstider.chop=function(f){return 0.5+f|0};Arstider.mixin=function(f,d,c,b,a){for(var h in d)if(void 0==f[h]||c)d[h]instanceof Function||"function"===typeof d[h]?b&&(f[(a||"")+h]=d[h]):f[(a||"")+h]=d[h];return f};Arstider.clone=function(f,d,c){return Arstider.mixin({},f,!0,d,c)};
Arstider.deepClone=function(f){if(null==f||"object"!=typeof f)return f;if(f instanceof Date){var d=new Date;d.setTime(f.getTime());return d}if(f instanceof Array){for(var d=[],c=0,b=f.length;c<b;c++)d[c]=Arstider.deepClone(f[c]);return d}if(f instanceof Object){d={};for(c in f)f.hasOwnProperty(c)&&(d[c]=Arstider.deepClone(f[c]));return d}0<Arstider.verbose&&console.warn("Arstider.deepClone: Object type unsupported ",f)};
Arstider.deepMerge=function(f,d,c){c&&(f=Arstider.deepClone(f));Array.isArray(f)?(d=d||[],f.forEach(function(b,a){b=f[a];"undefined"===typeof f[a]?d[a]=b:"object"===typeof b?d[a]=Arstider.deepMerge(b,d[a]):Array.isArray(b)?d[a]=Arstider.deepMerge(b,d[a]):d[a]=b})):(d=d||{},Object.keys(f).forEach(function(b){var a=f[b];Array.isArray(a)?d[b]=Arstider.deepMerge(a,d[b]):"object"===typeof a?(d[b]=d[b]||{},d[b]=f[b]?Arstider.deepMerge(a,d[b]):a):d[b]=a}));return d};
Arstider.Super=function(f,d){2<arguments.length?d.apply(f,Array.prototype.slice.call(arguments,2)):d.call(f)};Arstider.URIEncode=function(f){encodeURIComponent?(f=encodeURIComponent(f),f=f.replace(/~/g,"%7E"),f=f.replace(/!/g,"%21"),f=f.replace(/\(/g,"%28"),f=f.replace(/\)/g,"%29"),f=f.replace(/'/g,"%27")):(f=escape(f),f=f.replace(/@/g,"%40"),f=f.replace(/\//g,"%2F"),f=f.replace(/\+/g,"%2B"));return f.replace(/\%20/g,"+")};
Arstider.Inherit=function(f,d){d instanceof Function||"function"===typeof d?(f.prototype=Object.create(d.prototype),f.prototype.constructor=f):console.warn("Arstider.Inherit: Could not make ",f," inherit",d)};Arstider.fixedAnimationFrame=function(f,d){var c=1E3/Arstider.FPS;d>c+3&&(c-=0.5*(d-c));Arstider.__animTimer=window.setTimeout(f,c)};Arstider.fixedCancelAnimationFrame=function(f){void 0!=Arstider.__animTimer&&window.clearTimeout(Arstider.__animTimer)};
Arstider.blobCache={empty:{url:Arstider.emptyImgSrc,size:0}};
Arstider.setFPS=function(f){f=f||60;"auto"==f||60<=f?(Arstider.FPS=60,Arstider.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Arstider.fixedAnimationFrame,Arstider.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||Arstider.fixedCancelAnimationFrame):
(Arstider.FPS=f,Arstider.requestAnimFrame=Arstider.fixedAnimationFrame,Arstider.cancelAnimFrame=Arstider.fixedCancelAnimationFrame)};Arstider.defaultRenderStyle="auto";Arstider.bufferPool={};Arstider.serialize=function(f,d){if("string"===typeof f||null==f)return f;var c=[],b;for(b in f){var a=d?d+"["+b+"]":b,h=f[b];c.push("object"==typeof h?Arstider.serialize(h,a):encodeURIComponent(a)+"="+encodeURIComponent(h))}return c.join("&")};
Arstider.countBuffers=function(){var f,d=0;for(f in Arstider.bufferPool)d++;return d};Arstider.getMemory=function(){var f,d=0;for(f in Arstider.blobCache)d+=(Arstider.blobCache[f].size||0)>>10;for(f in Arstider.bufferPool)d+=Arstider.bufferPool[f].getMemory()>>20;return(d/1024).toFixed(2)};
(function(){var f=null;define("Arstider/sounds/HowlerInterface",["Arstider/Browser","Arstider/Timer"],function(d,c){function b(){this.managerRef;this.ieTimer=null}if(null!=f)return f;b.prototype.init=function(a,b,c){f.managerRef=a;if(f.test()){"android"==d.name&&(Howler.usingWebAudio=!1);var m;a={empty:[0,11]};var p=0;if(b){"ie"==d.name&&(p=100);for(m in f.managerRef.sounds)a[m]=[Arstider.max(0,f.managerRef.sounds[m].offset-p),f.managerRef.sounds[m].duration,f.managerRef.sounds[m].loop];f.managerRef.sounds.empty=
{};f.managerRef.sounds.handle=new Howl({urls:[b+".mp3",b+".ogg"],sprite:a,onend:f.managerRef._removeInstance})}c&&c()}};b.prototype.test=function(){return Howl?!0:(0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.test: sounds disabled, Howler not loaded"),!1)};b.prototype.create=function(a){return new Howl({urls:f.managerRef.tracks[a].files,loop:f.managerRef.tracks[a].loop||!1})};b.prototype.playTrack=function(a,b,d){a.play();d=d||{};var m=Arstider.checkIn(d.fadeIn,f.managerRef.tracks[b].fadeIn);
m&&f.fade(a,b,0,a._volume,m);var p=Arstider.checkIn(d.fadeOut,f.managerRef.tracks[b].fadeOut);f.managerRef.tracks[b].fadeOutTimer&&(f.managerRef.tracks[b].fadeOutTimer.pause(),f.managerRef.tracks[b].fadeOutTimer=null);m=[];p&&m.push(function(){f.managerRef.tracks[b].duration=a._duration;p&&(f.managerRef.tracks[b].fadeOutTimer=new c(function(){f.fade(a,b,a._volume,0,p)},1E3*f.managerRef.tracks[b].duration,!0))});d.startCallback&&m.push(function(){d.startCallback.apply(f.managerRef,[b])});a._onplay=
m;d.endCallback&&(a._onend=[d.endCallback]);return f.managerRef};b.prototype.playSound=function(a,b,c,m){"ie"==d.name&&a.stop();if(a._audioNode&&a._audioNode.length)for(;0<a._audioNode.length;){a._audioNode[0].paused&&(a._audioNode[0].paused=!1);break}a.play(b,function(m){m=parseInt(m+"");f.managerRef._addInstance(b,m);a.volume(Arstider.checkIn(c.volume,1),m);"ie"==d.name&&(clearTimeout(f.ieTimer),f.ieTimer=setTimeout(function(){a.stop(m)},f.managerRef.sounds[b].duration+50))});return f.managerRef};
b.prototype.pause=function(a,b){a&&(f._nodePlaying(a)?(a.pause(),b&&f.managerRef.tracks[b]&&f.managerRef.tracks[b].fadeOutTimer&&f.managerRef.tracks[b].fadeOutTimer.pause()):(a.pause(),a._playStart=0));return f.managerRef};b.prototype.resume=function(a,b){a?0!=a._playStart&&(a.play(),b&&f.managerRef.tracks[b]&&f.managerRef.tracks[b].fadeOutTimer&&f.managerRef.tracks[b].fadeOutTimer.resume()):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.fade: sound ",b," not loaded, no handle");return f.managerRef};
b.prototype.fade=function(a,b,c,d,p,k){a?("auto"===c&&(c=a._volume),a.fade(c,d,p,k||Arstider.emptyFunction,b)):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.fade: sound ",b," not loaded, no handle");return f.managerRef};b.prototype.stop=function(a,b){a?(a.stop(b),a._playStart=0,b&&f.managerRef.tracks[b]&&f.managerRef.tracks[b].fadeOutTimer&&f.managerRef.tracks[b].fadeOutTimer.pause()):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.stop: sound ",b," not loaded, no handle");
return f.managerRef};b.prototype.setPosition=function(a,b,c){a?a.pos(b,c):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.setPosition: sound ",c," not loaded, no handle");return f.managerRef};b.prototype._nodePlaying=function(a){if(a)for(var b=0;b<a._audioNode.length;b++)if(!a._audioNode[b].paused)return!0;return!1};b.prototype.setVolume=function(a,b,c){a?a.volume(b,c):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.setVolume: sound ",c," not loaded, no handle");return f.managerRef};
return f=new b})})();define("Arstider/sounds/Track",["Arstider/Signal"],function(f){return function(d){d=d||{};this.files=Arstider.checkIn(d.files,[]);this.ready=!1;this.handle=null;this.volume=Arstider.checkIn(d.volume,1);this.fadeOutTimer=null;this.loop=Arstider.checkIn(d.loop,!1);this.fadeIn=Arstider.checkIn(d.fadeIn,null);this.fadeOut=Arstider.checkIn(d.fadeOut,null);this.onload=new f;this.onstart=new f;this.onend=new f}});
define("Arstider/sprites/GridSpritesheet",["Arstider/Bitmap"],function(f){function d(c,b,a,d){this.data=c;b||(b={});this.name=b.name;this.defaultAnim=b.defaultAnim;this.fps=0<b.fps?b.fps:15;this.animations={};this.path=a.path;this.onComplete=d;this.parseJSON(c,a.path)}d.prototype.getAnim=function(c){return this.animations[c]};d.prototype.parseJSON=function(c,b){var a=this.imageUrl=b+c.image;new f({url:a,callback:this.onImageComplete.bind(this)})};d.prototype.onImageComplete=function(c){if(!this.imageWidth){var b=
this.data;this.imageWidth=c.width;this.imageHeight=c.height;this.frameWidth=b.frameWidth;this.frameHeight=b.frameHeight;if(this.imageWidth){null!=b.anchor&&(this.anchor={x:b.anchor.x,y:b.anchor.y});this.frames=[];var a,d;for(a in b.animations){var f=b.animations[a];c=this.animations[a];this.defaultAnim&&"idle"!=a||(this.defaultAnim=a);c||(c=this.animations[a]=Arstider.clone(f),c.name=a,c.spritesheet=this,c.frames=[]);n=f.frames.length;for(i=0;i<n;i++)d=f.frames[i],frameData=this.getFrameData(d),c.frames.push(frameData)}this.onComplete()}else console.error("Cannot find image size for "+
this.imageUrl)}};d.prototype.getFrameData=function(c){if(this.frames[c])return this.frames[c];for(var b=0,a=this.frameWidth*c;a>=this.imageWidth;)a-=this.imageWidth,b+=this.frameHeight;return{index:c,rect:[0+a,b,this.frameWidth,this.frameHeight],sourceSize:[this.frameWidth,this.frameHeight]}};return d});
define("Arstider/sprites/JsonSpritesheet",[],function(){function f(d,c,b){this.data=d;c||(c={});this.name=c.name;this.defaultAnim=c.defaultAnim;this.fps=0<c.fps?c.fps:15;this.animations={};this.frames=[];this.frameDict={};this.baseUrl=b.path;c.imagesAtlas?this.parseJSONImages(d,this.baseUrl):this.parseJSON(d,this.baseUrl)}f.prototype.getFrameByName=function(d){this.frameDict[d]||console.log("Unable to get frame or image "+d+" from the Spritesheet");return this.frameDict[d]};f.prototype.getAnim=function(d){return this.animations[d]};
f.prototype.parseJSONImages=function(d,c){for(var b=c+d.meta.image,a,f=!1,g=d.frames.length,m=0;m<g;m++)a=d.frames[m],!f&&a.rotated&&(f=!0,console.log("JsonSpritesheet ERROR for "+this.name+": rotated frames are not supported, please uncheck this options before exporting")),a=this.createFrame(b,m,a),this.frameDict[a.name]=a};f.prototype.parseJSON=function(d,c){var b=c+d.meta.image;null!=d.anchor&&(this.anchor={x:d.anchor.x,y:d.anchor.y});for(var a,f,g,m=!1,p=d.frames.length,k=0;k<p;k++)g=d.frames[k],
!m&&g.rotated&&(m=!0,console.log("JsonSpritesheet ERROR for "+this.name+": rotated frames are not supported, please uncheck this options before exporting")),a=g.filename.lastIndexOf("/"),f=0>=a?"idle":g.filename.substr(0,a),this.defaultAnim&&"idle"!=f||(this.defaultAnim=f),a=this.animations[f],a||(a=this.animations[f]={},a.name=f,a.spritesheet=this,a.frames=[]),g=this.createFrame(b,k,g),a.frames.push(g),this.frameDict[g.name]=g,this.frames.push(g)};f.prototype.createFrame=function(d,c,b){var a=b.filename,
a=a?a.replace(".png",""):c+"";return{index:c,name:a,image:d,rect:[b.frame.x,b.frame.y,b.frame.w,b.frame.h],origin:[b.spriteSourceSize.x,b.spriteSourceSize.y],sourceSize:[b.sourceSize.w,b.sourceSize.h]}};return f});
define("Arstider/sprites/SpritesheetManager",["Arstider/Request","Arstider/sprites/JsonSpritesheet","Arstider/sprites/ZoeSpritesheet","Arstider/sprites/GridSpritesheet"],function(f,d,c,b){function a(){this.defaultFileName="{{name}}.json";this.spritesheets={};this.loadCallbacks={};this.overrides={}}function h(a,b){var c,d=g(a),f;null==d&&null!=b?(a.lastIndexOf("/")==a.length-1&&(a=a.substr(0,a.lastIndexOf("/"))),f=a,c=a.substring(a.lastIndexOf("/")+1,a.length),b=b.replace("{{name}}",c),-1<c.indexOf(".")&&
a.substring(0,a.lastIndexOf(".")),f.lastIndexOf("/")<f.length-1&&(f+="/"),a=f+b,d=g(a)):(f=a.substring(0,a.lastIndexOf("/")+1),c=-1<a.indexOf("/")?a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")):a.substring(0,a.lastIndexOf(".")));return{name:c,path:f,url:a,ext:d}}function g(a){var b=a.lastIndexOf(".");return 0<b?a.substr(b+1):null}a.prototype.get=function(a,f,g){var l=h(a,this.defaultFileName),r=l.url.replace(/\//g,"_"),u=l.name;f.name=u;if(this.loadCallbacks[r])this.loadCallbacks[r].push(g);
else if(this.spritesheets[r])g(this.spritesheets[r]);else{this.loadCallbacks[r]||(this.loadCallbacks[r]=[]);this.loadCallbacks[r].push(g);var y=this;this.loadJSON(l.url,function(a){var g;a.images&&1<=a.images.length?(g=new c(a,f,l),g.name=u,g.url=l.url,y.onSpritesheetLoaded(r,g,f)):a.frames&&1<=a.frames.length?(a.overrides&&!y.overrides[u]&&y.registerOverrides(a.overrides),g=new d(a,f,l),g.name=u,g.url=l.url,y.onSpritesheetLoaded(r,g,f)):0<a.frameWidth?(g=new b(a,f,l,function(){y.onSpritesheetLoaded(r,
g,f)}),g.name=u,g.url=l.url):(console.log("SpritesheetManager ERROR: Unkown spritesheet format."),console.log(a),y.onSpritesheetLoaded(r,g,f))})}};a.prototype.onSpritesheetLoaded=function(a,b,c){this.applyOverrides(this.overrides[b.name],name,b,c);c.overrides&&this.applyOverrides(c.overrides,name,b,c);this.spritesheets[a]=b;if(this.loadCallbacks[a]){c=this.loadCallbacks[a].length;for(var d=0;d<c;d++){var f=this.loadCallbacks[a][d];f&&f(b)}this.loadCallbacks[a]=null}};a.prototype.registerOverrides=
function(a){console.log("Animation overrides: ",a);for(var b=0;b<a.length;b++){var c=a[b];this.overrides[c.spritesheet]=c}};a.prototype.applyOverrides=function(a,b,c,d){if(a&&a&&(a.defaultAnim&&(c.defaultAnim=a.defaultAnim),a.animations)){0<a.fps&&(c.fps=a.fps);for(var f in a.animations){b=a.animations[f];for(var g in b)if(d=c.animations[f],d||(c.animations[f]={},d=c.animations[f]),"frames"==g){for(var h=b[g],w=[],x=0;x<h.length;x++){var v=h[x];if("string"==typeof v)this.warnedFrameName||(this.warnedFrameName=
!0,console.error("Frame re-indexing from frame names is not yet supported for anim "+f));else if(0<v||0===v){var q=c.frames[v];q?(w||(w=[]),w.push(q)):console.error("Frame "+v+" not found on anim "+f)}}w&&(d.frames=w)}else d[g]=b[g]}}};a.prototype.loadJSON=function(a,b){return(new f({url:a,caller:this,cache:!1,track:!0,type:"json",callback:function(a){b(a)}})).send()};a.prototype.reset=function(){this.spritesheets={};this.loadCallbacks={}};return new a});
define("Arstider/sprites/ZoeSpritesheet",[],function(){function f(d,c,b){this.data=d;c||(c={});this.frames=[];this.name=c.name;this.defaultAnim=c.defaultAnim;this.fps=0<c.fps?c.fps:15;this.animations={};this.parseJSON(d,b.path)}f.prototype.getAnim=function(d){return this.animations[d]};f.prototype.parseJSON=function(d,c){this.images=[];for(var b,a=0;a<d.images.length;a++)b=c+d.images[a],this.images.push(b);null!=d.anchor&&(this.anchor={x:d.anchor.x,y:d.anchor.y});var f;0<d.framerate&&(this.fps=d.framerate);
for(var g=d.frames.length,a=0;a<g;a++)f=d.frames[a],b=this.images[f[4]],f={index:a,image:b,rect:[f[0],f[1],f[2],f[3]],origin:[-f[5],-f[6]]},this.frames.push(f);for(var m in d.animations){var p=d.animations[m];b=this.animations[m];this.defaultAnim&&"idle"!=m||(this.defaultAnim=m);b||(b=this.animations[m]=Arstider.clone(p),b.name=m,b.spritesheet=this,b.frames=[]);g=p.frames.length;for(a=0;a<g;a++)f=p.frames[a],f=this.frames[f],b.frames.push(f)}};return f});
(function(){var f={B:{render:function(c,b){b.bold=!0}},I:{render:function(c,b){b.italic=!0}},C:{param:!0,render:function(c,b,a){c.fillStyle=a}},G:{param:!0,render:function(c,b,a){c.shadowBlur=parseInt(a)}},L:{param:!0,render:function(c,b,a){c.lineWidth=parseInt(a)}},S:{param:!0,render:function(c,b,a){b.size=a+"px"}},T:{param:!0,render:function(c,b,a,d){d.width=parseInt(a);d.isTab=!0}},X:{param:!0,render:function(c,b,a,d){d.xOffset=parseInt(a)}},Y:{param:!0,render:function(c,b,a,d){d.yOffset=parseInt(a)}}},
d=null;define("Arstider/texts/BBParser",["Arstider/texts/Segment"],function(c){function b(){this.openSegment="[[";this.closeSegment="]]";this.ruleEnd="/";this.assignation="=";this.breakLine="<br>"}if(null!=d)return d;b.prototype.parse=function(a,b){var g,m;g=null;var p;b=b||[];var k=null,l=[],r=null;g=a.indexOf(this.openSegment);-1===g?""!==a&&l.push(new c(a)):(0<g&&(p=new c(a.substring(0,g)),p.styles=b.concat(),l.push(p)),k=a[g+this.openSegment.length].toUpperCase(),k===this.ruleEnd&&b.pop(),void 0==
f[k]&&(k=null),m=a.indexOf(this.closeSegment)+this.closeSegment.length,"T"===k?(p=new c(""),p.styles=[{style:"T",rule:a.substring(g+this.openSegment.length+this.assignation.length+1,m-this.closeSegment.length),render:f.T.render}],l.push(p),l=l.concat(d.parse(a.substring(m),b))):null!=k&&(r={style:k,render:f[k].render},!0===f[k].param&&(r.rule=a.substring(g+this.openSegment.length+this.assignation.length+1,m-this.closeSegment.length))),g=a.substring(g).indexOf(this.openSegment),a[g+this.openSegment.length]===
this.ruleEnd?(p=new c(""),p.styles=b.concat(),null!=k&&p.styles.push(r),l.push(p)):null!=k&&b.push(r),l=l.concat(d.parse(a.substring(m),b)));return l};b.prototype.splitSymbol=function(a,b,d,f){for(var p=0,k=0,l=[],r,p=0;p<a.length;p++)for(r=a[p].text.split(b),k=0;k<r.length;k++)0<k&&f&&l.push(new c(b,a[p].styles)),l.push(new c(r[k]+(d?b:""),a[p].styles));return l};b.prototype.trimSpaces=function(a){for(var b=0,d=0,f=[],p,b=0;b<a.length;b++)for(p=a[b].text.split(" "),d=0;d<p.length;d++)f.push(new c(p[d],
a[b].styles)),d<p.length-1&&f.push(new c(" ",a[b].styles));return f};return d=new b})})();
define("Arstider/texts/Font",["Arstider/Request"],function(f){function d(c){var b=this;c=c||Arstider.emptyObject;if(c.url){this.url=c.url.split(".").join("");this.family=c.name;this.loaded=!1;var a=window.document.getElementById("Arstider_font_loader");null==a&&(a=window.document.createElement("style"),a.type="text/css",a.id="Arstider_font_loader",window.document.getElementsByTagName("head")[0].appendChild(a));a.innerHTML+="@font-face{font-family: "+c.name+"; src: url("+c.url+");} ."+c.name+"_fontLoader{font-family:"+
c.name+", sans-serif;} \n";a=window.document.createElement("input");a.id="Arstider_font_loader_"+c.name;a.style.position="fixed";a.style.border="0px";a.style.backgroundColor="transparent";a.style.zIndex=-1;a.value=".";window.document.body.appendChild(a);a.className=c.name+"_fontLoader";(new f({url:c.url,type:"blob",caller:b,callback:function(){setTimeout(function(){b.loaded=!0;b._runCallbacks.apply(b,[!0])},150)}})).send()}else this.family=Arstider.checkIn(c.family,"Arial"),this.loaded=!0,this.url=
"null";this.name=c.name;this.temp=Arstider.checkIn(c.temp,!1);this.padding=Arstider.checkIn(c.padding,0);this.paddingTop=Arstider.checkIn(c.paddingTop,this.padding);this.paddingLeft=Arstider.checkIn(c.paddingLeft,this.padding);this.lineSpacing=Arstider.checkIn(c.lineSpacing,null);this.lineHeight=Arstider.checkIn(c.lineHeight,"1em");this.textWrap=Arstider.checkIn(c.textWrap,!1);this.size=Arstider.checkIn(c.size,"12px");this.bold=Arstider.checkIn(c.bold,!1);this.italic=Arstider.checkIn(c.italic,!1);
this.strokeStyle=Arstider.checkIn(c.strokeStyle,"transparent");this.fillStyle=Arstider.checkIn(c.fillStyle,"black");this.lineWidth=Arstider.checkIn(c.lineWidth,0);this.shadowColor=Arstider.checkIn(c.shadowColor,"transparent");this.shadowBlur=Arstider.checkIn(c.shadowBlur,0);this.shadowOffsetX=Arstider.checkIn(c.shadowOffsetX,0);this.shadowOffsetY=Arstider.checkIn(c.shadowOffsetY,0);this.fontOffsetX=Arstider.checkIn(c.fontOffsetX,0);this.fontOffsetY=Arstider.checkIn(c.fontOffsetY,0);this.textAlign=
Arstider.checkIn(c.textAlign,"left");this.textBaseline="alphabetic";this.loadCallbacks=Arstider.checkIn(c.loadCallbacks,[]);null===this.lineSpacing&&(this.lineSpacing=parseInt(this.size.split("px").join("")))}d.prototype._onFontLoaded=function(c){this.loaded&&!this.temp?c():this.loadCallbacks.push(c)};d.prototype._runCallbacks=function(c){var b=this.loadCallbacks.length-1;for(b;0<=b;b--)this.loadCallbacks[b]();c&&(this.loadCallbacks.length=0)};return d});
define("Arstider/texts/Segment",[],function(){function f(d,c){this.text=d;this.styles=Arstider.checkIn(c,[]);this.xOffset=this.yOffset=this.width=0;this.isTab=!1}f.prototype.calculateWidth=function(d,c){this.isTab||(-1!=this.text.indexOf("<br>")?this.width=0:(d.save(),this.applyStyles(d,Arstider.clone(c)),this.width=Math.ceil(d.measureText(this.text).width+this.xOffset),d.restore()))};f.prototype.applyStyles=function(d,c){for(var b=0;b<this.styles.length;b++)this.styles[b].render(d,c,this.styles[b].rule,
this);d.font=(c.bold?"bold ":"")+(c.italic?"italic ":"")+c.size+" "+c.family};f.prototype.render=function(d,c,b,a,f,g){-1==this.text.indexOf("<br>")&&""!=this.text&&" "!=this.text&&(d.save(),this.applyStyles(d,Arstider.clone(c)),f&&d.strokeText(this.text,Math.round(b+this.xOffset),Math.round(a+this.yOffset),this.width),g&&(f&&c.shadowColor&&(d.shadowColor=Arstider.defaultColor),d.fillText(this.text,Math.round(b+this.xOffset),Math.round(a+this.yOffset),this.width)),d.restore())};return f});
define("Arstider/tweens/Action",[],function(){function f(d,c){this.startTime=1;this.timesToRun=Arstider.checkIn(c,1);this.timesRan=0;this.time=this.startTime;this.callback=d;this.callbackOption=[Arstider.checkIn(c,null)]}f.prototype.rewind=function(){this.time=this.startTime;this.timesRan=0};f.prototype.step=function(d){if(this.timesToRun>this.timesRan||-1==this.timesToRun)this.callback.apply(d,this.callbackOption),this.timesRan++};return f});
define("Arstider/tweens/Animation",["Arstider/tweens/Transformation","Arstider/Easings"],function(f,d){function c(b,a,c,g,m){this.changes=[];var p,k;for(p in a)k=!1,b[p]instanceof Function||(p in b||(b[p]=0),"string"==typeof b[p]&&-1!=b[p].indexOf("#")&&"string"==typeof a[p]&&-1!=a[p].indexOf("#")&&(k=!0),this.changes.push(new f({property:p,start:b[p],end:a[p],isColor:k})));this.time=this.startTime=Arstider.checkIn(c,1E3);this.easing=Arstider.checkIn(g.bind(d),d.LINEAR);this.easeOpt=m}c.prototype.rewind=
function(){this.time=this.startTime};c.prototype.step=function(b){var a=this.changes.length-1,c=Arstider.min(this.time/this.startTime,1);for(a;0<=a;a--)this.changes[a].lastStep=b.target[this.changes[a].property],b.target[this.changes[a].property]=this.changes[a].isColor?this._stepColor(this.changes[a].end,this.changes[a].start,this.easing(c)):this.changes[a].end-(this.changes[a].end-this.changes[a].start)*this.easing(c,this.easeOpt)};c.prototype._stepColor=function(b,a,c){var d=parseInt(b.slice(1),
16);a=parseInt(a.slice(1),16);b=d>>16;var f=d>>8&255,d=d&255,p=a>>8&255,k=a&255;return"#"+(16777216+65536*(Arstider.chop(((a>>16)-b)*c)+b)+256*(Arstider.chop((p-f)*c)+f)+(Arstider.chop((k-d)*c)+d)).toString(16).slice(1)};c.prototype.stepBack=function(b){var a=this.changes.length-1;for(a;0<=a;a--)b.target[this.changes[a].property]=this.changes[a].lastStep};return c});
define("Arstider/tweens/Transformation",[],function(){return function(f){this.property=Arstider.checkIn(f.property,null);this.start=Arstider.checkIn(f.start,0);this.end=Arstider.checkIn(f.end,1);this.lastStep=Arstider.checkIn(f.start,0);this.isColor=Arstider.checkIn(f.isColor,!1)}});
